import{O as St,D as P,b as w,cf as C,cg as Bs,ch as Ps,q as X,bZ as ot,bA as os,bt as R,ci as Ls,cj as Z,ck as rs,cl as Jt,cm as Rs,b$ as as,cn as G,_ as v,c as l,aV as Mt,bs as tt,co as Di,cp as Ai,cq as S,bl as Os,cr as ge,bq as mt,cs as j,ct as Ve,cu as _t,cv as Be,cw as At,cx as it,d as E,bd as cs,bB as I,l as f,bj as q,bv as ht,bu as x,cy as _i,b9 as It,ba as B,aQ as T,bw as rt,cz as zs,cA as pe,c8 as vt,$ as _,cB as He,cC as z,cD as ls,cE as Ti,cF as ki,cG as Ni,cH as hs,cI as we,cJ as Yt,cK as Hs,cL as Fs,b8 as Vt,cM as et,cN as M,cO as nt,cP as je,bI as Pe,cQ as Gs,cR as Ws,cS as Us,cT as Et,cU as xi,cV as js,f as Ct,cW as ds,cX as Ks,cY as O,cZ as Ht,c_ as yt,c$ as us,d0 as Bt,d1 as Y,d2 as fs,d3 as Zs,d4 as Ys,d5 as Xs,p,bD as U,aY as W,o as at,I as ut,d6 as $s,d7 as ct,d8 as Qs,d9 as qs,da as Js,ce as ve,k as Pt,db as ne,dc as Nt,dd as Ke,de as k,df as ms,dg as tn,dh as Hi,aW as te,g as Le,aU as $,di as en,aT as sn,aZ as bs,dj as nn,K as Lt,dk as on,dl as rn,dm as Mi,dn as Dt,e as an,dp as cn,dq as Ce,dr as Vi,aN as L,ds as pt,dt as Ze,du as ft,dv as gs,dw as Fi,dx as ln,dy as hn,dz as dn,dA as oe,dB as un,dC as fn,dD as mn,dE as bn,dF as gn,dG as re,dH as Fe,z as ee,dI as A,dJ as Gi,dK as ae,dL as pn,dM as wn,dN as Re,dO as Ye,dP as Wi,dQ as vn,dR as Cn,dS as yn,dT as Sn,dU as Ui,dV as zt,dW as In,dX as K,dY as En,a as ps,dZ as Dn,d_ as An,b2 as ce,d$ as ws,e0 as _n,bg as Tn,e1 as kn,e2 as le,e3 as Nn,e4 as Ge,e5 as xn,e6 as Mn,e7 as Vn,e8 as Bn,e9 as Pn,ea as Ln,eb as Rn,ec as On,ed as zn,ee as Hn,ef as Fn,eg as ji,eh as Gn,ei as vs,ej as Bi,V as Cs,ek as Xe,el as Wn,em as Un,en as Pi,eo as he,ep as ys,bh as Li,bi as Ri,bk as Oi,eq as jn,er as Kn,es as Zn,et as Yn,eu as Xn,ev as $n,W as F,ew as Ki,aR as Qn,ca as Ss,ex as qn,ey as Zi,ez as Jn,eA as Yi,eB as to,eC as eo,eD as io,eE as so,eF as no,eG as oo,eH as ro,eI as ao,C as co,eJ as lo,eK as ho,eL as uo,eM as Is,eN as fo,eO as mo,eP as bo,eQ as go,eR as po,eS as Xi,H as wt,eT as Es,eU as Rt,eV as de,eW as Ds,eX as As,eY as Tt,eZ as We,e_ as $i,e$ as wo,f0 as vo,f1 as Co,f2 as yo,f3 as Qi,f4 as So,f5 as Io,f6 as Eo,f7 as Do,f8 as Ao,f9 as _o,a6 as To,fa as ko,fb as qi,fc as No,fd as xo,fe as Mo,ff as Vo,fg as Bo,fh as Po,fi as Lo,fj as Ro,fk as Oo,b3 as zo,fl as Ho,aJ as Fo,fm as _s,c4 as Go,fn as Wo,fo as Uo,fp as jo,fq as Ko,fr as Zo,fs as Yo,ft as Oe,fu as Xo,aG as $o,fv as Qo,fw as qo,R as zi,bx as Jo,fx as Ts,fy as tr,fz as er,fA as ir,fB as sr,fC as nr,fD as or,fE as rr,fF as ar,fG as cr,s as lr,fH as hr,fI as dr}from"./index-B4L6nUdv.js";import{fN as Oa,fO as za,fL as Ha,fT as Fa,fP as Ga,fQ as Wa,fR as Ua,fM as ja,fS as Ka,fJ as Za,fK as Ya}from"./index-B4L6nUdv.js";var ur=".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:not(:last-child)>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:last-child{border-radius:0 0 4px 4px}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";St(ur,{});var fr=".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}";St(fr,{});class mr extends P{constructor(t,e){super();this.item=t;this.onClose=e;this._onDidClose=this._register(new w);this.onDidClose=this._onDidClose.event;this._onDidChangeVisibility=this._register(new w);this.onDidChangeVisibility=this._onDidChangeVisibility.event;this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(t=>this._onDidChangeVisibility.fire(t)));X.once(this.item.onDidClose)(()=>{this._onDidClose.fire();this.dispose()})}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item);this.dispose()}}class ks extends P{constructor(){super(...arguments);this._onDidChangeNotification=this._register(new w);this.onDidChangeNotification=this._onDidChangeNotification.event;this._onDidChangeStatusMessage=this._register(new w);this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event;this._onDidChangeFilter=this._register(new w);this.onDidChangeFilter=this._onDidChangeFilter.event;this._notifications=[];this.filter={global:C.OFF,sources:new Map}}static{this.NO_OP_NOTIFICATION=new Bs}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){let e=false;if(typeof t.global==="number"){e=this.filter.global!==t.global;this.filter.global=t.global}let i=false;if(t.sources){i=!Ps(this.filter.sources,t.sources);this.filter.sources=t.sources}if(e||i){this._onDidChangeFilter.fire({global:e?t.global:void 0,sources:i?t.sources:void 0})}}addNotification(t){const e=this.createViewItem(t);if(!e){return ks.NO_OP_NOTIFICATION}const i=this.findNotification(e);i?.close();this._notifications.splice(0,0,e);this._onDidChangeNotification.fire({item:e,index:0,kind:0});return new mr(e,s=>this.onClose(s))}onClose(t){const e=this.findNotification(t);if(e&&e!==t){e.close()}else{t.close()}}findNotification(t){return this._notifications.find(e=>e.equals(t))}createViewItem(t){const e=st.create(t,this.filter);if(!e){return void 0}const i=(o,r)=>{const a=this._notifications.indexOf(e);if(a>=0){this._onDidChangeNotification.fire({item:e,index:a,kind:o,detail:r})}};const s=e.onDidChangeExpansion(()=>i(2));const n=e.onDidChangeContent(o=>i(1,o.kind));X.once(e.onDidClose)(()=>{s.dispose();n.dispose();const o=this._notifications.indexOf(e);if(o>=0){this._notifications.splice(o,1);this._onDidChangeNotification.fire({item:e,index:o,kind:3})}});return e}showStatusMessage(t,e){const i=gr.create(t,e);if(!i){return P.None}this._statusMessage=i;this._onDidChangeStatusMessage.fire({kind:0,item:i});return ot(()=>{if(this._statusMessage===i){this._statusMessage=void 0;this._onDidChangeStatusMessage.fire({kind:1,item:i})}})}}function ue(d){return d instanceof st}class br extends P{constructor(){super();this._onDidChange=this._register(new w);this.onDidChange=this._onDidChange.event;this._state=Object.create(null)}get state(){return this._state}infinite(){if(this._state.infinite){return}this._state.infinite=true;this._state.total=void 0;this._state.worked=void 0;this._state.done=void 0;this._onDidChange.fire()}done(){if(this._state.done){return}this._state.done=true;this._state.infinite=void 0;this._state.total=void 0;this._state.worked=void 0;this._onDidChange.fire()}total(t){if(this._state.total===t){return}this._state.total=t;this._state.infinite=void 0;this._state.done=void 0;this._onDidChange.fire()}worked(t){if(typeof this._state.worked==="number"){this._state.worked+=t}else{this._state.worked=t}this._state.infinite=void 0;this._state.done=void 0;this._onDidChange.fire()}}class st extends P{static{this.MAX_MESSAGE_LENGTH=1e3}static create(t,e){if(!t||!t.message||os(t.message)){return void 0}let i;if(typeof t.severity==="number"){i=t.severity}else{i=R.Info}const s=st.parseNotificationMessage(t.message);if(!s){return void 0}let n;if(t.actions){n=t.actions}else if(Ls(t.message)){n={primary:t.message.actions}}let o=t.priority??Z.DEFAULT;if(o===Z.DEFAULT&&i!==R.Error){if(e.global===C.ERROR){o=Z.SILENT}else if(rs(t.source)&&e.sources.get(t.source.id)===C.ERROR){o=Z.SILENT}}return new st(t.id,i,t.sticky,o,s,t.source,t.progress,n)}static parseNotificationMessage(t){let e;if(t instanceof Error){e=Jt(t,false)}else if(typeof t==="string"){e=t}if(!e){return void 0}const i=e;if(e.length>st.MAX_MESSAGE_LENGTH){e=`${e.substr(0,st.MAX_MESSAGE_LENGTH)}...`}e=e.replace(/(\r\n|\n|\r)/gm," ").trim();const s=Rs(e);return{raw:i,linkedText:s,original:t}}constructor(t,e,i,s,n,o,r,a){super();this.id=t;this._severity=e;this._sticky=i;this._priority=s;this._message=n;this._source=o;this._visible=false;this._onDidChangeExpansion=this._register(new w);this.onDidChangeExpansion=this._onDidChangeExpansion.event;this._onDidClose=this._register(new w);this.onDidClose=this._onDidClose.event;this._onDidChangeContent=this._register(new w);this.onDidChangeContent=this._onDidChangeContent.event;this._onDidChangeVisibility=this._register(new w);this.onDidChangeVisibility=this._onDidChangeVisibility.event;if(r){this.setProgress(r)}this.setActions(a)}setProgress(t){if(t.infinite){this.progress.infinite()}else if(t.total){this.progress.total(t.total);if(t.worked){this.progress.worked(t.worked)}}}setActions(t={primary:[],secondary:[]}){this._actions={primary:Array.isArray(t.primary)?t.primary:[],secondary:Array.isArray(t.secondary)?t.secondary:[]};this._expanded=t.primary&&t.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky){return true}const t=this.hasActions;if(t&&this._severity===R.Error||!t&&this._expanded||this._progress&&!this._progress.state.done){return true}return false}get priority(){return this._priority}get hasActions(){if(!this._actions){return false}if(!this._actions.primary){return false}return this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){if(!this._progress){this._progress=this._register(new br);this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))}return this._progress}get message(){return this._message}get source(){return typeof this._source==="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!=="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(t){if(t===this._severity){return}this._severity=t;this._onDidChangeContent.fire({kind:0})}updateMessage(t){const e=st.parseNotificationMessage(t);if(!e||e.raw===this._message.raw){return}this._message=e;this._onDidChangeContent.fire({kind:1})}updateActions(t){this.setActions(t);this._onDidChangeContent.fire({kind:2})}updateVisibility(t){if(this._visible!==t){this._visible=t;this._onDidChangeVisibility.fire(t)}}expand(){if(this._expanded||!this.canCollapse){return}this._expanded=true;this._onDidChangeExpansion.fire()}collapse(t){if(!this._expanded||!this.canCollapse){return}this._expanded=false;if(!t){this._onDidChangeExpansion.fire()}}toggle(){if(this._expanded){this.collapse()}else{this.expand()}}close(){this._onDidClose.fire();this.dispose()}equals(t){if(this.hasProgress||t.hasProgress){return false}if(typeof this.id==="string"||typeof t.id==="string"){return this.id===t.id}if(typeof this._source==="object"){if(this._source.label!==t.source||this._source.id!==t.sourceId){return false}}else if(this._source!==t.source){return false}if(this._message.raw!==t.message.raw){return false}const e=this._actions&&this._actions.primary||[];const i=t.actions&&t.actions.primary||[];return as(e,i,(s,n)=>s.id+s.label===n.id+n.label)}}class ye extends G{constructor(t,e){super(t,e.label,void 0,true,async()=>{e.run();this._onDidRun.fire()});this._onDidRun=this._register(new w);this.onDidRun=this._onDidRun.event;this._keepOpen=!!e.keepOpen;this._menu=!e.isSecondary&&e.menu?e.menu.map((i,s)=>new ye(`${t}.${s}`,i)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class gr{static create(t,e){if(!t||os(t)){return void 0}let i;if(t instanceof Error){i=Jt(t,false)}else if(typeof t==="string"){i=t}if(!i){return void 0}return{message:i,options:e}}}function Se(d,t,e){return{id:Di(d.toString()).toString(),silent:e,source:t||"core"}}let $e=class qr extends P{constructor(t,e){super();this.telemetryService=t;this.notificationService=e;this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification(t=>{const e=t.source&&typeof t.source!=="string"?t.source.id:t.source;this.telemetryService.publicLog2("notification:show",Se(t.message,e,t.priority===Z.SILENT))}));this._register(this.notificationService.onDidRemoveNotification(t=>{const e=t.source&&typeof t.source!=="string"?t.source.id:t.source;this.telemetryService.publicLog2("notification:close",Se(t.message,e,t.priority===Z.SILENT))}))}};$e=v([l(0,Mt),l(1,tt)],$e);const Qe="notifications.showList";const Xt="notifications.hideList";const pr="notifications.toggleList";const Ue="notifications.hideToasts";const Ji="notifications.focusToasts";const wr="notifications.focusNextToast";const vr="notifications.focusPreviousToast";const Cr="notifications.focusFirstToast";const yr="notifications.focusLastToast";const qe="notification.collapse";const Je="notification.expand";const ts="notification.acceptPrimaryAction";const Sr="notification.toggle";const ti="notification.clear";const Ie="notifications.clearAll";const Ee="notifications.toggleDoNotDisturbMode";const De="notifications.toggleDoNotDisturbModeBySource";function gt(d,t){if(ue(t)){return t}const e=d.lastFocusedList;if(e instanceof _i){let i=e.getFocusedElements()[0];if(!ue(i)){if(e.isDOMFocused()){i=e.element(0)}}if(ue(i)){return i}}return void 0}function Ir(d,t,e){S.registerCommandAndKeybindingRule({id:Qe,weight:200,primary:Os(2048|41,2048|1024|44),handler:()=>{t.hide();d.show()}});S.registerCommandAndKeybindingRule({id:Xt,weight:200+50,when:ge,primary:9,handler:s=>{const n=s.get(Mt);for(const o of e.notifications){if(o.visible){n.publicLog2("notification:hide",Se(o.message.original,o.sourceId,o.priority===Z.SILENT))}}d.hide()}});mt.registerCommand(pr,()=>{if(d.isVisible){d.hide()}else{t.hide();d.show()}});S.registerCommandAndKeybindingRule({id:ti,weight:200,when:j,primary:20,mac:{primary:2048|1},handler:(s,n)=>{const o=s.get(Ve);const r=gt(s.get(_t),n);if(r&&!r.hasProgress){r.close();o.playSignal(Be.clear)}}});S.registerCommandAndKeybindingRule({id:Je,weight:200,when:j,primary:17,handler:(s,n)=>{const o=gt(s.get(_t),n);o?.expand()}});S.registerCommandAndKeybindingRule({id:ts,weight:200,when:At.or(j,it),primary:2048|1024|31,handler:s=>{const n=s.get(E).createInstance($t);const o=gt(s.get(_t))||e.notifications.at(0);if(!o){return}const r=o.actions?.primary?o.actions.primary.at(0):void 0;if(!r){return}n.run(r,o);o.close()}});S.registerCommandAndKeybindingRule({id:qe,weight:200,when:j,primary:15,handler:(s,n)=>{const o=gt(s.get(_t),n);o?.collapse()}});S.registerCommandAndKeybindingRule({id:Sr,weight:200,when:j,primary:10,secondary:[3],handler:s=>{const n=gt(s.get(_t));n?.toggle()}});mt.registerCommand(Ue,s=>{const n=s.get(Mt);for(const o of e.notifications){if(o.visible){n.publicLog2("notification:hide",Se(o.message.original,o.sourceId,o.priority===Z.SILENT))}}t.hide()});S.registerKeybindingRule({id:Ue,weight:200-50,when:it,primary:9});S.registerKeybindingRule({id:Ue,weight:200+100,when:At.and(it,j),primary:9});mt.registerCommand(Ji,()=>t.focus());S.registerCommandAndKeybindingRule({id:wr,weight:200,when:At.and(j,it),primary:18,handler:()=>{t.focusNext()}});S.registerCommandAndKeybindingRule({id:vr,weight:200,when:At.and(j,it),primary:16,handler:()=>{t.focusPrevious()}});S.registerCommandAndKeybindingRule({id:Cr,weight:200,when:At.and(j,it),primary:11,secondary:[14],handler:()=>{t.focusFirst()}});S.registerCommandAndKeybindingRule({id:yr,weight:200,when:At.and(j,it),primary:12,secondary:[13],handler:()=>{t.focusLast()}});mt.registerCommand(Ie,()=>d.clearAll());mt.registerCommand(Ee,s=>{const n=s.get(tt);n.setFilter(n.getFilter()===C.ERROR?C.OFF:C.ERROR)});mt.registerCommand(De,s=>{const n=s.get(tt);const o=s.get(cs);const r=n.getFilters().sort((u,m)=>u.label.localeCompare(m.label));const a=new I;const c=a.add(o.createQuickPick());c.items=r.map(u=>({id:u.id,label:u.label,tooltip:`${u.label} (${u.id})`,filter:u.filter}));c.canSelectMany=true;c.placeholder=f(3146,"Select sources to enable all notifications from");c.selectedItems=c.items.filter(u=>u.filter===C.OFF);c.show();a.add(c.onDidAccept(async()=>{for(const u of c.items){n.setFilter({id:u.id,label:u.label,filter:c.selectedItems.includes(u)?C.OFF:C.ERROR})}c.hide()}));a.add(c.onDidHide(()=>a.dispose()))});const i=q(3147,"Notifications");ht.appendMenuItem(x.CommandPalette,{command:{id:Qe,title:q(3148,"Show Notifications"),category:i}});ht.appendMenuItem(x.CommandPalette,{command:{id:Xt,title:q(3149,"Hide Notifications"),category:i},when:ge});ht.appendMenuItem(x.CommandPalette,{command:{id:Ie,title:q(3150,"Clear All Notifications"),category:i}});ht.appendMenuItem(x.CommandPalette,{command:{id:ts,title:q(3151,"Accept Notification Primary Action"),category:i}});ht.appendMenuItem(x.CommandPalette,{command:{id:Ee,title:q(3152,"Toggle Do Not Disturb Mode"),category:i}});ht.appendMenuItem(x.CommandPalette,{command:{id:De,title:q(3153,"Toggle Do Not Disturb Mode By Source..."),category:i}});ht.appendMenuItem(x.CommandPalette,{command:{id:Ji,title:q(3154,"Focus Notification Toast"),category:i},when:it})}let $t=class Jr extends Ai{constructor(t,e){super();this.telemetryService=t;this.notificationService=e}async runAction(t,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"});if(ue(e)){this.telemetryService.publicLog2("notification:actionExecuted",{id:Di(e.message.original.toString()).toString(),actionLabel:t.label,source:e.sourceId||"core",silent:e.priority===Z.SILENT})}try{await super.runAction(t,e)}catch(i){this.notificationService.error(i)}}};$t=v([l(0,Mt),l(1,tt)],$t);var Er=".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0}";St(Er,{});const Dr=It("notifications-clear",B.close,f(7348,"Icon for the clear action in notifications."));const Ar=It("notifications-clear-all",B.clearAll,f(7349,"Icon for the clear all action in notifications."));const _r=It("notifications-hide",B.chevronDown,f(7350,"Icon for the hide action in notifications."));const Tr=It("notifications-expand",B.chevronUp,f(7351,"Icon for the expand action in notifications."));const kr=It("notifications-collapse",B.chevronDown,f(7352,"Icon for the collapse action in notifications."));const Nr=It("notifications-configure",B.gear,f(7353,"Icon for the configure action in notifications."));const Ns=It("notifications-do-not-disturb",B.bellSlash,f(7354,"Icon for the mute all action in notifications."));let Ft=class ta extends G{static{this.ID=ti}static{this.LABEL=f(7355,"Clear Notification")}constructor(t,e,i){super(t,e,T.asClassName(Dr));this.commandService=i}async run(t){this.commandService.executeCommand(ti,t)}};Ft=v([l(2,rt)],Ft);let Gt=class ea extends G{static{this.ID=Ie}static{this.LABEL=f(7356,"Clear All Notifications")}constructor(t,e,i){super(t,e,T.asClassName(Ar));this.commandService=i}async run(){this.commandService.executeCommand(Ie)}};Gt=v([l(2,rt)],Gt);let Ae=class ia extends G{static{this.ID=Ee}static{this.LABEL=f(7357,"Toggle Do Not Disturb Mode")}constructor(t,e,i){super(t,e,T.asClassName(Ns));this.commandService=i}async run(){this.commandService.executeCommand(Ee)}};Ae=v([l(2,rt)],Ae);let _e=class sa extends G{static{this.ID=De}static{this.LABEL=f(7358,"Toggle Do Not Disturb Mode By Source...")}constructor(t,e,i){super(t,e);this.commandService=i}async run(){this.commandService.executeCommand(De)}};_e=v([l(2,rt)],_e);class ie extends G{static{this.ID="workbench.action.configureDoNotDisturbMode"}static{this.LABEL=f(7359,"Configure Do Not Disturb...")}constructor(t,e){super(t,e,T.asClassName(Ns))}}let Wt=class na extends G{static{this.ID=Xt}static{this.LABEL=f(7360,"Hide Notifications")}constructor(t,e,i){super(t,e,T.asClassName(_r));this.commandService=i}async run(){this.commandService.executeCommand(Xt)}};Wt=v([l(2,rt)],Wt);let Ut=class oa extends G{static{this.ID=Je}static{this.LABEL=f(7361,"Expand Notification")}constructor(t,e,i){super(t,e,T.asClassName(Tr));this.commandService=i}async run(t){this.commandService.executeCommand(Je,t)}};Ut=v([l(2,rt)],Ut);let jt=class ra extends G{static{this.ID=qe}static{this.LABEL=f(7362,"Collapse Notification")}constructor(t,e,i){super(t,e,T.asClassName(kr));this.commandService=i}async run(t){this.commandService.executeCommand(qe,t)}};jt=v([l(2,rt)],jt);class fe extends G{static{this.ID="workbench.action.configureNotification"}static{this.LABEL=f(7363,"More Actions...")}constructor(t,e,i){super(t,e,T.asClassName(Nr));this.notification=i}}let Kt=class aa extends G{static{this.ID="workbench.action.copyNotificationMessage"}static{this.LABEL=f(7364,"Copy Text")}constructor(t,e,i){super(t,e);this.clipboardService=i}run(t){return this.clipboardService.writeText(t.message.raw)}};Kt=v([l(2,zs)],Kt);var ei;var J;class dt{static{this.ROW_HEIGHT=42}static{this.LINE_HEIGHT=22}constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){const e=document.createElement("div");e.classList.add("notification-offset-helper");t.appendChild(e);return e}getHeight(t){if(!t.expanded){return dt.ROW_HEIGHT}let e=dt.ROW_HEIGHT;const i=this.computePreferredHeight(t);const s=dt.LINE_HEIGHT<i;if(s){const n=i-dt.LINE_HEIGHT;e+=n}if(t.source||pe(t.actions&&t.actions.primary)){e+=dt.ROW_HEIGHT}if(e===dt.ROW_HEIGHT){t.collapse(true)}return e}computePreferredHeight(t){let e=0;if(!t.hasProgress){e++}if(t.canCollapse){e++}if(pe(t.actions&&t.actions.secondary)){e++}this.offsetHelper.style.width=`${450-(10+30+e*30-Math.max(e-1,0)*4)}px`;const i=xs.render(t.message);this.offsetHelper.appendChild(i);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);vt(this.offsetHelper);return s}getTemplateId(t){if(t instanceof st){return Te.TEMPLATE_ID}throw new Error("unknown element type: "+t)}}class xs{static render(t,e){const i=document.createElement("span");for(const s of t.linkedText.nodes){if(typeof s==="string"){i.appendChild(document.createTextNode(s))}else{let n=s.title;if(!n&&s.href.startsWith("command:")){n=f(10776,"Click to execute command '{0}'",s.href.substr("command:".length))}else if(!n){n=s.href}const o=_("a",{href:s.href,title:n,tabIndex:0},s.label);if(e){const r=g=>{if(js(g)){nt.stop(g,true)}e.callback(s.href)};const a=e.toDispose.add(new He(o,z.CLICK)).event;const c=e.toDispose.add(new He(o,z.KEY_DOWN)).event;const u=X.chain(c,g=>g.filter(b=>{const D=new ls(b);return D.equals(10)||D.equals(3)}));e.toDispose.add(Ti.addTarget(o));const m=e.toDispose.add(new He(o,ki.Tap)).event;X.any(a,m,u)(r,null,e.toDispose)}i.appendChild(o)}}return i}}let Te=class ca{static{ei=this}static{this.TEMPLATE_ID="notification"}constructor(t,e,i,s){this.actionRunner=t;this.contextMenuService=e;this.instantiationService=i;this.notificationService=s}get templateId(){return ei.TEMPLATE_ID}renderTemplate(t){const e=Object.create(null);e.toDispose=new I;e.container=document.createElement("div");e.container.classList.add("notification-list-item");e.mainRow=document.createElement("div");e.mainRow.classList.add("notification-list-item-main-row");e.icon=document.createElement("div");e.icon.classList.add("notification-list-item-icon","codicon");e.message=document.createElement("div");e.message.classList.add("notification-list-item-message");const i=this;const s=document.createElement("div");s.classList.add("notification-list-item-toolbar-container");e.toolbar=new Ni(s,{ariaLabel:f(10777,"Notification Actions"),actionViewItemProvider:(n,o)=>{if(n instanceof fe){return e.toDispose.add(new hs(n,{getActions(){const r=[];const a={id:n.notification.sourceId,label:n.notification.source};if(rs(a)){const c=i.notificationService.getFilter(a)===C.ERROR;r.push(we({id:a.id,label:c?f(10778,"Turn On All Notifications from '{0}'",a.label):f(10779,"Turn Off Info and Warning Notifications from '{0}'",a.label),run:()=>i.notificationService.setFilter({...a,filter:c?C.OFF:C.ERROR})}));if(n.notification.actions?.secondary?.length){r.push(new Yt)}}if(Array.isArray(n.notification.actions?.secondary)){r.push(...n.notification.actions.secondary)}return r}},this.contextMenuService,{...o,actionRunner:this.actionRunner,classNames:n.class}))}return void 0},actionRunner:this.actionRunner});e.toDispose.add(e.toolbar);e.detailsRow=document.createElement("div");e.detailsRow.classList.add("notification-list-item-details-row");e.source=document.createElement("div");e.source.classList.add("notification-list-item-source");e.buttonsContainer=document.createElement("div");e.buttonsContainer.classList.add("notification-list-item-buttons-container");t.appendChild(e.container);e.container.appendChild(e.detailsRow);e.detailsRow.appendChild(e.source);e.detailsRow.appendChild(e.buttonsContainer);e.container.appendChild(e.mainRow);e.mainRow.appendChild(e.icon);e.mainRow.appendChild(e.message);e.mainRow.appendChild(s);e.progress=new Hs(t,Fs);e.toDispose.add(e.progress);e.renderer=this.instantiationService.createInstance(ii,e,this.actionRunner);e.toDispose.add(e.renderer);return e}renderElement(t,e,i){i.renderer.setInput(t)}disposeTemplate(t){Vt(t.toDispose)}};Te=ei=v([l(1,et),l(2,E),l(3,tt)],Te);let ii=class la extends P{static{J=this}static{this.SEVERITIES=[R.Info,R.Warning,R.Error]}constructor(t,e,i,s,n,o,r){super();this.template=t;this.actionRunner=e;this.openerService=i;this.instantiationService=s;this.keybindingService=n;this.contextMenuService=o;this.hoverService=r;this.inputDisposables=this._register(new I);if(!J.closeNotificationAction){J.closeNotificationAction=s.createInstance(Ft,Ft.ID,Ft.LABEL);J.expandNotificationAction=s.createInstance(Ut,Ut.ID,Ut.LABEL);J.collapseNotificationAction=s.createInstance(jt,jt.ID,jt.LABEL)}}setInput(t){this.inputDisposables.clear();this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded);this.inputDisposables.add(M(this.template.container,z.MOUSE_UP,n=>{if(n.button===1){nt.stop(n,true)}}));this.inputDisposables.add(M(this.template.container,z.AUXCLICK,n=>{if(!t.hasProgress&&n.button===1){nt.stop(n,true);t.close()}}));this.renderSeverity(t);const e=this.inputDisposables.add(this.hoverService.setupManagedHover(je("mouse"),this.template.message,""));const i=this.renderMessage(t,e);this.renderSecondaryActions(t,i);const s=this.inputDisposables.add(this.hoverService.setupManagedHover(je("mouse"),this.template.source,""));this.renderSource(t,s);this.renderButtons(t);this.renderProgress(t);this.inputDisposables.add(t.onDidChangeContent(n=>{switch(n.kind){case 0:this.renderSeverity(t);break;case 3:this.renderProgress(t);break;case 1:this.renderMessage(t,e);break}}))}renderSeverity(t){J.SEVERITIES.forEach(e=>{if(t.severity!==e){this.template.icon.classList.remove(...T.asClassNameArray(this.toSeverityIcon(e)))}});this.template.icon.classList.add(...T.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t,e){vt(this.template.message);this.template.message.appendChild(xs.render(t.message,{callback:s=>this.openerService.open(Pe.parse(s),{allowCommands:true}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;e.update(i?this.template.message.textContent+"":"");return i}renderSecondaryActions(t,e){const i=[];if(pe(t.actions?.secondary)){const n=this.instantiationService.createInstance(fe,fe.ID,fe.LABEL,t);i.push(n);this.inputDisposables.add(n)}let s=false;if(t.canCollapse){if(t.expanded){s=true}else if(t.source){s=true}else if(e){s=true}}if(s){i.push(t.expanded?J.collapseNotificationAction:J.expandNotificationAction)}if(!t.hasProgress){i.push(J.closeNotificationAction)}this.template.toolbar.clear();this.template.toolbar.context=t;i.forEach(n=>this.template.toolbar.push(n,{icon:true,label:false,keybinding:this.getKeybindingLabel(n)}))}renderSource(t,e){if(t.expanded&&t.source){this.template.source.textContent=f(10780,"Source: {0}",t.source);e.update(t.source)}else{this.template.source.textContent="";e.update("")}}renderButtons(t){vt(this.template.buttonsContainer);const e=t.actions?t.actions.primary:void 0;if(t.expanded&&pe(e)){const i=this;const s=new class extends Ai{async runAction(o){i.actionRunner.run(o,t);if(!(o instanceof ye)||!o.keepOpen){t.close()}}};const n=this.inputDisposables.add(new Gs(this.template.buttonsContainer));for(let o=0;o<e.length;o++){const r=e[o];const a={title:true,secondary:o>0,...Ws};const c=r instanceof ye?r.menu:void 0;const u=this.inputDisposables.add(c?n.addButtonWithDropdown({...a,contextMenuProvider:this.contextMenuService,actions:c,actionRunner:s}):n.addButton(a));u.label=r.label;this.inputDisposables.add(u.onDidClick(m=>{if(m){nt.stop(m,true)}s.run(r)}))}}}renderProgress(t){if(!t.hasProgress){this.template.progress.stop().hide();return}const e=t.progress.state;if(e.infinite){this.template.progress.infinite().show()}else if(typeof e.total==="number"||typeof e.worked==="number"){if(typeof e.total==="number"&&!this.template.progress.hasTotal()){this.template.progress.total(e.total)}if(typeof e.worked==="number"){this.template.progress.setWorked(e.worked).show()}}else{this.template.progress.done().hide()}}toSeverityIcon(t){switch(t){case R.Warning:return B.warning;case R.Error:return B.error}return B.info}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}};ii=J=v([l(2,Us),l(3,E),l(4,Et),l(5,et),l(6,xi)],ii);let ke=class ha extends P{constructor(t,e,i,s){super();this.container=t;this.options=e;this.instantiationService=i;this.contextMenuService=s;this.viewModel=[]}show(){if(this.isVisible){return}if(!this.list){this.createNotificationsList()}this.isVisible=true}createNotificationsList(){this.listContainer=document.createElement("div");this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance($t));const e=this.instantiationService.createInstance(Te,t);const i=this.listDelegate=new dt(this.listContainer);const s=this.options;const n=this.list=this._register(this.instantiationService.createInstance(_i,"NotificationsList",this.listContainer,i,[e],{...s,setRowLineHeight:false,horizontalScrolling:false,overrideStyles:{listBackground:ds},accessibilityProvider:this.instantiationService.createInstance(si,s)}));const o=this._register(this.instantiationService.createInstance(Kt,Kt.ID,Kt.LABEL));this._register(n.onContextMenu(a=>{if(!a.element){return}this.contextMenuService.showContextMenu({getAnchor:()=>a.anchor,getActions:()=>[o],getActionsContext:()=>a.element,actionRunner:t})}));this._register(n.onMouseDblClick(a=>a.element.toggle()));const r=this._register(Ks(n.getHTMLElement()));this._register(r.onDidBlur(()=>{if(O(this.listContainer).document.hasFocus()){n.setFocus([])}}));j.bindTo(n.contextKeyService);this._register(n.onDidChangeSelection(a=>{if(a.indexes.length>0){n.setSelection([])}}));this.container.appendChild(this.listContainer)}updateNotificationsList(t,e,i=[]){const[s,n]=Ht(this.list,this.listContainer);const o=yt(n);const r=s.getFocus()[0];const a=this.viewModel[r];let c=null;if(typeof r==="number"){c=s.getRelativeTop(r)}this.viewModel.splice(t,e,...i);s.splice(t,e,i);s.layout();if(this.viewModel.length===0){this.hide()}else if(typeof r==="number"){let u=0;if(a){let m=this.viewModel.indexOf(a);if(m===-1){m=r-1}if(m<this.viewModel.length&&m>=0){u=m}}if(typeof c==="number"){s.reveal(u,c)}s.setFocus([u])}if(this.isVisible&&o){s.domFocus()}}updateNotificationHeight(t){const e=this.viewModel.indexOf(t);if(e===-1){return}const[i,s]=Ht(this.list,this.listDelegate);i.updateElementHeight(e,s.getHeight(t));i.layout()}hide(){if(!this.isVisible||!this.list){return}this.isVisible=false;this.list.splice(0,this.viewModel.length);this.viewModel=[]}focusFirst(){if(!this.list){return}this.list.focusFirst();this.list.domFocus()}hasFocus(){if(!this.listContainer){return false}return yt(this.listContainer)}layout(t,e){if(this.listContainer&&this.list){this.listContainer.style.width=`${t}px`;if(typeof e==="number"){this.list.getHTMLElement().style.maxHeight=`${e}px`}this.list.layout()}}dispose(){this.hide();super.dispose()}};ke=v([l(2,E),l(3,et)],ke);let si=class da{constructor(t,e,i){this._options=t;this._keybindingService=e;this._configurationService=i}getAriaLabel(t){let e;const i=this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel();if(this._configurationService.getValue("accessibility.verbosity.notification")){e=i?f(7341,"Inspect the response in the accessible view with {0}",i):f(7342,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")}if(!t.source){return e?f(7343,"{0}, notification, {1}",t.message.raw,e):f(7344,"{0}, notification",t.message.raw)}return e?f(7345,"{0}, source: {1}, notification, {2}",t.message.raw,t.source,e):f(7346,"{0}, source: {1}, notification",t.message.raw,t.source)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??f(7347,"Notifications List")}getRole(){return"dialog"}};si=v([l(1,Et),l(2,Ct)],si);var kt;let ni=class ua extends us{static{kt=this}static{this.MAX_DIMENSIONS=new Bt(450,400)}static{this.MAX_NOTIFICATION_SOURCES=10}constructor(t,e,i,s,n,o,r,a,c,u,m){super(i);this.container=t;this.model=e;this.instantiationService=s;this.layoutService=n;this.contextKeyService=o;this.editorGroupService=r;this.keybindingService=a;this.notificationService=c;this.accessibilitySignalService=u;this.contextMenuService=m;this._onDidChangeVisibility=this._register(new w);this.onDidChangeVisibility=this._onDidChangeVisibility.event;this.notificationsCenterVisibleContextKey=ge.bindTo(this.contextKeyService);this.notificationsCenterVisibleContextKey=ge.bindTo(o);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)));this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(Bt.lift(t))));this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){if(this.notificationService.getFilter()===C.ERROR){this.hide()}}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const i=Y(this.notificationsList);i.show();i.focusFirst();return}if(!this.notificationsCenterContainer){this.create()}this.updateTitle();const[t,e]=Ht(this.notificationsList,this.notificationsCenterContainer);this._isVisible=true;e.classList.add("visible");t.show();this.layout(this.workbenchDimensions);t.updateNotificationsList(0,0,this.model.notifications);t.focusFirst();this.updateStyles();this.model.notifications.forEach(i=>i.updateVisibility(true));this.notificationsCenterVisibleContextKey.set(true);this._onDidChangeVisibility.fire()}updateTitle(){const[t,e]=Ht(this.notificationsCenterTitle,this.clearAllAction);if(this.model.notifications.length===0){t.textContent=f(3155,"No new notifications");e.enabled=false}else{t.textContent=f(3156,"Notifications");e.enabled=this.model.notifications.some(i=>!i.hasProgress)}}create(){this.notificationsCenterContainer=document.createElement("div");this.notificationsCenterContainer.classList.add("notifications-center");this.notificationsCenterHeader=document.createElement("div");this.notificationsCenterHeader.classList.add("notifications-center-header");this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader);this.notificationsCenterTitle=document.createElement("span");this.notificationsCenterTitle.classList.add("notifications-center-header-title");this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar");this.notificationsCenterHeader.appendChild(t);const e=this._register(this.instantiationService.createInstance($t));const i=this;const s=this._register(new Ni(t,{ariaLabel:f(3157,"Notification Center Actions"),actionRunner:e,actionViewItemProvider:(o,r)=>{if(o.id===ie.ID){return this._register(this.instantiationService.createInstance(hs,o,{getActions(){const a=[we({id:Ae.ID,label:i.notificationService.getFilter()===C.OFF?f(3158,"Enable Do Not Disturb Mode"):f(3159,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===C.OFF?C.ERROR:C.OFF)})];const c=i.notificationService.getFilters().sort((u,m)=>u.label.localeCompare(m.label));for(const u of c.slice(0,kt.MAX_NOTIFICATION_SOURCES)){if(a.length===1){a.push(new Yt)}a.push(we({id:`${Ae.ID}.${u.id}`,label:u.label,checked:u.filter!==C.ERROR,run:()=>i.notificationService.setFilter({...u,filter:u.filter===C.ERROR?C.OFF:C.ERROR})}))}if(c.length>kt.MAX_NOTIFICATION_SOURCES){a.push(new Yt);a.push(i._register(i.instantiationService.createInstance(_e,_e.ID,f(3160,"More…"))))}return a}},this.contextMenuService,{...r,actionRunner:e,classNames:o.class,keybindingProvider:a=>this.keybindingService.lookupKeybinding(a.id)}))}return void 0}}));this.clearAllAction=this._register(this.instantiationService.createInstance(Gt,Gt.ID,Gt.LABEL));s.push(this.clearAllAction,{icon:true,label:false,keybinding:this.getKeybindingLabel(this.clearAllAction)});this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(ie,ie.ID,ie.LABEL));s.push(this.configureDoNotDisturbAction,{icon:true,label:false});const n=this._register(this.instantiationService.createInstance(Wt,Wt.ID,Wt.LABEL));s.push(n,{icon:true,label:false,keybinding:this.getKeybindingLabel(n)});this.notificationsList=this.instantiationService.createInstance(ke,this.notificationsCenterContainer,{widgetAriaLabel:f(3161,"Notifications Center")});this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}onDidChangeNotification(t){if(!this._isVisible){return}let e=false;const[i,s]=Ht(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case 0:i.updateNotificationsList(t.index,0,[t.item]);t.item.updateVisibility(true);break;case 1:switch(t.detail){case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 1:if(t.item.expanded){i.updateNotificationHeight(t.item)}break}break;case 2:i.updateNotificationsList(t.index,1,[t.item]);break;case 3:e=yt(s);i.updateNotificationsList(t.index,1);t.item.updateVisibility(false);break}this.updateTitle();if(this.model.notifications.length===0){this.hide();if(e){this.editorGroupService.activeGroup.focus()}}}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList){return}const t=yt(this.notificationsCenterContainer);this._isVisible=false;this.notificationsCenterContainer.classList.remove("visible");this.notificationsList.hide();this.model.notifications.forEach(e=>e.updateVisibility(false));this.notificationsCenterVisibleContextKey.set(false);this._onDidChangeVisibility.fire();if(t){this.editorGroupService.activeGroup.focus()}}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(fs);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const e=this.getColor(Zs);this.notificationsCenterContainer.style.border=e?`1px solid ${e}`:"";const i=this.getColor(Ys);this.notificationsCenterHeader.style.color=i??"";const s=this.getColor(Xs);this.notificationsCenterHeader.style.background=s??""}}layout(t){this.workbenchDimensions=t;if(this._isVisible&&this.notificationsCenterContainer){const e=kt.MAX_DIMENSIONS.width;const i=kt.MAX_DIMENSIONS.height;let s=e;let n=i;if(this.workbenchDimensions){s=this.workbenchDimensions.width;s-=2*8;n=this.workbenchDimensions.height-35;if(this.layoutService.isVisible("workbench.parts.statusbar",p)){n-=22}if(this.layoutService.isVisible("workbench.parts.titlebar",p)){n-=22}n-=2*12}const o=Y(this.notificationsList);o.layout(Math.min(e,s),Math.min(i,n))}}clearAll(){this.hide();for(const t of[...this.model.notifications]){if(!t.hasProgress){t.close()}this.accessibilitySignalService.playSignal(Be.clear)}}};ni=kt=v([l(2,U),l(3,E),l(4,W),l(5,at),l(6,ut),l(7,Et),l(8,tt),l(9,Ve),l(10,et)],ni);class xr extends P{constructor(t){super();this.model=t;for(const e of t.notifications){this.triggerAriaAlert(e)}this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}onDidChangeNotification(t){if(t.kind===0){this.triggerAriaAlert(t.item);if(t.item.severity===R.Error){if(t.item.message.original instanceof Error){console.error(t.item.message.original)}else{console.error(Jt(t.item.message.linkedText.toString(),true))}}}}triggerAriaAlert(t){if(t.priority===Z.SILENT){return}const e=t.onDidChangeContent(i=>{if(i.kind===1){this.doTriggerAriaAlert(t)}});X.once(t.onDidClose)(()=>e.dispose());this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let e;if(t.severity===R.Error){e=f(3162,"Error: {0}",t.message.linkedText.toString())}else if(t.severity===R.Warning){e=f(3163,"Warning: {0}",t.message.linkedText.toString())}else{e=f(3164,"Info: {0}",t.message.linkedText.toString())}$s(e)}}let oi=class fa extends P{constructor(t,e,i){super();this.model=t;this.statusbarService=e;this.notificationService=i;this.newNotificationsCount=0;this.isNotificationsCenterVisible=false;this.isNotificationsToastsVisible=false;this.updateNotificationsCenterStatusItem();if(t.statusMessage){this.doSetStatusMessage(t.statusMessage)}this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)));this._register(this.model.onDidChangeStatusMessage(t=>this.onDidChangeStatusMessage(t)));this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(t){if(!this.isNotificationsCenterVisible){if(t.kind===0){this.newNotificationsCount++}else if(t.kind===3&&this.newNotificationsCount>0){this.newNotificationsCount--}}this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let t=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible){for(const i of this.model.notifications){if(i.hasProgress){t++}}}let e={name:f(3165,"Notifications"),text:`${t>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"}`,ariaLabel:f(3165,"Notifications"),command:this.isNotificationsCenterVisible?Xt:Qe,tooltip:this.getTooltip(t),showBeak:this.isNotificationsCenterVisible};if(this.notificationService.getFilter()===C.ERROR){e={...e,text:`${t>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"}`,ariaLabel:f(3166,"Do Not Disturb"),tooltip:f(3167,"Do Not Disturb Mode is Enabled")}}if(!this.notificationsCenterStatusItem){this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",1,-Number.MAX_VALUE)}else{this.notificationsCenterStatusItem.update(e)}}getTooltip(t){if(this.isNotificationsCenterVisible){return f(3168,"Hide Notifications")}if(this.model.notifications.length===0){return f(3169,"No Notifications")}if(t===0){if(this.newNotificationsCount===0){return f(3170,"No New Notifications")}if(this.newNotificationsCount===1){return f(3171,"1 New Notification")}return f(3172,"{0} New Notifications",this.newNotificationsCount)}if(this.newNotificationsCount===0){return f(3173,"No New Notifications ({0} in progress)",t)}if(this.newNotificationsCount===1){return f(3174,"1 New Notification ({0} in progress)",t)}return f(3175,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,t)}update(t,e){let i=false;if(this.isNotificationsCenterVisible!==t){this.isNotificationsCenterVisible=t;this.newNotificationsCount=0;i=true}if(this.isNotificationsToastsVisible!==e){this.isNotificationsToastsVisible=e;i=true}if(i){this.updateNotificationsCenterStatusItem()}}onDidChangeStatusMessage(t){const e=t.item;switch(t.kind){case 0:this.doSetStatusMessage(e);break;case 1:if(this.currentStatusMessage&&this.currentStatusMessage[0]===e){Vt(this.currentStatusMessage[1]);this.currentStatusMessage=void 0}break}}doSetStatusMessage(t){const e=t.message;const i=t.options&&typeof t.options.showAfter==="number"?t.options.showAfter:0;const s=t.options&&typeof t.options.hideAfter==="number"?t.options.hideAfter:-1;if(this.currentStatusMessage){Vt(this.currentStatusMessage[1])}let n;let o=setTimeout(()=>{n=this.statusbarService.addEntry({name:f(3176,"Status Message"),text:e,ariaLabel:e},"status.message",0,-Number.MAX_VALUE);o=null},i);let r;const a={dispose:()=>{if(o){clearTimeout(o)}if(r){clearTimeout(r)}n?.dispose()}};if(s>0){r=setTimeout(()=>a.dispose(),s)}this.currentStatusMessage=[t,a]}};oi=v([l(1,ct),l(2,tt)],oi);var Mr=".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list-row,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list:not(.element-focused):focus:before,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-scrollable-element,.monaco-workbench>.notifications-toasts .notifications-list-container{border-radius:4px}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";St(Mr,{});var bt;var Q;(function(d){d[d["HIDDEN_OR_VISIBLE"]=0]="HIDDEN_OR_VISIBLE";d[d["HIDDEN"]=1]="HIDDEN";d[d["VISIBLE"]=2]="VISIBLE"})(Q||(Q={}));let ri=class ma extends us{static{bt=this}static{this.MAX_WIDTH=450}static{this.MAX_NOTIFICATIONS=3}static{this.PURGE_TIMEOUT={[R.Info]:15e3,[R.Warning]:18e3,[R.Error]:2e4}}static{this.SPAM_PROTECTION={interval:800,limit:this.MAX_NOTIFICATIONS}}get isVisible(){return!!this._isVisible}constructor(t,e,i,s,n,o,r,a,c){super(n);this.container=t;this.model=e;this.instantiationService=i;this.layoutService=s;this.editorGroupService=o;this.contextKeyService=r;this.lifecycleService=a;this.hostService=c;this._onDidChangeVisibility=this._register(new w);this.onDidChangeVisibility=this._onDidChangeVisibility.event;this._isVisible=false;this.mapNotificationToToast=new Map;this.mapNotificationToDisposable=new Map;this.notificationsToastsVisibleContextKey=it.bindTo(this.contextKeyService);this.addedToastsIntervalCounter=new Qs(bt.SPAM_PROTECTION.interval);this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(Bt.lift(t))));this.lifecycleService.when(3).then(()=>{this.model.notifications.forEach(t=>this.addToast(t));this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))});this._register(this.model.onDidChangeFilter(({global:t,sources:e})=>{if(t===C.ERROR){this.hide()}else if(e){for(const[i]of this.mapNotificationToToast){if(typeof i.sourceId==="string"&&e.get(i.sourceId)===C.ERROR&&i.severity!==R.Error&&i.priority!==Z.URGENT){this.removeToast(i)}}}}))}onDidChangeNotification(t){switch(t.kind){case 0:return this.addToast(t.item);case 3:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible){return}if(t.priority===Z.SILENT){return}if(this.addedToastsIntervalCounter.increment()>bt.SPAM_PROTECTION.limit){return}const e=new I;this.mapNotificationToDisposable.set(t,e);e.add(qs(O(this.container),()=>this.doAddToast(t,e)))}doAddToast(t,e){let i=this.notificationsToastsContainer;if(!i){i=this.notificationsToastsContainer=document.createElement("div");i.classList.add("notifications-toasts");this.container.appendChild(i)}i.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const n=i.firstChild;if(n){i.insertBefore(s,n)}else{i.appendChild(s)}const o=document.createElement("div");o.classList.add("notification-toast");s.appendChild(o);const r=this.instantiationService.createInstance(ke,o,{verticalScrollMode:2,widgetAriaLabel:(()=>{if(!t.source){return f(3143,"{0}, notification",t.message.raw)}return f(3144,"{0}, source: {1}, notification",t.message.raw,t.source)})()});e.add(r);const a={item:t,list:r,container:s,toast:o};this.mapNotificationToToast.set(t,a);e.add(ot(()=>this.updateToastVisibility(a,false)));r.show();const c=this.computeMaxDimensions();this.layoutLists(c.width);r.updateNotificationsList(0,0,[t]);this.layoutContainer(c.height);e.add(t.onDidChangeExpansion(()=>{r.updateNotificationsList(0,1,[t])}));e.add(t.onDidChangeContent(u=>{switch(u.kind){case 2:r.updateNotificationsList(0,1,[t]);break;case 1:if(t.expanded){r.updateNotificationHeight(t)}break}}));X.once(t.onDidClose)(()=>{this.removeToast(t)});this.purgeNotification(t,s,r,e);this.updateStyles();this.notificationsToastsVisibleContextKey.set(true);o.classList.add("notification-fade-in");e.add(M(o,"transitionend",()=>{o.classList.remove("notification-fade-in");o.classList.add("notification-fade-in-done")}));t.updateVisibility(true);if(!this._isVisible){this._isVisible=true;this._onDidChangeVisibility.fire()}}purgeNotification(t,e,i,s){let n=false;s.add(M(e,z.MOUSE_OVER,()=>n=true));s.add(M(e,z.MOUSE_OUT,()=>n=false));let o;let r;const a=()=>{o=setTimeout(()=>{if(!this.hostService.hasFocus){if(!r){r=this.hostService.onDidChangeFocus(c=>{if(c){a()}});s.add(r)}}else if(t.sticky||i.hasFocus()||n){a()}else{this.removeToast(t)}},bt.PURGE_TIMEOUT[t.severity])};a();s.add(ot(()=>clearTimeout(o)))}removeToast(t){let e=false;const i=this.mapNotificationToToast.get(t);if(i){const n=yt(i.container);if(n){e=!(this.focusNext()||this.focusPrevious())}this.mapNotificationToToast.delete(t)}const s=this.mapNotificationToDisposable.get(t);if(s){Vt(s);this.mapNotificationToDisposable.delete(t)}if(this.mapNotificationToToast.size>0){this.layout(this.workbenchDimensions)}else{this.doHide();if(e){this.editorGroupService.activeGroup.focus()}}}removeToasts(){this.mapNotificationToToast.clear();this.mapNotificationToDisposable.forEach(t=>Vt(t));this.mapNotificationToDisposable.clear();this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove("visible");this.notificationsToastsVisibleContextKey.set(false);if(this._isVisible){this._isVisible=false;this._onDidChangeVisibility.fire()}}hide(){const t=this.notificationsToastsContainer?yt(this.notificationsToastsContainer):false;this.removeToasts();if(t){this.editorGroupService.activeGroup.focus()}}focus(){const t=this.getToasts(Q.VISIBLE);if(t.length>0){t[0].list.focusFirst();return true}return false}focusNext(){const t=this.getToasts(Q.VISIBLE);for(let e=0;e<t.length;e++){const i=t[e];if(i.list.hasFocus()){const s=t[e+1];if(s){s.list.focusFirst();return true}break}}return false}focusPrevious(){const t=this.getToasts(Q.VISIBLE);for(let e=0;e<t.length;e++){const i=t[e];if(i.list.hasFocus()){const s=t[e-1];if(s){s.list.focusFirst();return true}break}}return false}focusFirst(){const t=this.getToasts(Q.VISIBLE)[0];if(t){t.list.focusFirst();return true}return false}focusLast(){const t=this.getToasts(Q.VISIBLE);if(t.length>0){t[t.length-1].list.focusFirst();return true}return false}update(t){if(this.isNotificationsCenterVisible!==t){this.isNotificationsCenterVisible=t;if(this.isNotificationsCenterVisible){this.removeToasts()}}}updateStyles(){this.mapNotificationToToast.forEach(({toast:t})=>{const e=this.getColor(ds);t.style.background=e?e:"";const i=this.getColor(fs);t.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const s=this.getColor(Js);t.style.border=s?`1px solid ${s}`:""})}getToasts(t){const e=[];this.mapNotificationToToast.forEach(i=>{switch(t){case Q.HIDDEN_OR_VISIBLE:e.push(i);break;case Q.HIDDEN:if(!this.isToastInDOM(i)){e.push(i)}break;case Q.VISIBLE:if(this.isToastInDOM(i)){e.push(i)}break}});return e.reverse()}layout(t){this.workbenchDimensions=t;const e=this.computeMaxDimensions();if(e.height){this.layoutContainer(e.height)}this.layoutLists(e.width)}computeMaxDimensions(){const t=bt.MAX_WIDTH;let e=t;let i;if(this.workbenchDimensions){e=this.workbenchDimensions.width;e-=2*8;i=this.workbenchDimensions.height;if(this.layoutService.isVisible("workbench.parts.statusbar",p)){i-=22}if(this.layoutService.isVisible("workbench.parts.titlebar",p)){i-=22}i-=2*12}i=typeof i==="number"?Math.round(i*.618):0;return new Bt(Math.min(t,e),i)}layoutLists(t){this.mapNotificationToToast.forEach(({list:e})=>e.layout(t))}layoutContainer(t){let e=0;for(const i of this.getToasts(Q.HIDDEN_OR_VISIBLE)){i.container.style.opacity="0";this.updateToastVisibility(i,true);t-=i.container.offsetHeight;let s=false;if(e===bt.MAX_NOTIFICATIONS){s=false}else if(t>=0){s=true}this.updateToastVisibility(i,s);i.container.style.opacity="";if(s){e++}}}updateToastVisibility(t,e){if(this.isToastInDOM(t)===e){return}const i=Y(this.notificationsToastsContainer);if(e){i.appendChild(t.container)}else{t.container.remove()}t.item.updateVisibility(e)}isToastInDOM(t){return!!t.container.parentElement}};ri=bt=v([l(2,E),l(3,W),l(4,U),l(5,ut),l(6,at),l(7,ve),l(8,Pt)],ri);var y;(function(d){d["SIDEBAR_HIDDEN"]="nosidebar";d["MAIN_EDITOR_AREA_HIDDEN"]="nomaineditorarea";d["PANEL_HIDDEN"]="nopanel";d["AUXILIARYBAR_HIDDEN"]="noauxiliarybar";d["STATUSBAR_HIDDEN"]="nostatusbar";d["FULLSCREEN"]="fullscreen";d["MAXIMIZED"]="maximized";d["WINDOW_BORDER"]="border"})(y||(y={}));const Vr=["workbench.activityBar.location","window.commandCenter","workbench.editor.editorActionsLocation","workbench.layoutControl.enabled","window.menuBarVisibility","window.titleBarStyle","window.customTitleBarVisibility"];class Br extends P{get activeContainer(){return this.getContainerFromDocument(ms())}get containers(){const t=[];for(const{window:e}of tn()){t.push(this.getContainerFromDocument(e.document))}return t}getContainerFromDocument(t){if(t===this.mainContainer.ownerDocument){return this.mainContainer}else{return t.body.getElementsByClassName("monaco-workbench")[0]}}whenContainerStylesLoaded(t){return this.containerStylesLoaded.get(t.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(t){if(t===this.mainContainer){return this.mainContainerDimension}else{return Ke(t)}}get mainContainerOffset(){return this.computeContainerOffset(p)}get activeContainerOffset(){return this.computeContainerOffset(O(this.activeContainer))}computeContainerOffset(t){let e=0;let i=0;if(this.isVisible("workbench.parts.banner")){e=this.getPart("workbench.parts.banner").maximumHeight;i=e}const s=this.isVisible("workbench.parts.titlebar",t);if(s){e+=this.getPart("workbench.parts.titlebar").maximumHeight;i=e}const n=s&&this.configurationService.getValue("window.commandCenter")!==false;if(n){i=6}return{top:e,quickPickTop:i}}constructor(t){super();this.parent=t;this._onDidChangeZenMode=this._register(new w);this.onDidChangeZenMode=this._onDidChangeZenMode.event;this._onDidChangeMainEditorCenteredLayout=this._register(new w);this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event;this._onDidChangePanelAlignment=this._register(new w);this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event;this._onDidChangeWindowMaximized=this._register(new w);this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event;this._onDidChangePanelPosition=this._register(new w);this.onDidChangePanelPosition=this._onDidChangePanelPosition.event;this._onDidChangePartVisibility=this._register(new w);this.onDidChangePartVisibility=this._onDidChangePartVisibility.event;this._onDidChangeNotificationsVisibility=this._register(new w);this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event;this._onDidLayoutMainContainer=this._register(new w);this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event;this._onDidLayoutActiveContainer=this._register(new w);this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event;this._onDidLayoutContainer=this._register(new w);this.onDidLayoutContainer=this._onDidLayoutContainer.event;this._onDidAddContainer=this._register(new w);this.onDidAddContainer=this._onDidAddContainer.event;this._onDidChangeActiveContainer=this._register(new w);this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.mainContainer=document.createElement("div");this.containerStylesLoaded=new Map;this.parts=new Map;this.initialized=false;this.disposed=false;this._openedDefaultEditors=false;this.whenReadyPromise=new Hi;this.whenReady=this.whenReadyPromise.p;this.whenRestoredPromise=new Hi;this.whenRestored=this.whenRestoredPromise.p;this.restored=false}initLayout(t){this.environmentService=t.get(te);this.configurationService=t.get(Ct);this.hostService=t.get(Pt);this.contextService=t.get(Le);this.storageService=t.get($);this.workingCopyBackupService=t.get(en);this.themeService=t.get(U);this.extensionService=t.get(sn);this.logService=t.get(bs);this.telemetryService=t.get(Mt);this.auxiliaryWindowService=t.get(nn);this.editorService=t.get(Lt);this.mainPartEditorService=this.editorService.createScoped("main",this._store);this.editorGroupService=t.get(ut);this.paneCompositeService=t.get(on);this.viewDescriptorService=t.get(rn);this.titleService=t.get(Mi);this.notificationService=t.get(tt);this.statusBarService=t.get(ct);t.get(Dt);this.registerLayoutListeners();this.initLayoutState(t.get(ve),t.get(an))}registerLayoutListeners(){const t=()=>{if(!this.isVisible("workbench.parts.editor",p)){this.toggleMaximizedPanel()}};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(t));this._register(this.editorGroupService.mainPart.onDidActivateGroup(t));this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED))))});this._register(this.configurationService.onDidChangeConfiguration(i=>{if([...Vr,H.SIDEBAR_POSITION,H.STATUSBAR_VISIBLE].some(s=>i.affectsConfiguration(s))){const s=i.affectsConfiguration("workbench.editor.editorActionsLocation")&&this.configurationService.getValue("workbench.editor.editorActionsLocation")==="titleBar";let n=false;if(i.affectsConfiguration("workbench.activityBar.location")){const o=this.configurationService.getValue("workbench.activityBar.location");n=o==="top"||o==="bottom"}if(n||s){if(this.configurationService.getValue("window.customTitleBarVisibility")==="never"){this.configurationService.updateValue("window.customTitleBarVisibility","auto")}}this.doUpdateLayoutConfiguration()}}));this._register(cn(i=>this.onFullscreenChanged(i)));this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED))));this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED))));this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED))));this._register(M(this.mainContainer,z.SCROLL,()=>this.mainContainer.scrollTop=0));const e=(Ce||Vi||L)&&!pt(this.configurationService);if(e){this._register(this.titleService.onMenubarVisibilityChange(i=>this.onMenubarToggled(i)))}this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowsBorder()));this._register(this.hostService.onDidChangeFocus(i=>this.onWindowFocusChanged(i)));this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged()));if(L&&typeof navigator.windowControlsOverlay==="object"){this._register(M(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO()))}this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:i,disposables:s})=>{const n=i.window.vscodeWindowId;this.containerStylesLoaded.set(n,i.whenStylesHaveLoaded);i.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(n));s.add(ot(()=>this.containerStylesLoaded.delete(n)));const o=s.add(new I);this._onDidAddContainer.fire({container:i.container,disposables:o});s.add(i.onDidLayout(r=>this.handleContainerDidLayout(i.container,r)))}))}onMenubarToggled(t){if(t!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=t;const e=Ze(this.configurationService);if(L&&e==="toggle"){this.workbenchGrid.setViewVisible(this.titleBarPartView,ft(this.configurationService,p,this.state.runtime.menuBar.toggled))}else if(this.state.runtime.mainWindowFullscreen&&(e==="toggle"||e==="classic")){this.workbenchGrid.setViewVisible(this.titleBarPartView,ft(this.configurationService,p,this.state.runtime.menuBar.toggled))}this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(t,e){if(t===this.mainContainer){this._onDidLayoutMainContainer.fire(e)}if(gs(t)){this._onDidLayoutActiveContainer.fire(e)}this._onDidLayoutContainer.fire({container:t,dimension:e})}onFullscreenChanged(t){if(t!==p.vscodeWindowId){return}this.state.runtime.mainWindowFullscreen=Fi(p);if(this.state.runtime.mainWindowFullscreen){this.mainContainer.classList.add(y.FULLSCREEN)}else{this.mainContainer.classList.remove(y.FULLSCREEN);const e=this.stateModel.getRuntimeValue(h.ZEN_MODE_EXIT_INFO);if(e.transitionedToFullScreen&&this.isZenModeActive()){this.toggleZenMode()}}this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;{this.workbenchGrid.setViewVisible(this.titleBarPartView,ft(this.configurationService,p,this.state.runtime.menuBar.toggled));this.updateWindowsBorder(true)}}onActiveWindowChanged(){const t=this.getActiveContainerId();if(this.state.runtime.activeContainerId!==t){this.state.runtime.activeContainerId=t;this.updateWindowsBorder();this._onDidChangeActiveContainer.fire()}}onWindowFocusChanged(t){if(this.state.runtime.hasFocus!==t){this.state.runtime.hasFocus=t;this.updateWindowsBorder()}}getActiveContainerId(){const t=this.activeContainer;return O(t).vscodeWindowId}doUpdateLayoutConfiguration(t){this.updateCustomTitleBarVisibility();this.updateMenubarVisibility(!!t);this.editorGroupService.whenRestored.then(()=>{this.centerMainEditorLayout(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED),t)})}setSideBarPosition(t){const e=this.getPart("workbench.parts.activitybar");const i=this.getPart("workbench.parts.sidebar");const s=this.getPart("workbench.parts.auxiliarybar");const n=t===0?"left":"right";const o=t===1?"left":"right";const r=this.getPanelAlignment();const a=this.getPanelPosition();this.stateModel.setRuntimeValue(h.SIDEBAR_POSITON,t);const c=Y(e.getContainer());const u=Y(i.getContainer());const m=Y(s.getContainer());c.classList.remove(o);u.classList.remove(o);c.classList.add(n);u.classList.add(n);m.classList.remove(n);m.classList.add(o);e.updateStyles();i.updateStyles();s.updateStyles();this.adjustPartPositions(t,r,a)}updateWindowsBorder(t=false){if(L||Ce||ln(this.configurationService)||pt(this.configurationService)){return}const e=this.themeService.getColorTheme();const i=e.getColor(hn);const s=e.getColor(dn);const n=this.hasMainWindowBorder();for(const o of this.containers){const r=o===this.mainContainer;const a=this.activeContainer===o;const c=oe(O(o));let u=false;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(c)&&(i||s)){u=true;const m=a&&this.state.runtime.hasFocus?i:s??i;o.style.setProperty("--window-border-color",m?.toString()??"transparent")}if(r){this.state.runtime.mainWindowBorder=u}o.classList.toggle(y.WINDOW_BORDER,u)}if(!t&&n!==this.hasMainWindowBorder()){this.layout()}}initLayoutState(t,e){this.stateModel=new Zt(this.storageService,this.configurationService,this.contextService,this.parent);this.stateModel.load();if(this.stateModel.getRuntimeValue(h.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(h.EDITOR_HIDDEN)){this.stateModel.setRuntimeValue(h.EDITOR_HIDDEN,false)}this._register(this.stateModel.onDidChangeState(o=>{if(o.key===h.ACTIVITYBAR_HIDDEN){this.setActivityBarHidden(o.value)}if(o.key===h.STATUSBAR_HIDDEN){this.setStatusBarHidden(o.value)}if(o.key===h.SIDEBAR_POSITON){this.setSideBarPosition(o.value)}if(o.key===h.PANEL_POSITION){this.setPanelPosition(o.value)}if(o.key===h.PANEL_ALIGNMENT){this.setPanelAlignment(o.value)}this.doUpdateLayoutConfiguration()}));const i=this.getInitialEditorsState();if(i){this.logService.trace("Initial editor state",i)}const s={layout:{editors:i?.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,i),editorsToOpen:this.resolveEditorsToOpen(e,i)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}};const n={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:Fi(p),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:false,menuBar:{toggled:false},zenMode:{transitionDisposables:new un}};this.state={initialization:s,runtime:n};if(this.isVisible("workbench.parts.sidebar")){let o;if(!this.environmentService.isBuilt||t.startupKind===3||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI){o=this.storageService.get(fn.activeViewletSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(0)?.id)}else{o=this.viewDescriptorService.getDefaultViewContainer(0)?.id}if(o){this.state.initialization.views.containerToRestore.sideBar=o}else{this.stateModel.setRuntimeValue(h.SIDEBAR_HIDDEN,true)}}if(this.isVisible("workbench.parts.panel")){const o=this.storageService.get(mn.activePanelSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(1)?.id);if(o){this.state.initialization.views.containerToRestore.panel=o}else{this.stateModel.setRuntimeValue(h.PANEL_HIDDEN,true)}}if(this.isVisible("workbench.parts.auxiliarybar")){let o=this.storageService.get(bn.activePanelSettingsKey,1,this.viewDescriptorService.getDefaultViewContainer(2)?.id);if(o){if(o==="workbench.panel.chatSidebar"){o="workbench.panel.chat"}this.state.initialization.views.containerToRestore.auxiliaryBar=o}else{this.stateModel.setRuntimeValue(h.AUXILIARYBAR_HIDDEN,true)}}this.updateWindowsBorder(true)}getDefaultLayoutViews(t,e){const i=t.options?.defaultLayout;if(!i){return void 0}if(!i.force&&!e.isNew(1)){return void 0}const{views:s}=i;if(s?.length){return s.map(n=>n.id)}return void 0}shouldRestoreEditors(t,e){if(gn(t.getWorkspace())){return false}const i=this.configurationService.getValue("window.restoreWindows")==="preserve";return!!i||e===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(t,e){if(e){const i=re(await Fe(e.filesToMerge,t,this.logService));if(i.length===4&&ee(i[0])&&ee(i[1])&&ee(i[2])&&ee(i[3])){return[{editor:{input1:{resource:i[0].resource},input2:{resource:i[1].resource},base:{resource:i[2].resource},result:{resource:i[3].resource},options:{pinned:true}}}]}const s=re(await Fe(e.filesToDiff,t,this.logService));if(s.length===2){return[{editor:{original:{resource:s[0].resource},modified:{resource:s[1].resource},options:{pinned:true}}}]}const n=[];const o=await Fe(e.filesToOpenOrCreate,t,this.logService);for(let r=0;r<o.length;r++){const a=o[r];if(a){n.push({editor:a,viewColumn:e.filesToOpenOrCreate?.[r].viewColumn})}}return n}else if(this.contextService.getWorkbenchState()===1&&this.configurationService.getValue("workbench.startupEditor")==="newUntitledFile"){if(this.editorGroupService.hasRestorableState){return[]}const i=await this.workingCopyBackupService.hasBackups();if(i){return[]}return[{editor:{resource:void 0}}]}return[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){const t=this.environmentService.options?.defaultLayout;if((t?.editors?.length||t?.layout?.editors)&&(t.force||this.storageService.isNew(1))){this._openedDefaultEditors=true;return{layout:t.layout?.editors,filesToOpenOrCreate:t?.editors?.map(n=>{return{viewColumn:n.viewColumn,fileUri:Pe.revive(n.uri),openOnlyIfExists:n.openOnlyIfExists,options:n.options}})}}const{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}=this.environmentService;if(e||i||s){return{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}}return void 0}isRestored(){return this.restored}restoreParts(){const t=[];const e=[];t.push((async()=>{A("code/willRestoreEditors");await this.editorGroupService.whenReady;A("code/restoreEditors/editorGroupsReady");if(this.state.initialization.layout?.editors){this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors)}const o=await this.state.initialization.editor.editorsToOpen;A("code/restoreEditors/editorsToOpenResolved");let r=void 0;if(o.length){const a=this.editorGroupService.mainPart.getGroups(2);const c=new Map;for(const u of o){const m=a[(u.viewColumn??1)-1];let g=c.get(m.id);if(!g){g=new Set;c.set(m.id,g)}g.add(u.editor)}r=Promise.all(Array.from(c).map(async([u,m])=>{try{await this.editorService.openEditors(Array.from(m),u,{validateTrust:true})}catch(g){this.logService.error(g)}}))}e.push(Promise.all([r?.finally(()=>A("code/restoreEditors/editorsOpened")),this.editorGroupService.whenRestored.finally(()=>A("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{A("code/didRestoreEditors")}))})());const i=(async()=>{if(this.state.initialization.views.defaults?.length){A("code/willOpenDefaultViews");const o=[];const r=u=>{const m=this.viewDescriptorService.getViewLocationById(u.id);if(m!==null){const g=this.viewDescriptorService.getViewContainerByViewId(u.id);if(g){if(u.order>=(o?.[m]?.order??0)){o[m]={id:g.id,order:u.order}}const b=this.viewDescriptorService.getViewContainerModel(g);b.setCollapsed(u.id,false);b.setVisible(u.id,true);return true}}return false};const a=[...this.state.initialization.views.defaults].reverse().map((u,m)=>({id:u,order:m}));let c=a.length;while(c){c--;if(r(a[c])){a.splice(c,1)}}if(a.length){await this.extensionService.whenInstalledExtensionsRegistered();let u=a.length;while(u){u--;if(r(a[u])){a.splice(u,1)}}}if(o[0]){this.state.initialization.views.containerToRestore.sideBar=o[0].id}if(o[1]){this.state.initialization.views.containerToRestore.panel=o[1].id}if(o[2]){this.state.initialization.views.containerToRestore.auxiliaryBar=o[2].id}A("code/didOpenDefaultViews")}})();t.push(i);t.push((async()=>{await i;if(!this.state.initialization.views.containerToRestore.sideBar){return}A("code/willRestoreViewlet");const o=await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,0);if(!o){await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(0)?.id,0)}A("code/didRestoreViewlet")})());t.push((async()=>{await i;if(!this.state.initialization.views.containerToRestore.panel){return}A("code/willRestorePanel");const o=await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,1);if(!o){await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(1)?.id,1)}A("code/didRestorePanel")})());t.push((async()=>{await i;if(!this.state.initialization.views.containerToRestore.auxiliaryBar){return}A("code/willRestoreAuxiliaryBar");const o=await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,2);if(!o){await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(2)?.id,2)}A("code/didRestoreAuxiliaryBar")})());const s=this.isZenModeActive();const n=es(this.configurationService).restore;if(s){this.setZenModeActive(!n);this.toggleZenMode(false,true)}if(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED)){this.centerMainEditorLayout(true,true)}Gi.settled(t).finally(()=>{this.whenReadyPromise.complete();Gi.settled(e).finally(()=>{this.restored=true;this.whenRestoredPromise.complete()})})}registerPart(t){const e=t.getId();this.parts.set(e,t);return ot(()=>this.parts.delete(e))}getPart(t){const e=this.parts.get(t);if(!e){throw new Error(`Unknown part ${t}`)}return e}registerNotifications(t){this._register(t.onDidChangeNotificationsVisibility(e=>this._onDidChangeNotificationsVisibility.fire(e)))}hasFocus(t){const e=this.getContainer(ae(),t);if(!e){return false}const i=pn();if(!i){return false}return wn(i,e)}focusPart(t,e=p){const i=this.getContainer(e,t)??this.mainContainer;switch(t){case"workbench.parts.editor":this.editorGroupService.getPart(i).activeGroup.focus();break;case"workbench.parts.panel":{this.paneCompositeService.getActivePaneComposite(1)?.focus();break}case"workbench.parts.sidebar":{this.paneCompositeService.getActivePaneComposite(0)?.focus();break}case"workbench.parts.auxiliarybar":{this.paneCompositeService.getActivePaneComposite(2)?.focus();break}case"workbench.parts.activitybar":this.getPart("workbench.parts.sidebar").focusActivityBar();break;case"workbench.parts.statusbar":this.statusBarService.getPart(i).focus();break;default:{i?.focus()}}}getContainer(t,e){if(typeof e==="undefined"){return this.getContainerFromDocument(t.document)}if(t===p){return this.getPart(e).getContainer()}let i;if(e==="workbench.parts.editor"){i=this.editorGroupService.getPart(this.getContainerFromDocument(t.document))}else if(e==="workbench.parts.statusbar"){i=this.statusBarService.getPart(this.getContainerFromDocument(t.document))}else if(e==="workbench.parts.titlebar"){i=this.titleService.getPart(this.getContainerFromDocument(t.document))}if(i instanceof Re){return i.getContainer()}return void 0}isVisible(t,e=p){if(e!==p&&t==="workbench.parts.editor"){return true}if(this.initialized){switch(t){case"workbench.parts.titlebar":return this.workbenchGrid.isViewVisible(this.titleBarPartView);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(h.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(h.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(h.EDITOR_HIDDEN);case"workbench.parts.banner":return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return false}}switch(t){case"workbench.parts.titlebar":return ft(this.configurationService,p,this.state.runtime.menuBar.toggled);case"workbench.parts.sidebar":return!this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN);case"workbench.parts.panel":return!this.stateModel.getRuntimeValue(h.PANEL_HIDDEN);case"workbench.parts.auxiliarybar":return!this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN);case"workbench.parts.statusbar":return!this.stateModel.getRuntimeValue(h.STATUSBAR_HIDDEN);case"workbench.parts.activitybar":return!this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN);case"workbench.parts.editor":return!this.stateModel.getRuntimeValue(h.EDITOR_HIDDEN);default:return false}}shouldShowBannerFirst(){return L&&!Ye()}focus(){this.focusPart("workbench.parts.editor",O(this.activeContainer))}focusPanelOrEditor(){const t=this.paneCompositeService.getActivePaneComposite(1);if((this.hasFocus("workbench.parts.panel")||!this.isVisible("workbench.parts.editor"))&&t){t.focus()}else{this.focus()}}getMaximumEditorDimensions(t){const e=O(t);const i=this.getContainerDimension(t);if(t===this.mainContainer){const s=k(this.getPanelPosition());const n=(this.isVisible("workbench.parts.activitybar")?this.activityBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.sidebar")?this.sideBarPartView.minimumWidth:0)+(this.isVisible("workbench.parts.panel")&&!s?this.panelPartView.minimumWidth:0)+(this.isVisible("workbench.parts.auxiliarybar")?this.auxiliaryBarPartView.minimumWidth:0);const o=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.panel")&&s?this.panelPartView.minimumHeight:0);const r=i.width-n;const a=i.height-o;return{width:r,height:a}}else{const s=(this.isVisible("workbench.parts.titlebar",e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible("workbench.parts.statusbar",e)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-s}}}isZenModeActive(){return this.stateModel.getRuntimeValue(h.ZEN_MODE_ACTIVE)}setZenModeActive(t){this.stateModel.setRuntimeValue(h.ZEN_MODE_ACTIVE,t)}toggleZenMode(t,e=false){this.setZenModeActive(!this.isZenModeActive());this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const i=r=>{for(const a of this.mainPartEditorService.visibleTextEditorControls){if(!r&&En(a)&&a.hasModel()){const c=a.getModel();r=this.configurationService.getValue("editor.lineNumbers",{resource:c.uri,overrideIdentifier:c.getLanguageId()})}if(!r){r=this.configurationService.getValue("editor.lineNumbers")}a.updateOptions({lineNumbers:r})}};let s=false;const n=es(this.configurationService);const o=this.stateModel.getRuntimeValue(h.ZEN_MODE_EXIT_INFO);if(this.isZenModeActive()){s=!this.state.runtime.mainWindowFullscreen&&n.fullScreen&&!Wi;if(!e){o.transitionedToFullScreen=s;o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&n.centerLayout;o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===C.OFF;o.wasVisible.sideBar=this.isVisible("workbench.parts.sidebar");o.wasVisible.panel=this.isVisible("workbench.parts.panel");o.wasVisible.auxiliaryBar=this.isVisible("workbench.parts.auxiliarybar");this.stateModel.setRuntimeValue(h.ZEN_MODE_EXIT_INFO,o)}this.setPanelHidden(true,true);this.setAuxiliaryBarHidden(true,true);this.setSideBarHidden(true,true);if(n.hideActivityBar){this.setActivityBarHidden(true,true)}if(n.hideStatusBar){this.setStatusBarHidden(true,true)}if(n.hideLineNumbers){i("off");this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i("off")))}if(n.showTabs!==this.editorGroupService.partOptions.showTabs){this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:n.showTabs}))}if(n.silentNotifications&&o.handleNotificationsDoNotDisturbMode){this.notificationService.setFilter(C.ERROR)}if(n.centerLayout){this.centerMainEditorLayout(true,true)}this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(r=>{if(r.affectsConfiguration("zenMode.hideActivityBar")){const a=this.configurationService.getValue("zenMode.hideActivityBar");this.setActivityBarHidden(a,true)}if(r.affectsConfiguration("zenMode.hideStatusBar")){const a=this.configurationService.getValue("zenMode.hideStatusBar");this.setStatusBarHidden(a,true)}if(r.affectsConfiguration("zenMode.centerLayout")){const a=this.configurationService.getValue("zenMode.centerLayout");this.centerMainEditorLayout(a,true)}if(r.affectsConfiguration("zenMode.showTabs")){const a=this.configurationService.getValue("zenMode.showTabs")??"multiple";this.state.runtime.zenMode.transitionDisposables.set("zenMode.showTabs",this.editorGroupService.mainPart.enforcePartOptions({showTabs:a}))}if(r.affectsConfiguration("zenMode.silentNotifications")){const a=!!this.configurationService.getValue("zenMode.silentNotifications");if(o.handleNotificationsDoNotDisturbMode){this.notificationService.setFilter(a?C.ERROR:C.OFF)}}if(r.affectsConfiguration("zenMode.hideLineNumbers")){const a=this.configurationService.getValue("zenMode.hideLineNumbers")?"off":void 0;i(a);this.state.runtime.zenMode.transitionDisposables.set("zenMode.hideLineNumbers",this.mainPartEditorService.onDidVisibleEditorsChange(()=>i(a)))}}))}else{if(o.wasVisible.panel){this.setPanelHidden(false,true)}if(o.wasVisible.auxiliaryBar){this.setAuxiliaryBarHidden(false,true)}if(o.wasVisible.sideBar){this.setSideBarHidden(false,true)}if(!this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN,true)){this.setActivityBarHidden(false,true)}if(!this.stateModel.getRuntimeValue(h.STATUSBAR_HIDDEN,true)){this.setStatusBarHidden(false,true)}if(o.transitionedToCenteredEditorLayout){this.centerMainEditorLayout(false,true)}if(o.handleNotificationsDoNotDisturbMode){this.notificationService.setFilter(C.OFF)}i();this.focus();s=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen}if(!t){this.layout()}if(s){this.hostService.toggleFullScreen(p)}this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(t,e){this.stateModel.setRuntimeValue(h.STATUSBAR_HIDDEN,t);if(t){this.mainContainer.classList.add(y.STATUSBAR_HIDDEN)}else{this.mainContainer.classList.remove(y.STATUSBAR_HIDDEN)}this.workbenchGrid.setViewVisible(this.statusBarPartView,!t)}createWorkbenchLayout(){const t=this.getPart("workbench.parts.titlebar");const e=this.getPart("workbench.parts.banner");const i=this.getPart("workbench.parts.editor");const s=this.getPart("workbench.parts.activitybar");const n=this.getPart("workbench.parts.panel");const o=this.getPart("workbench.parts.auxiliarybar");const r=this.getPart("workbench.parts.sidebar");const a=this.getPart("workbench.parts.statusbar");this.titleBarPartView=t;this.bannerPartView=e;this.sideBarPartView=r;this.activityBarPartView=s;this.editorPartView=i;this.panelPartView=n;this.auxiliaryBarPartView=o;this.statusBarPartView=a;const c={["workbench.parts.activitybar"]:this.activityBarPartView,["workbench.parts.banner"]:this.bannerPartView,["workbench.parts.titlebar"]:this.titleBarPartView,["workbench.parts.editor"]:this.editorPartView,["workbench.parts.panel"]:this.panelPartView,["workbench.parts.sidebar"]:this.sideBarPartView,["workbench.parts.statusbar"]:this.statusBarPartView,["workbench.parts.auxiliarybar"]:this.auxiliaryBarPartView};const u=({type:g})=>c[g];const m=vn.deserialize(this.createGridDescriptor(),{fromJSON:u},{proportionalLayout:false});this.mainContainer.prepend(m.element);this.mainContainer.setAttribute("role","application");this.workbenchGrid=m;this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const g of[t,i,s,n,r,a,o,e]){this._register(g.onDidVisibilityChange(b=>{if(g===r){this.setSideBarHidden(!b,true)}else if(g===n){this.setPanelHidden(!b,true)}else if(g===o){this.setAuxiliaryBarHidden(!b,true)}else if(g===i){this.setEditorHidden(!b,true)}this._onDidChangePartVisibility.fire();this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}))}this._register(this.storageService.onWillSaveState(g=>{const b=this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(h.SIDEBAR_SIZE,b);const D=this.stateModel.getRuntimeValue(h.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):k(this.stateModel.getRuntimeValue(h.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(h.PANEL_SIZE,D);const V=this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(h.AUXILIARYBAR_SIZE,V);this.stateModel.save(true,true)}))}layout(){if(!this.disposed){this._mainContainerDimension=Ke(this.state.runtime.mainWindowFullscreen?p.document.body:this.parent);this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`);Cn(this.mainContainer,0,0,0,0,"relative");yn(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height);this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height);this.initialized=true;this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(t,e){this.stateModel.setRuntimeValue(h.MAIN_EDITOR_CENTERED,t);const i=this.mainPartEditorService.activeEditor;let s=false;if(i instanceof Sn){s=this.configurationService.getValue("diffEditor.renderSideBySide")}else if(i?.hasCapability(256)){s=true}const n=this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize");if(n&&(this.editorGroupService.mainPart.groups.length>1&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)){t=false}if(this.editorGroupService.mainPart.isLayoutCentered()!==t){this.editorGroupService.mainPart.centerLayout(t);if(!e){this.layout()}}this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(h.MAIN_EDITOR_CENTERED))}resizePart(t,e,i){const s=Math.sign(e)*Ui(ae(),Math.abs(e));const n=Math.sign(i)*Ui(ae(),Math.abs(i));let o;switch(t){case"workbench.parts.sidebar":o=this.workbenchGrid.getViewSize(this.sideBarPartView);this.workbenchGrid.resizeView(this.sideBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.panel":o=this.workbenchGrid.getViewSize(this.panelPartView);this.workbenchGrid.resizeView(this.panelPartView,{width:o.width+(k(this.getPanelPosition())?0:s),height:o.height+(k(this.getPanelPosition())?n:0)});break;case"workbench.parts.auxiliarybar":o=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:o.width+s,height:o.height});break;case"workbench.parts.editor":o=this.workbenchGrid.getViewSize(this.editorPartView);if(this.editorGroupService.mainPart.count===1){this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+s,height:o.height+n})}else{const r=this.editorGroupService.mainPart.activeGroup;const{width:a,height:c}=this.editorGroupService.mainPart.getSize(r);this.editorGroupService.mainPart.setSize(r,{width:a+s,height:c+n});const{width:u,height:m}=this.editorGroupService.mainPart.getSize(r);if(n&&c===m||s&&a===u){this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+(s&&a===u?s:0),height:o.height+(n&&c===m?n:0)})}}break;default:return}}setActivityBarHidden(t,e){this.stateModel.setRuntimeValue(h.ACTIVITYBAR_HIDDEN,t);this.workbenchGrid.setViewVisible(this.activityBarPartView,!t)}setBannerHidden(t){this.workbenchGrid.setViewVisible(this.bannerPartView,!t)}setEditorHidden(t,e){this.stateModel.setRuntimeValue(h.EDITOR_HIDDEN,t);if(t){this.mainContainer.classList.add(y.MAIN_EDITOR_AREA_HIDDEN)}else{this.mainContainer.classList.remove(y.MAIN_EDITOR_AREA_HIDDEN)}this.workbenchGrid.setViewVisible(this.editorPartView,!t);if(t&&!this.isVisible("workbench.parts.panel")){this.setPanelHidden(false,true)}}getLayoutClasses(){return re([!this.isVisible("workbench.parts.sidebar")?y.SIDEBAR_HIDDEN:void 0,!this.isVisible("workbench.parts.editor",p)?y.MAIN_EDITOR_AREA_HIDDEN:void 0,!this.isVisible("workbench.parts.panel")?y.PANEL_HIDDEN:void 0,!this.isVisible("workbench.parts.auxiliarybar")?y.AUXILIARYBAR_HIDDEN:void 0,!this.isVisible("workbench.parts.statusbar")?y.STATUSBAR_HIDDEN:void 0,this.state.runtime.mainWindowFullscreen?y.FULLSCREEN:void 0])}setSideBarHidden(t,e){this.stateModel.setRuntimeValue(h.SIDEBAR_HIDDEN,t);if(t){this.mainContainer.classList.add(y.SIDEBAR_HIDDEN)}else{this.mainContainer.classList.remove(y.SIDEBAR_HIDDEN)}if(t&&this.paneCompositeService.getActivePaneComposite(0)){this.paneCompositeService.hideActivePaneComposite(0);this.focusPanelOrEditor()}else if(!t&&!this.paneCompositeService.getActivePaneComposite(0)){const i=this.paneCompositeService.getLastActivePaneCompositeId(0);if(i){const s=this.paneCompositeService.openPaneComposite(i,0,true);if(!s){this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(0)?.id,0,true)}}}this.workbenchGrid.setViewVisible(this.sideBarPartView,!t)}hasViews(t){const e=this.viewDescriptorService.getViewContainerById(t);if(!e){return false}const i=this.viewDescriptorService.getViewContainerModel(e);if(!i){return false}return i.activeViewDescriptors.length>=1}adjustPartPositions(t,e,i){const s=!k(i);const n=s||!(e==="center"||t===0&&e==="right"||t===1&&e==="left");const o=s||!(e==="center"||t===1&&e==="right"||t===0&&e==="left");const r=!this.isVisible("workbench.parts.panel")?zt.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth):this.workbenchGrid.getViewSize(this.panelPartView).width;const a=!this.isVisible("workbench.parts.panel")?zt.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight):this.workbenchGrid.getViewSize(this.panelPartView).height;const c=!this.isVisible("workbench.parts.sidebar")?zt.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth):this.workbenchGrid.getViewSize(this.sideBarPartView).width;const u=!this.isVisible("workbench.parts.auxiliarybar")?zt.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;if(t===0){this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]);this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?2:3);if(o){this.workbenchGrid.moveView(this.auxiliaryBarPartView,u,this.editorPartView,3)}else{this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])}}else{this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]);this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?3:2);if(o){this.workbenchGrid.moveView(this.auxiliaryBarPartView,u,this.editorPartView,2)}else{this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])}}if(s){this.workbenchGrid.moveView(this.panelPartView,r,this.editorPartView,i===0?2:3);this.workbenchGrid.resizeView(this.panelPartView,{height:a,width:r})}if(this.isVisible("workbench.parts.sidebar")){this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c})}if(this.isVisible("workbench.parts.auxiliarybar")){this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:u})}}setPanelAlignment(t,e){if(!k(this.getPanelPosition())){this.setPanelPosition(2)}if(t!=="center"&&this.isPanelMaximized()){this.toggleMaximizedPanel()}this.stateModel.setRuntimeValue(h.PANEL_ALIGNMENT,t);this.adjustPartPositions(this.getSideBarPosition(),t,this.getPanelPosition());this._onDidChangePanelAlignment.fire(t)}setPanelHidden(t,e){if(!this.workbenchGrid){return}const i=!this.isVisible("workbench.parts.panel");this.stateModel.setRuntimeValue(h.PANEL_HIDDEN,t);const s=this.isPanelMaximized();const n=this.panelOpensMaximized();if(t){this.mainContainer.classList.add(y.PANEL_HIDDEN)}else{this.mainContainer.classList.remove(y.PANEL_HIDDEN)}let o=false;if(t&&this.paneCompositeService.getActivePaneComposite(1)){this.paneCompositeService.hideActivePaneComposite(1);o=Wi?false:true}else if(!t&&!this.paneCompositeService.getActivePaneComposite(1)){let r=this.paneCompositeService.getLastActivePaneCompositeId(1);if(!r||!this.hasViews(r)){r=this.viewDescriptorService.getViewContainersByLocation(1).find(a=>this.hasViews(a.id))?.id}if(r){const a=!e;this.paneCompositeService.openPaneComposite(r,1,a)}}if(t&&s){this.toggleMaximizedPanel()}if(i===t){return}this.workbenchGrid.setViewVisible(this.panelPartView,!t);if(!t){if(!e&&s!==n){this.toggleMaximizedPanel()}}else{this.stateModel.setRuntimeValue(h.PANEL_WAS_LAST_MAXIMIZED,s)}if(o){this.editorGroupService.mainPart.activeGroup.focus()}}toggleMaximizedPanel(){const t=this.workbenchGrid.getViewSize(this.panelPartView);const e=this.getPanelPosition();const i=this.isPanelMaximized();if(!i){if(this.isVisible("workbench.parts.panel")){if(k(e)){this.stateModel.setRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_HEIGHT,t.height)}else{this.stateModel.setRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_WIDTH,t.width)}}this.setEditorHidden(true)}else{this.setEditorHidden(false);this.workbenchGrid.resizeView(this.panelPartView,{width:k(e)?t.width:this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:k(e)?this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_HEIGHT):t.height})}this.stateModel.setRuntimeValue(h.PANEL_WAS_LAST_MAXIMIZED,!i)}panelOpensMaximized(){if(this.getPanelAlignment()!=="center"&&k(this.getPanelPosition())){return false}const t=In(this.configurationService.getValue(Qt.PANEL_OPENS_MAXIMIZED));const e=this.stateModel.getRuntimeValue(h.PANEL_WAS_LAST_MAXIMIZED);return t===0||t===2&&e}setAuxiliaryBarHidden(t,e){this.stateModel.setRuntimeValue(h.AUXILIARYBAR_HIDDEN,t);if(t){this.mainContainer.classList.add(y.AUXILIARYBAR_HIDDEN)}else{this.mainContainer.classList.remove(y.AUXILIARYBAR_HIDDEN)}if(t&&this.paneCompositeService.getActivePaneComposite(2)){this.paneCompositeService.hideActivePaneComposite(2);this.focusPanelOrEditor()}else if(!t&&!this.paneCompositeService.getActivePaneComposite(2)){let i=this.paneCompositeService.getLastActivePaneCompositeId(2);if(!i||!this.hasViews(i)){i=this.viewDescriptorService.getViewContainersByLocation(2).find(s=>this.hasViews(s.id))?.id}if(i){const s=!e;this.paneCompositeService.openPaneComposite(i,2,s)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!t)}setPartHidden(t,e,i=p){switch(e){case"workbench.parts.activitybar":return this.setActivityBarHidden(t);case"workbench.parts.sidebar":return this.setSideBarHidden(t);case"workbench.parts.editor":return this.setEditorHidden(t);case"workbench.parts.banner":return this.setBannerHidden(t);case"workbench.parts.auxiliarybar":return this.setAuxiliaryBarHidden(t);case"workbench.parts.panel":return this.setPanelHidden(t)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&K?"5px":void 0}isPanelMaximized(){return(this.getPanelAlignment()==="center"||!k(this.getPanelPosition()))&&!this.isVisible("workbench.parts.editor",p)}getSideBarPosition(){return this.stateModel.getRuntimeValue(h.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(h.PANEL_ALIGNMENT)}updateMenubarVisibility(t){const e=ft(this.configurationService,p,this.state.runtime.menuBar.toggled);if(!t&&this.workbenchGrid&&e!==this.isVisible("workbench.parts.titlebar",p)){this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}}updateCustomTitleBarVisibility(){const t=ft(this.configurationService,p,this.state.runtime.menuBar.toggled);const e=this.isVisible("workbench.parts.titlebar");if(t!==e){this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}}toggleMenuBar(){let t=Ze(this.configurationService);if(typeof t!=="string"){t="classic"}let e;if(t==="visible"||t==="classic"){e=pt(this.configurationService)?"toggle":"compact"}else{e="classic"}this.configurationService.updateValue("window.menuBarVisibility",e)}getPanelPosition(){return this.stateModel.getRuntimeValue(h.PANEL_POSITION)}setPanelPosition(t){if(!this.isVisible("workbench.parts.panel")){this.setPanelHidden(false)}const e=this.getPart("workbench.parts.panel");const i=Nt(this.getPanelPosition());const s=Nt(t);const n=Y(e.getContainer());n.classList.remove(i);n.classList.add(s);e.updateStyles();const o=this.workbenchGrid.getViewSize(this.panelPartView);const r=this.workbenchGrid.getViewSize(this.sideBarPartView);const a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible("workbench.parts.editor",p);if(s!==i&&!c){if(k(t)){this.stateModel.setRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width)}else if(k(ne(i))){this.stateModel.setRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)}}if(k(t)&&this.getPanelAlignment()!=="center"&&c){this.toggleMaximizedPanel();c=false}this.stateModel.setRuntimeValue(h.PANEL_POSITION,t);const u=this.isVisible("workbench.parts.sidebar");const m=this.isVisible("workbench.parts.auxiliarybar");if(t===2){this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,1)}else if(t===3){this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,0)}else if(t===1){this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,3)}else{this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(h.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,2)}this.workbenchGrid.resizeView(this.sideBarPartView,r);if(!u){this.setSideBarHidden(true)}this.workbenchGrid.resizeView(this.auxiliaryBarPartView,a);if(!m){this.setAuxiliaryBarHidden(true)}if(k(t)){this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),t)}this._onDidChangePanelPosition.fire(s)}isWindowMaximized(t){return this.state.runtime.maximized.has(oe(t))}updateWindowMaximizedState(t,e){this.mainContainer.classList.toggle(y.MAXIMIZED,e);const i=oe(t);if(e===this.state.runtime.maximized.has(i)){return}if(e){this.state.runtime.maximized.add(i)}else{this.state.runtime.maximized.delete(i)}this.updateWindowsBorder();this._onDidChangeWindowMaximized.fire({windowId:i,maximized:e})}getVisibleNeighborPart(t,e){if(!this.workbenchGrid){return void 0}if(!this.isVisible(t,p)){return void 0}const i=this.workbenchGrid.getNeighborViews(this.getPart(t),e,false);if(!i){return void 0}for(const s of i){const n=["workbench.parts.activitybar","workbench.parts.editor","workbench.parts.panel","workbench.parts.auxiliarybar","workbench.parts.sidebar","workbench.parts.statusbar","workbench.parts.titlebar"].find(o=>this.getPart(o)===s&&this.isVisible(o,p));if(n!==void 0){return n}}return void 0}onDidChangeWCO(){const t=this.workbenchGrid.getNeighborViews(this.titleBarPartView,0,false).length>0;const e=this.shouldShowBannerFirst();if(t!==e){this.workbenchGrid.moveView(this.bannerPartView,zt.Distribute,this.titleBarPartView,e?0:1)}this.workbenchGrid.setViewVisible(this.titleBarPartView,ft(this.configurationService,p,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(t,e,i){if(!t.sideBar&&!t.auxiliaryBar){t.editor.size=e;return t.editor}const s=[t.editor];t.editor.size=i;if(t.sideBar){if(this.stateModel.getRuntimeValue(h.SIDEBAR_POSITON)===0){s.splice(0,0,t.sideBar)}else{s.push(t.sideBar)}t.editor.size-=this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN)?0:t.sideBar.size}if(t.auxiliaryBar){if(this.stateModel.getRuntimeValue(h.SIDEBAR_POSITON)===1){s.splice(0,0,t.auxiliaryBar)}else{s.push(t.auxiliaryBar)}t.editor.size-=this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size}return{type:"branch",data:s,size:e}}arrangeMiddleSectionNodes(t,e,i){const s=this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN)?0:t.activityBar.size;const n=this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN)?0:t.sideBar.size;const o=this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size;const r=this.stateModel.getInitializationValue(h.PANEL_SIZE)?0:t.panel.size;const a=this.stateModel.getRuntimeValue(h.PANEL_POSITION);const c=this.stateModel.getRuntimeValue(h.SIDEBAR_POSITON);const u=[];if(!k(a)){u.push(t.editor);t.editor.size=e-s-n-r-o;if(a===1){u.push(t.panel)}else{u.splice(0,0,t.panel)}if(c===0){u.push(t.auxiliaryBar);u.splice(0,0,t.sideBar);u.splice(0,0,t.activityBar)}else{u.splice(0,0,t.auxiliaryBar);u.push(t.sideBar);u.push(t.activityBar)}}else{const m=this.stateModel.getRuntimeValue(h.PANEL_ALIGNMENT);const g=!(m==="center"||c===0&&m==="right"||c===1&&m==="left");const b=!(m==="center"||c===1&&m==="right"||c===0&&m==="left");const D=e-s-(g?0:n)-(b?0:o);const V=this.arrangeEditorNodes({editor:t.editor,sideBar:g?t.sideBar:void 0,auxiliaryBar:b?t.auxiliaryBar:void 0},i-r,D);u.push({type:"branch",data:a===2?[V,t.panel]:[t.panel,V],size:D});if(!g){if(c===0){u.splice(0,0,t.sideBar)}else{u.push(t.sideBar)}}if(!b){if(c===1){u.splice(0,0,t.auxiliaryBar)}else{u.push(t.auxiliaryBar)}}if(c===0){u.splice(0,0,t.activityBar)}else{u.push(t.activityBar)}}return u}createGridDescriptor(){const{width:t,height:e}=this.stateModel.getInitializationValue(h.GRID_SIZE);const i=this.stateModel.getInitializationValue(h.SIDEBAR_SIZE);const s=this.stateModel.getInitializationValue(h.AUXILIARYBAR_SIZE);const n=this.stateModel.getInitializationValue(h.PANEL_SIZE);const o=this.titleBarPartView.minimumHeight;const r=this.bannerPartView.minimumHeight;const a=this.statusBarPartView.minimumHeight;const c=this.activityBarPartView.minimumWidth;const u=e-o-a;const m=[{type:"leaf",data:{type:"workbench.parts.titlebar"},size:o,visible:this.isVisible("workbench.parts.titlebar",p)},{type:"leaf",data:{type:"workbench.parts.banner"},size:r,visible:false}];const g={type:"leaf",data:{type:"workbench.parts.activitybar"},size:c,visible:!this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN)};const b={type:"leaf",data:{type:"workbench.parts.sidebar"},size:i,visible:!this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN)};const D={type:"leaf",data:{type:"workbench.parts.auxiliarybar"},size:s,visible:this.isVisible("workbench.parts.auxiliarybar")};const V={type:"leaf",data:{type:"workbench.parts.editor"},size:0,visible:!this.stateModel.getRuntimeValue(h.EDITOR_HIDDEN)};const lt={type:"leaf",data:{type:"workbench.parts.panel"},size:n,visible:!this.stateModel.getRuntimeValue(h.PANEL_HIDDEN)};const Ot=this.arrangeMiddleSectionNodes({activityBar:g,auxiliaryBar:D,editor:V,panel:lt,sideBar:b},t,u);const ze={root:{type:"branch",size:t,data:[...this.shouldShowBannerFirst()?m.reverse():m,{type:"branch",data:Ot,size:u},{type:"leaf",data:{type:"workbench.parts.statusbar"},size:a,visible:!this.stateModel.getRuntimeValue(h.STATUSBAR_HIDDEN)}]},orientation:0,width:t,height:e};const Vs={activityBarVisible:!this.stateModel.getRuntimeValue(h.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(h.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(h.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(h.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(h.STATUSBAR_HIDDEN),sideBarPosition:Nt(this.stateModel.getRuntimeValue(h.SIDEBAR_POSITON)),panelPosition:Nt(this.stateModel.getRuntimeValue(h.PANEL_POSITION))};this.telemetryService.publicLog2("startupLayout",Vs);return ze}dispose(){super.dispose();this.disposed=true}}function es(d){return d.getValue(Qt.ZEN_MODE_CONFIG)}class Ms{constructor(t,e,i,s){this.name=t;this.scope=e;this.target=i;this.defaultValue=s}}class N extends Ms{constructor(t,e,i,s,n){super(t,e,i,s);this.zenModeIgnore=n;this.runtime=true}}class se extends Ms{constructor(){super(...arguments);this.runtime=false}}const h={MAIN_EDITOR_CENTERED:new N("editor.centered",1,1,false),ZEN_MODE_ACTIVE:new N("zenMode.active",1,1,false),ZEN_MODE_EXIT_INFO:new N("zenMode.exitInfo",1,1,{transitionedToCenteredEditorLayout:false,transitionedToFullScreen:false,handleNotificationsDoNotDisturbMode:false,wasVisible:{auxiliaryBar:false,panel:false,sideBar:false}}),GRID_SIZE:new se("grid.size",0,1,{width:800,height:600}),SIDEBAR_SIZE:new se("sideBar.size",0,1,200),AUXILIARYBAR_SIZE:new se("auxiliaryBar.size",0,1,200),PANEL_SIZE:new se("panel.size",0,1,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new N("panel.lastNonMaximizedHeight",0,1,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new N("panel.lastNonMaximizedWidth",0,1,300),PANEL_WAS_LAST_MAXIMIZED:new N("panel.wasLastMaximized",1,1,false),SIDEBAR_POSITON:new N("sideBar.position",1,1,0),PANEL_POSITION:new N("panel.position",1,1,2),PANEL_ALIGNMENT:new N("panel.alignment",0,0,"center"),ACTIVITYBAR_HIDDEN:new N("activityBar.hidden",1,1,false,true),SIDEBAR_HIDDEN:new N("sideBar.hidden",1,1,false),EDITOR_HIDDEN:new N("editor.hidden",1,1,false),PANEL_HIDDEN:new N("panel.hidden",1,1,true),AUXILIARYBAR_HIDDEN:new N("auxiliaryBar.hidden",1,1,true),STATUSBAR_HIDDEN:new N("statusBar.hidden",1,1,false,true)};var Qt;(function(d){d["PANEL_POSITION"]="workbench.panel.defaultLocation";d["PANEL_OPENS_MAXIMIZED"]="workbench.panel.opensMaximized";d["ZEN_MODE_CONFIG"]="zenMode";d["EDITOR_CENTERED_LAYOUT_AUTO_RESIZE"]="workbench.editor.centeredLayoutAutoResize"})(Qt||(Qt={}));var H;(function(d){d["STATUSBAR_VISIBLE"]="workbench.statusBar.visible";d["SIDEBAR_POSITION"]="workbench.sideBar.location"})(H||(H={}));class Zt extends P{static{this.STORAGE_PREFIX="workbench."}constructor(t,e,i,s){super();this.storageService=t;this.configurationService=e;this.contextService=i;this.container=s;this._onDidChangeState=this._register(new w);this.onDidChangeState=this._onDidChangeState.event;this.stateCache=new Map;this._register(this.configurationService.onDidChangeConfiguration(n=>this.updateStateFromLegacySettings(n)))}updateStateFromLegacySettings(t){if(t.affectsConfiguration("workbench.activityBar.location")){this.setRuntimeValueAndFire(h.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden())}if(t.affectsConfiguration(H.STATUSBAR_VISIBLE)){this.setRuntimeValueAndFire(h.STATUSBAR_HIDDEN,!this.configurationService.getValue(H.STATUSBAR_VISIBLE))}if(t.affectsConfiguration(H.SIDEBAR_POSITION)){this.setRuntimeValueAndFire(h.SIDEBAR_POSITON,ne(this.configurationService.getValue(H.SIDEBAR_POSITION)??"left"))}}updateLegacySettingsFromState(t,e){const i=this.getRuntimeValue(h.ZEN_MODE_ACTIVE);if(t.zenModeIgnore&&i){return}if(t===h.ACTIVITYBAR_HIDDEN){this.configurationService.updateValue("workbench.activityBar.location",e?"hidden":void 0)}else if(t===h.STATUSBAR_HIDDEN){this.configurationService.updateValue(H.STATUSBAR_VISIBLE,!e)}else if(t===h.SIDEBAR_POSITON){this.configurationService.updateValue(H.SIDEBAR_POSITION,Nt(e))}}load(){let t;for(t in h){const i=h[t];const s=this.loadKeyFromStorage(i);if(s!==void 0){this.stateCache.set(i.name,s)}}this.stateCache.set(h.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden());this.stateCache.set(h.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(H.STATUSBAR_VISIBLE));this.stateCache.set(h.SIDEBAR_POSITON.name,ne(this.configurationService.getValue(H.SIDEBAR_POSITION)??"left"));const e=Ke(this.container);h.PANEL_POSITION.defaultValue=ne(this.configurationService.getValue(Qt.PANEL_POSITION)??"bottom");h.GRID_SIZE.defaultValue={height:e.height,width:e.width};h.SIDEBAR_SIZE.defaultValue=Math.min(300,e.width/4);h.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,e.width/4);h.PANEL_SIZE.defaultValue=this.stateCache.get(h.PANEL_POSITION.name)??k(h.PANEL_POSITION.defaultValue)?e.height/3:e.width/4;h.SIDEBAR_HIDDEN.defaultValue=this.contextService.getWorkbenchState()===1;for(t in h){const i=h[t];if(this.stateCache.get(i.name)===void 0){this.stateCache.set(i.name,i.defaultValue)}}this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new I))(i=>{let s;for(s in h){const n=h[s];if(n instanceof N&&n.scope===0&&n.target===0){if(`${Zt.STORAGE_PREFIX}${n.name}`===i.key){const o=this.loadKeyFromStorage(n)??n.defaultValue;if(this.stateCache.get(n.name)!==o){this.stateCache.set(n.name,o);this._onDidChangeState.fire({key:n,value:o})}}}}}))}save(t,e){let i;const s=this.getRuntimeValue(h.ZEN_MODE_ACTIVE);for(i in h){const n=h[i];if(t&&n.scope===1||e&&n.scope===0){if(s&&n instanceof N&&n.zenModeIgnore){continue}this.saveKeyToStorage(n)}}}getInitializationValue(t){return this.stateCache.get(t.name)}setInitializationValue(t,e){this.stateCache.set(t.name,e)}getRuntimeValue(t,e){if(e){switch(t){case h.ACTIVITYBAR_HIDDEN:this.stateCache.set(t.name,this.isActivityBarHidden());break;case h.STATUSBAR_HIDDEN:this.stateCache.set(t.name,!this.configurationService.getValue(H.STATUSBAR_VISIBLE));break;case h.SIDEBAR_POSITON:this.stateCache.set(t.name,this.configurationService.getValue(H.SIDEBAR_POSITION)??"left");break}}return this.stateCache.get(t.name)}setRuntimeValue(t,e){this.stateCache.set(t.name,e);const i=this.getRuntimeValue(h.ZEN_MODE_ACTIVE);if(t.scope===0){if(!i||!t.zenModeIgnore){this.saveKeyToStorage(t);this.updateLegacySettingsFromState(t,e)}}}isActivityBarHidden(){const t=this.configurationService.getValue("workbench.activityBar.visible");if(t!==void 0){return!t}return this.configurationService.getValue("workbench.activityBar.location")!=="default"}setRuntimeValueAndFire(t,e){const i=this.stateCache.get(t.name);if(i===e){return}this.setRuntimeValue(t,e);this._onDidChangeState.fire({key:t,value:e})}saveKeyToStorage(t){const e=this.stateCache.get(t.name);this.storageService.store(`${Zt.STORAGE_PREFIX}${t.name}`,typeof e==="object"?JSON.stringify(e):e,t.scope,t.target)}loadKeyFromStorage(t){let e=this.storageService.get(`${Zt.STORAGE_PREFIX}${t.name}`,t.scope);if(e!==void 0){switch(typeof t.defaultValue){case"boolean":e=e==="true";break;case"number":e=parseInt(e);break;case"object":e=JSON.parse(e);break}}return e}}const Pr=5e3;let ai=class ba extends P{constructor(t,e,i){super();this._accessibilitySignalService=i;this._scheduler=new ps(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(Be.progress,e??Pr)},t);this._scheduler.schedule()}dispose(){super.dispose();this._signalLoop?.dispose();this._scheduler.dispose()}};ai=v([l(2,Ve)],ai);class Lr{constructor(){this.priority=90;this.name="notifications";this.when=j;this.type="view"}getProvider(t){const e=t.get(Dn);const i=t.get(_t);const s=t.get(rt);const n=t.get(Ve);function o(){const r=gt(i);if(!r){return}s.executeCommand("notifications.showList");let a;const c=i.lastFocusedList;if(c instanceof _i){a=c.indexOf(r)}if(a===void 0){return}function u(){s.executeCommand("notifications.showList");if(c&&a!==void 0){c.domFocus();try{c.setFocus([a])}catch{}}}function m(){const b=gt(i);const D=b?.message.original.toString();if(!b){return}return b.source?f(8878,"{0} Source: {1}",D,b.source):f(8879,"{0}",D)}const g=m();if(!g){return}r.onDidClose(()=>e.next());return new An("notification",{type:"view"},()=>g,()=>u(),"accessibility.verbosity.notification",void 0,Rr(r,n),()=>{if(!c){return}u();c.focusNext();return m()},()=>{if(!c){return}u();c.focusPrevious();return m()})}return o()}}function Rr(d,t){let e=void 0;if(d.actions){e=[];if(d.actions.primary){e.push(...d.actions.primary)}if(d.actions.secondary){e.push(...d.actions.secondary)}}if(e){for(const s of e){s.class=T.asClassName(B.bell);const n=s.run;s.run=()=>{n();d.close()}}}const i=e?.find(s=>s.label.includes("Manage Extension"));if(i){i.class=T.asClassName(B.gear)}if(e){e.push({id:"clearNotification",label:f(8880,"Clear Notification"),tooltip:f(8880,"Clear Notification"),run:()=>{d.close();t.playSignal(Be.clear)},enabled:true,class:T.asClassName(B.clearAll)})}return e}class Or extends Br{constructor(t,e,i,s){super(t);this.options=e;this.serviceCollection=i;this._onWillShutdown=this._register(new w);this.onWillShutdown=this._onWillShutdown.event;this._onDidShutdown=this._register(new w);this.onDidShutdown=this._onDidShutdown.event;this.previousUnexpectedError={message:void 0,time:0};A("code/willStartWorkbench");this.registerErrorHandler(s)}registerErrorHandler(t){p.addEventListener("unhandledrejection",e=>{ce(e.reason);e.preventDefault()});ws(e=>this.handleUnexpectedError(e,t))}handleUnexpectedError(t,e){const i=Jt(t,true);if(!i){return}const s=Date.now();if(i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3){return}this.previousUnexpectedError.time=s;this.previousUnexpectedError.message=i;e.error(i)}startup(){try{this._register(_n(175));const t=this.initServices(this.serviceCollection);t.invokeFunction(e=>{const i=e.get(ve);const s=e.get($);const n=e.get(Ct);const o=e.get(Pt);const r=e.get(Tn);const a=e.get(tt);this.initLayout(e);this.registerListeners(i,s,n,o,r);this.renderWorkbench(t,a,s,n);this.createWorkbenchLayout();this.layout();this.restore(i)});return t}catch(t){ce(t);throw t}}initServices(t){t.set(W,this);const e=Fn();for(const[s,n]of e){t.set(s,n)}const i=new kn(t,true);i.invokeFunction(s=>{const n=s.get(ve);const o=s.get(Ct);if(typeof o.acquireInstantiationService==="function"){o.acquireInstantiationService(i)}n.phase=2});return i}registerListeners(t,e,i,s,n){this._register(i.onDidChangeConfiguration(o=>this.updateFontAliasing(o,i)));if(le){this._register(e.onWillSaveState(o=>{if(o.reason===Nn.SHUTDOWN){this.storeFontInfo(e)}}))}else{this._register(t.onWillShutdown(()=>this.storeFontInfo(e)))}this._register(t.onWillShutdown(o=>this._onWillShutdown.fire(o)));this._register(t.onDidShutdown(()=>{this._onDidShutdown.fire();this.dispose()}));this._register(s.onDidChangeFocus(o=>{if(!o){e.flush()}}));this._register(n.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible")));this._register(n.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}updateFontAliasing(t,e){if(!K){return}if(t&&!t.affectsConfiguration("workbench.fontAliasing")){return}const i=e.getValue("workbench.fontAliasing");if(this.fontAliasing===i){return}this.fontAliasing=i;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(n=>`monaco-font-aliasing-${n}`));if(s.some(n=>n===i)){this.mainContainer.classList.add(`monaco-font-aliasing-${i}`)}}restoreFontInfo(t,e){const i=t.get("editorFontInfo",-1);if(i){try{const s=JSON.parse(i);if(Array.isArray(s)){Ge.restoreFontInfo(p,s)}}catch(s){}}Ge.readFontInfo(p,xn.createFromRawSettings(e.getValue("editor"),Mn.getInstance(p).value))}storeFontInfo(t){const e=Ge.serializeFontInfo(p);if(e){t.store("editorFontInfo",JSON.stringify(e),-1,1)}}renderWorkbench(t,e,i,s){Vn(this.mainContainer);Bn((r,a)=>t.createInstance(ai,r,a));const n=Ce?"windows":Vi?"linux":"mac";const o=re(["monaco-workbench",n,L?"web":void 0,Pn?"chromium":Ln?"firefox":Rn?"safari":void 0,...this.getLayoutClasses(),...this.options?.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o);p.document.body.classList.add(n);if(L){p.document.body.classList.add("web")}this.updateFontAliasing(void 0,s);this.restoreFontInfo(i,s);for(const{id:r,role:a,classes:c,options:u}of[{id:"workbench.parts.titlebar",role:"none",classes:["titlebar"]},{id:"workbench.parts.banner",role:"banner",classes:["banner"]},{id:"workbench.parts.activitybar",role:"none",classes:["activitybar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.sidebar",role:"none",classes:["sidebar",this.getSideBarPosition()===0?"left":"right"]},{id:"workbench.parts.editor",role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:"workbench.parts.panel",role:"none",classes:["panel","basepanel",Nt(this.getPanelPosition())]},{id:"workbench.parts.auxiliarybar",role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===0?"right":"left"]},{id:"workbench.parts.statusbar",role:"status",classes:["statusbar"]}]){const m=this.createPart(r,a,c);A(`code/willCreatePart/${r}`);this.getPart(r).create(m,u);A(`code/didCreatePart/${r}`)}this.createNotificationsHandlers(t,e);this.parent.appendChild(this.mainContainer)}createPart(t,e,i){const s=document.createElement(e==="status"?"footer":"div");s.classList.add("part",...i);s.id=t;s.setAttribute("role",e);if(e==="status"){s.setAttribute("aria-live","off")}return s}createNotificationsHandlers(t,e){const i=this._register(t.createInstance(ni,this.mainContainer,e.model));const s=this._register(t.createInstance(ri,this.mainContainer,e.model));this._register(t.createInstance(xr,e.model));const n=t.createInstance(oi,e.model);this._register(t.createInstance($e));this._register(i.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible);s.update(i.isVisible)}));this._register(s.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible)}));Ir(i,s,e.model);On.register(new Lr);this.registerNotifications({onDidChangeNotificationsVisibility:X.map(X.any(s.onDidChangeVisibility,i.onDidChangeVisibility),()=>s.isVisible||i.isVisible)})}restore(t){try{this.restoreParts()}catch(e){ce(e)}this.whenReady.finally(()=>Promise.race([this.whenRestored,zn(2e3)]).finally(()=>{function e(){A("code/didStartWorkbench");performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}if(this.isRestored()){e()}else{this.whenRestored.finally(()=>e())}t.phase=3;const i=this._register(new ps(()=>{this._register(Hn(p,()=>t.phase=4,2500))},2500));i.schedule()}))}}var zr='.monaco-workbench .part.titlebar{display:flex;flex-direction:row}.monaco-workbench.mac .part.titlebar{flex-direction:row-reverse}.monaco-workbench .part.titlebar>.titlebar-container{align-items:center;box-sizing:border-box;display:flex;flex-grow:1;flex-shrink:1;height:100%;justify-content:space-between;overflow:hidden;user-select:none;-webkit-user-select:none;width:100%}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom{zoom:calc(1/var(--zoom-factor))}.monaco-workbench.mac .part.titlebar>.titlebar-container{line-height:22px}.monaco-workbench.linux .part.titlebar>.titlebar-container,.monaco-workbench.web .part.titlebar>.titlebar-container,.monaco-workbench.windows .part.titlebar>.titlebar-container{justify-content:left;line-height:22px}.monaco-workbench.web.safari .part.titlebar,.monaco-workbench.web.safari .part.titlebar>.titlebar-container{overflow:visible}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-drag-region{-webkit-app-region:drag;display:block;height:100%;left:0;position:absolute;top:0;width:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{align-items:center;display:flex;height:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left{flex-grow:2;justify-content:flex-start;order:0;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center{justify-content:center;margin:0 10px;max-width:fit-content;min-width:0;order:1;width:60%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{flex-grow:2;justify-content:flex-end;min-width:min-content;order:2;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title{flex:0 1 auto;font-size:12px;margin-left:auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.windows .part.titlebar>.titlebar-container>.titlebar-center>.window-title{cursor:default}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title{font-size:inherit}.monaco-workbench .part.titlebar>.titlebar-container .monaco-toolbar .actions-container{gap:4px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center{-webkit-app-region:no-drag;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center.hide{visibility:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{align-items:stretch;background-color:var(--vscode-commandCenter-background);border:1px solid var(--vscode-commandCenter-border);border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px;color:var(--vscode-commandCenter-foreground);display:flex;height:22px;margin:0 6px;max-width:600px;overflow:hidden;width:38vw}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick{display:flex;justify-content:start;margin:auto;max-width:600px;overflow:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-commandCenter-foreground);font-size:14px;margin:auto 3px;opacity:.8}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-label{overflow:hidden;text-overflow:ellipsis}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple{justify-content:flex-start;padding:0 12px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple.active .action-label{background-color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:only-child{margin-left:0}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{border-color:var(--vscode-commandCenter-inactiveBorder)!important;color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .codicon-copilot{font-size:14px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:HOVER{background-color:var(--vscode-commandCenter-activeBackground);border-color:var(--vscode-commandCenter-activeBorder);color:var(--vscode-commandCenter-activeForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.menubar{flex-wrap:nowrap;min-width:36px;order:2;z-index:2500}.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-left>.menubar{margin-left:4px}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .menubar .menubar-menu-button>.menubar-menu-items-holder.monaco-menu-container,.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .monaco-toolbar .dropdown-action-container{zoom:var(--zoom-factor)}.monaco-workbench.linux .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows .part.titlebar>.titlebar-container>.resizer{-webkit-app-region:no-drag;height:4px;position:absolute;top:0;width:100%}.monaco-workbench.linux.fullscreen .part.titlebar>.titlebar-container>.resizer,.monaco-workbench.windows.fullscreen .part.titlebar>.titlebar-container>.resizer{display:none}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{flex-shrink:0;height:100%;order:1;position:relative;width:35px;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon:not(.codicon){background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon.codicon{line-height:30px}.monaco-workbench.fullscreen .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{display:none}.monaco-workbench .part.titlebar>.titlebar-container .window-appicon>.home-bar-icon-badge{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:8px;border-left:1px solid transparent;border-top:1px solid transparent;bottom:6px;height:8px;pointer-events:none;position:absolute;right:9px;width:8px;z-index:1}.monaco-workbench .part.titlebar .window-controls-container{-webkit-app-region:no-drag;display:flex;flex-grow:0;flex-shrink:0;height:100%;text-align:center;width:0;z-index:3000}.monaco-workbench.fullscreen .part.titlebar .window-controls-container{background-color:transparent;display:none}.monaco-workbench.web .part.titlebar .titlebar-right .window-controls-container{height:env(titlebar-area-height,35px);width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench.web .part.titlebar .titlebar-left .window-controls-container{height:env(titlebar-area-height,35px);width:env(titlebar-area-x,0)}.monaco-workbench.web.mac .part.titlebar .titlebar-left .window-controls-container{order:0}.monaco-workbench.web.mac .part.titlebar .titlebar-right .window-controls-container{order:1}.monaco-workbench:not(.web):not(.mac) .part.titlebar .window-controls-container{width:calc(138px/var(--zoom-factor, 1))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container.counter-zoom .window-controls-container{width:138px}.monaco-workbench.linux:not(.web) .part.titlebar .titlebar-container.counter-zoom .window-controls-container.wco-enabled,.monaco-workbench.linux:not(.web) .part.titlebar .window-controls-container.wco-enabled{width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container:not(.counter-zoom) .window-controls-container *{zoom:calc(1/var(--zoom-factor, 1))}.monaco-workbench:not(.web).mac .part.titlebar .window-controls-container{width:70px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon{align-items:center;color:var(--vscode-titleBar-activeForeground);display:flex;font-size:16px;height:100%;justify-content:center;width:46px}.monaco-workbench .part.titlebar.inactive .window-controls-container>.window-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:before{height:16px;line-height:16px}.monaco-workbench .part.titlebar .window-controls-container>.window-icon:hover{background-color:hsla(0,0%,100%,.1)}.monaco-workbench .part.titlebar.light .window-controls-container>.window-icon:hover{background-color:rgba(0,0,0,.1)}.monaco-workbench .part.titlebar .window-controls-container>.window-icon.window-close:hover{background-color:rgba(232,17,35,.9)}.monaco-workbench .part.titlebar .window-controls-container .window-icon.window-close:hover{color:#fff}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{-webkit-app-region:no-drag;display:none;flex-grow:0;flex-shrink:0;height:100%;margin-left:auto;padding-right:2px;position:relative;text-align:center;z-index:2500}.monaco-workbench.mac:not(.web) .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{right:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container:not(.has-no-actions){display:flex;justify-content:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .codicon{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item{display:flex}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:9px;font-weight:400;height:16px;line-height:11px;min-width:11px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content:before{mask-size:12px;-webkit-mask-size:12px;top:2px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:12px;line-height:12px;min-width:12px;padding:0 2px;position:absolute;right:0;text-align:center;top:10px}';St(zr,{});var ci;let li=class ga{constructor(t,e,i,s){this._disposables=new I;this._onDidChangeVisibility=new w;this.onDidChangeVisibility=this._onDidChangeVisibility.event;this.element=document.createElement("div");this.element.classList.add("command-center");const n=i.createInstance(Wn,this.element,x.CommandCenter,{contextMenu:x.TitleBarContext,hiddenItemStrategy:-1,toolbarOptions:{primaryGroup:()=>true},telemetrySource:"commandCenter",actionViewItemProvider:(o,r)=>{if(o instanceof Un&&o.item.submenu===x.CommandCenterCenter){return i.createInstance(hi,o,t,{...r,hoverDelegate:e})}else{return Bi(i,o,{...r,hoverDelegate:e})}}});this._disposables.add(X.filter(s.onShow,()=>gs(this.element),this._disposables)(this._setVisibility.bind(this,false)));this._disposables.add(s.onHide(this._setVisibility.bind(this,true)));this._disposables.add(n)}_setVisibility(t){this.element.classList.toggle("hide",!t);this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};li=v([l(2,E),l(3,cs)],li);let hi=class pa extends ji{static{ci=this}static{this._quickOpenCommandId="workbench.action.quickOpenWithModes"}constructor(t,e,i,s,n,o,r){super(void 0,t.actions.find(a=>a.id==="workbench.action.quickOpenWithModes")??t.actions[0],i);this._submenu=t;this._windowTitle=e;this._hoverService=s;this._keybindingService=n;this._instaService=o;this._editorGroupService=r;this._hoverDelegate=i.hoverDelegate??je("mouse")}render(t){super.render(t);t.classList.add("command-center-center");t.classList.toggle("multiple",this._submenu.actions.length>1);const e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,t,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{e.update(this.getTooltip())}));const i=[];for(const s of this._submenu.actions){if(s instanceof Gn){i.push(s.actions)}else{i.push([s])}}for(let s=0;s<i.length;s++){const n=i[s];const o=this._instaService.createInstance(vs,t,{hiddenItemStrategy:-1,telemetrySource:"commandCenterCenter",actionViewItemProvider:(r,a)=>{a={...a,hoverDelegate:this._hoverDelegate};if(r.id!==ci._quickOpenCommandId){return Bi(this._instaService,r,a)}const c=this;return this._instaService.createInstance(class wa extends ji{constructor(){super(void 0,r,a)}render(m){super.render(m);m.classList.toggle("command-center-quick-pick");m.role="button";const g=this.action;const b=document.createElement("span");b.ariaHidden="true";b.className=g.class??"";b.classList.add("search-icon");const D=this._getLabel();const V=document.createElement("span");V.classList.add("search-label");V.innerText=D;Cs(m,b,V);const lt=this._store.add(c._hoverService.setupManagedHover(c._hoverDelegate,m,this.getTooltip()));this._store.add(c._windowTitle.onDidChange(()=>{lt.update(this.getTooltip());V.innerText=this._getLabel()}));this._store.add(c._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:Ot,oldPartOptions:ze})=>{if(Ot.showTabs!==ze.showTabs){lt.update(this.getTooltip());V.innerText=this._getLabel()}}))}getTooltip(){return c.getTooltip()}_getLabel(){const{prefix:m,suffix:g}=c._windowTitle.getTitleDecorations();let b=c._windowTitle.workspaceName;if(c._windowTitle.isCustomTitleFormat()){b=c._windowTitle.getWindowTitle()}else if(c._editorGroupService.partOptions.showTabs==="none"){b=c._windowTitle.fileName??b}if(!b){b=f(7042,"Search")}if(m){b=f(7043,"{0} {1}",m,b)}if(g){b=f(7044,"{0} {1}",b,g)}return b.replaceAll(/\r\n|\r|\n/g,"⏎")}})}});o.setActions(n);this._store.add(o);if(s<i.length-1){const r=Xe(B.circleSmallFilled);r.style.padding="0 12px";r.style.height="100%";r.style.opacity="0.5";t.appendChild(r)}}}getTooltip(){const t=this._keybindingService.lookupKeybinding(this.action.id)?.getLabel();const e=t?f(7045,"Search {0} ({1}) — {2}",this._windowTitle.workspaceName,t,this._windowTitle.value):f(7046,"Search {0} — {1}",this._windowTitle.workspaceName,this._windowTitle.value);return e}};hi=ci=v([l(3,xi),l(4,Et),l(5,E),l(6,ut)],hi);ht.appendMenuItem(x.CommandCenter,{submenu:x.CommandCenterCenter,title:f(7047,"Command Center"),icon:B.shield,order:101});var di;let ui=class va extends ys{constructor(t,e,i){super("workbench.titleService",i,e);this.instantiationService=t;this.mainPart=this._register(this.createMainTitlebarPart());this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange;this.properties=void 0;this.variables=new Map;this._register(this.registerPart(this.mainPart));this.registerActions();this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(fi)}registerActions(){const t=this;this._register(Li(class Ca extends Ri{constructor(){super({id:`workbench.action.focusTitleBar`,title:q(3082,"Focus Title Bar"),category:Oi.View,f1:true})}run(){t.getPartByDocument(ms()).focus()}}))}registerAPICommands(){this._register(mt.registerCommand({id:"registerWindowTitleVariable",handler:(t,e,i)=>{this.registerVariables([{name:e,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(t,e){const i=document.createElement("div");i.classList.add("part","titlebar");i.setAttribute("role","none");i.style.position="relative";t.insertBefore(i,t.firstChild);const s=new I;const n=this.doCreateAuxiliaryTitlebarPart(i,e);s.add(this.registerPart(n));s.add(X.runAndSubscribe(n.onDidChange,()=>i.style.height=`${n.height}px`));n.create(i);if(this.properties){n.updateProperties(this.properties)}if(this.variables.size){n.registerVariables(Array.from(this.variables.values()))}X.once(n.onWillDispose)(()=>s.dispose());return n}doCreateAuxiliaryTitlebarPart(t,e){return this.instantiationService.createInstance(mi,t,e,this.mainPart)}updateProperties(t){this.properties=t;for(const e of this.parts){e.updateProperties(t)}}registerVariables(t){const e=[];for(const i of t){if(!this.variables.has(i.name)){this.variables.set(i.name,i);e.push(i)}}for(const i of this.parts){i.registerVariables(e)}}};ui=v([l(0,E),l(1,$),l(2,U)],ui);let Ne=class ya extends Re{get minimumHeight(){const t=L&&Ye();let e=this.isCommandCenterVisible||t?jn:30;if(t){e=Math.max(e,Kn(O(this.element))?.height??0)}return e/(this.preventZoom?he(O(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,u,m,g,b,D,V,lt){super(t,{hasTitle:false},a,c,u);this.contextMenuService=s;this.configurationService=n;this.environmentService=o;this.instantiationService=r;this.storageService=c;this.contextKeyService=m;this.hostService=g;this.editorGroupService=b;this.menuService=V;this.keybindingService=lt;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this._onMenubarVisibilityChange=this._register(new w);this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event;this._onWillDispose=this._register(new w);this.onWillDispose=this._onWillDispose.event;this.actionToolBarDisposable=this._register(new I);this.editorActionsChangeDisposable=this._register(new I);this.editorToolbarMenuDisposables=this._register(new I);this.layoutToolbarMenuDisposables=this._register(new I);this.activityToolbarDisposables=this._register(new I);this.titleDisposables=this._register(new I);this.titleBarStyle=Zn(this.configurationService);this.isInactive=false;this.isAuxiliary=i!=="main";this.editorService=D.createScoped(i,this._store);this.editorGroupsContainer=i==="main"?b.mainPart:i;this.windowTitle=this._register(r.createInstance(Yn,e,i));this.hoverDelegate=this._register(Xn());this.registerListeners(oe(e))}registerListeners(t){this._register(this.hostService.onDidChangeFocus(e=>e?this.onFocus():this.onBlur()));this._register(this.hostService.onDidChangeActiveWindow(e=>e===t?this.onFocus():this.onBlur()));this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationChanged(e)));this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onEditorPartConfigurationChange(e)))}onBlur(){this.isInactive=true;this.updateStyles()}onFocus(){this.isInactive=false;this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:t,newPartOptions:e}){if(t.editorActionsLocation!==e.editorActionsLocation||t.showTabs!==e.showTabs){if(this.actionToolBar){this.createActionToolBar();this.createActionToolBarMenus({editorActions:true});this._onDidChange.fire(void 0)}}}onConfigurationChanged(t){if(!this.isAuxiliary&&!pt(this.configurationService,this.titleBarStyle)&&(!K||L)){if(t.affectsConfiguration("window.menuBarVisibility")){if(this.currentMenubarVisibility==="compact"){this.uninstallMenubar()}else{this.installMenubar()}}}if(this.actionToolBar){const e=t.affectsConfiguration("workbench.layoutControl.enabled");const i=t.affectsConfiguration("workbench.activityBar.location");if(e||i){this.createActionToolBarMenus({layoutActions:e,activityActions:i});this._onDidChange.fire(void 0)}}if(t.affectsConfiguration("window.commandCenter")){this.createTitle();this._onDidChange.fire(void 0)}}installMenubar(){if(this.menubar){return}this.customMenubar=this._register(this.instantiationService.createInstance($n));this.menubar=F(this.leftContent,_("div.menubar"));this.menubar.setAttribute("role","menubar");this._register(this.customMenubar.onVisibilityChange(t=>this.onMenubarVisibilityChanged(t)));this.customMenubar.create(this.menubar)}uninstallMenubar(){this.customMenubar?.dispose();this.customMenubar=void 0;this.menubar?.remove();this.menubar=void 0;this.onMenubarVisibilityChanged(false)}onMenubarVisibilityChanged(t){if(L||Ce||Vi){if(this.lastLayoutDimensions){this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height)}this._onMenubarVisibilityChange.fire(t)}}updateProperties(t){this.windowTitle.updateProperties(t)}registerVariables(t){this.windowTitle.registerVariables(t)}createContentArea(t){this.element=t;this.rootContainer=F(t,_(".titlebar-container"));this.leftContent=F(this.rootContainer,_(".titlebar-left"));this.centerContent=F(this.rootContainer,_(".titlebar-center"));this.rightContent=F(this.rootContainer,_(".titlebar-right"));if(!K&&!L&&!pt(this.configurationService,this.titleBarStyle)){this.appIcon=Ki(this.leftContent,_("a.window-appicon"));if(!this.isAuxiliary&&L){const e=this.environmentService.options?.homeIndicator;if(e){const i=Qn().getIcon(e.icon)?{id:e.icon}:B.code;this.appIcon.setAttribute("href",e.href);this.appIcon.classList.add(...T.asClassNameArray(i));this.appIconBadge=document.createElement("div");this.appIconBadge.classList.add("home-bar-icon-badge");this.appIcon.appendChild(this.appIconBadge)}}}this.dragRegion=Ki(this.rootContainer,_("div.titlebar-drag-region"));if(!this.isAuxiliary&&!pt(this.configurationService,this.titleBarStyle)&&(!K||L)&&this.currentMenubarVisibility!=="compact"){this.installMenubar()}this.title=F(this.centerContent,_("div.window-title"));this.createTitle();{this.actionToolBarElement=F(this.rightContent,_("div.action-toolbar-container"));this.createActionToolBar();this.createActionToolBarMenus()}if(!pt(this.configurationService,this.titleBarStyle)){let e=K?"left":"right";if(K&&le){const i=new Intl.Locale(fo);if(i?.textInfo?.direction==="rtl"){e="right"}}if(K&&le&&e==="left");else{this.windowControlsContainer=F(e==="left"?this.leftContent:this.rightContent,_("div.window-controls-container"));if(L){F(e==="left"?this.rightContent:this.leftContent,_("div.window-controls-container"))}if(Ye()){this.windowControlsContainer.classList.add("wco-enabled")}}}{this._register(M(this.rootContainer,z.CONTEXT_MENU,e=>{nt.stop(e);let i;if(K&&Ss(e.target)&&qn(e.target,this.title)){i=x.TitleBarTitleContext}else{i=x.TitleBarContext}this.onContextMenu(e,i)}));if(K){this._register(M(this.title,z.MOUSE_DOWN,e=>{if(e.metaKey){nt.stop(e,true);this.onContextMenu(e,x.TitleBarTitleContext)}},true))}}this.updateStyles();return this.element}createTitle(){this.titleDisposables.clear();if(!this.isCommandCenterVisible){this.title.innerText=this.windowTitle.value;this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value}))}else{const t=this.instantiationService.createInstance(li,this.windowTitle,this.hoverDelegate);Cs(this.title,t.element);this.titleDisposables.add(t)}}actionViewItemProvider(t,e){if(!this.isAuxiliary){if(t.id===Zi){return this.instantiationService.createInstance(Jn,{position:()=>2},e)}if(t.id===Yi){return this.instantiationService.createInstance(to,{position:()=>2},e)}}const i=this.editorGroupsContainer.activeGroup?.activeEditorPane;if(i&&i instanceof eo){const s=i.getActionViewItem(t,e);if(s){return s}}return Bi(this.instantiationService,t,{...e,menuAsChild:false})}getKeybinding(t){const e=this.editorGroupsContainer.activeGroup?.activeEditorPane?.scopedContextKeyService??this.contextKeyService;return this.keybindingService.lookupKeybinding(t.id,e)}createActionToolBar(){this.actionToolBarDisposable.clear();this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(vs,this.actionToolBarElement,{contextMenu:x.TitleBarContext,orientation:0,ariaLabel:f(3083,"Title actions"),getKeyBinding:t=>this.getKeybinding(t),overflowBehavior:{maxItems:9,exempted:[Yi,Zi,...io]},anchorAlignmentProvider:()=>1,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:(t,e)=>this.actionViewItemProvider(t,e),hoverDelegate:this.hoverDelegate}));if(this.editorActionsEnabled){this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:true})))}}createActionToolBarMenus(t=true){if(t===true){t={editorActions:true,layoutActions:true,activityActions:true}}const e=()=>{const i={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const s=this.editorGroupsContainer.activeGroup;if(s){const n=s.createEditorActions(this.editorActionsChangeDisposable);i.primary.push(...n.actions.primary);i.secondary.push(...n.actions.secondary);this.editorActionsChangeDisposable.add(n.onDidChange(()=>e()))}}if(this.layoutToolbarMenu){mo(this.layoutToolbarMenu,{},i,()=>!this.editorActionsEnabled)}if(this.activityActionsEnabled){if(bo(this.storageService)){i.primary.push(go)}i.primary.push(po)}this.actionToolBar.setActions(Xi(i.primary),Xi(i.secondary))};if(t.editorActions){this.editorToolbarMenuDisposables.clear();if(this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){const i={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=new so(i);this.actionToolBar.context=i;this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}else{this.actionToolBar.actionRunner=new Ai;this.actionToolBar.context=void 0;this.editorToolbarMenuDisposables.add(this.actionToolBar.actionRunner)}}if(t.layoutActions){this.layoutToolbarMenuDisposables.clear();if(this.layoutControlEnabled){this.layoutToolbarMenu=this.menuService.createMenu(x.LayoutControlMenu,this.contextKeyService);this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu);this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>e()))}else{this.layoutToolbarMenu=void 0}}if(t.activityActions){this.activityToolbarDisposables.clear();if(this.activityActionsEnabled){this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(0,no.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>e()))}}e()}updateStyles(){super.updateStyles();if(this.element){if(this.isInactive){this.element.classList.add("inactive")}else{this.element.classList.remove("inactive")}const t=this.getColor(this.isInactive?oo:ro,(s,n)=>{return s.isOpaque()?s:s.makeOpaque(ao(n))})||"";this.element.style.backgroundColor=t;if(this.appIconBadge){this.appIconBadge.style.backgroundColor=t}if(t&&co.fromHex(t).isLighter()){this.element.classList.add("light")}else{this.element.classList.remove("light")}const e=this.getColor(this.isInactive?lo:ho);this.element.style.color=e||"";const i=this.getColor(uo);this.element.style.borderBottom=i?`1px solid ${i}`:""}}onContextMenu(t,e){const i=new Is(O(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:K&&le?i.target:void 0})}get currentMenubarVisibility(){if(this.isAuxiliary){return"hidden"}return Ze(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&this.configurationService.getValue("workbench.layoutControl.enabled")!==false}get isCommandCenterVisible(){return this.configurationService.getValue("window.commandCenter")!==false}get editorActionsEnabled(){return this.editorGroupService.partOptions.editorActionsLocation==="titleBar"||this.editorGroupService.partOptions.editorActionsLocation==="default"&&this.editorGroupService.partOptions.showTabs==="none"}get activityActionsEnabled(){const t=this.configurationService.getValue("workbench.activityBar.location");return!this.isAuxiliary&&(t==="top"||t==="bottom")}get hasZoomableElements(){const t=!(this.currentMenubarVisibility==="hidden"||this.currentMenubarVisibility==="compact"||!L&&K);const e=this.isCommandCenterVisible;const i=this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return t||e||i}get preventZoom(){return he(O(this.element))<1||!this.hasZoomableElements}layout(t,e){this.updateLayout(new Bt(t,e));super.layoutContents(t,e)}updateLayout(t){this.lastLayoutDimensions=t;{const e=he(O(this.element));this.element.style.setProperty("--zoom-factor",e.toString());this.rootContainer.classList.toggle("counter-zoom",this.preventZoom);if(this.customMenubar){const i=new Bt(0,t.height);this.customMenubar.layout(i)}}}focus(){if(this.customMenubar){this.customMenubar.toggleFocus()}else{this.element.querySelector('[tabindex]:not([tabindex="-1"])').focus()}}toJSON(){return{type:"workbench.parts.titlebar"}}dispose(){this._onWillDispose.fire();super.dispose()}};Ne=v([l(3,et),l(4,Ct),l(5,te),l(6,E),l(7,U),l(8,$),l(9,W),l(10,at),l(11,Pt),l(12,ut),l(13,Lt),l(14,Pi),l(15,Et)],Ne);let fi=class Sa extends Ne{constructor(t,e,i,s,n,o,r,a,c,u,m,g,b){super("workbench.parts.titlebar",p,"main",t,e,i,s,n,o,r,a,c,u,m,g,b)}};fi=v([l(0,et),l(1,Ct),l(2,te),l(3,E),l(4,U),l(5,$),l(6,W),l(7,at),l(8,Pt),l(9,ut),l(10,Lt),l(11,Pi),l(12,Et)],fi);let mi=class Ia extends Ne{static{di=this}static{this.COUNTER=1}get height(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,u,m,g,b,D,V,lt){const Ot=di.COUNTER++;super(`workbench.parts.auxiliaryTitle.${Ot}`,O(t),e,s,n,o,r,a,c,u,m,g,b,D,V,lt);this.container=t;this.mainTitlebar=i}get preventZoom(){return he(O(this.element))<1||!this.mainTitlebar.hasZoomableElements}};mi=di=v([l(3,et),l(4,Ct),l(5,te),l(6,E),l(7,U),l(8,$),l(9,W),l(10,at),l(11,Pt),l(12,ut),l(13,Lt),l(14,Pi),l(15,Et)],mi);function Hr(){return{[Mi.toString()]:new wt(ui,[],false)}}Es(async d=>{d.get(Mi)});var Fr='.monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:"";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:"";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.compact-right>.statusbar-item-label{margin-left:0;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{margin-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){color:var(--vscode-statusBarItem-hoverForeground);text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind{background-color:var(--vscode-statusBarItem-warningBackground);color:var(--vscode-statusBarItem-warningForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-warningHoverBackground)!important;color:var(--vscode-statusBarItem-warningHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind{background-color:var(--vscode-statusBarItem-errorBackground);color:var(--vscode-statusBarItem-errorForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-errorHoverBackground)!important;color:var(--vscode-statusBarItem-errorHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)!important;color:var(--vscode-statusBarItem-prominentHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind{background-color:var(--vscode-statusBarItem-remoteBackground);color:var(--vscode-statusBarItem-remoteForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-remoteHoverBackground)!important;color:var(--vscode-statusBarItem-remoteHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind{background-color:var(--vscode-statusBarItem-offlineBackground);color:var(--vscode-statusBarItem-offlineForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-offlineHoverBackground)!important;color:var(--vscode-statusBarItem-offlineHoverForeground)}';St(Fr,{});class Gr extends G{constructor(t,e,i){super(t,e,void 0,true);this.model=i;this.checked=!i.isHidden(t)}async run(){if(this.model.isHidden(this.id)){this.model.show(this.id)}else{this.model.hide(this.id)}}}class Wr extends G{constructor(t,e,i){super(t,f(6888,"Hide '{0}'",e),void 0,true);this.model=i}async run(){this.model.hide(this.id)}}S.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:Rt,handler:d=>{const t=d.get(ct);t.focusPreviousEntry()}});S.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:Rt,handler:d=>{const t=d.get(ct);t.focusNextEntry()}});S.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:Rt,handler:d=>{const t=d.get(ct);t.focus(false);t.focusNextEntry()}});S.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:Rt,handler:d=>{const t=d.get(ct);t.focus(false);t.focusPreviousEntry()}});S.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:Rt,handler:d=>{const t=d.get(ct);const e=d.get(Lt);if(t.isEntryFocused()){t.focus(false)}else if(e.activeEditorPane){e.activeEditorPane.focus()}}});class Ur extends Ri{constructor(){super({id:"workbench.action.focusStatusBar",title:q(6889,"Focus Status Bar"),category:Oi.View,f1:true})}async run(t){const e=t.get(W);e.focusPart("workbench.parts.statusbar",ae())}}Li(Ur);class xt extends P{static{this.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden"}get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(t){super();this.storageService=t;this._onDidChangeEntryVisibility=this._register(new w);this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event;this._entries=[];this.hidden=new Set;this.restoreState();this.registerListeners()}restoreState(){const t=this.storageService.get(xt.HIDDEN_ENTRIES_KEY,0);if(t){try{this.hidden=new Set(JSON.parse(t))}catch(e){}}}registerListeners(){this._register(this.storageService.onDidChangeValue(0,xt.HIDDEN_ENTRIES_KEY,this._register(new I))(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){const t=new Set(this.hidden);this.hidden.clear();this.restoreState();const e=new Set;for(const i of t){if(!this.hidden.has(i)){e.add(i)}}for(const i of this.hidden){if(!t.has(i)){e.add(i)}}if(e.size>0){for(const i of this._entries){if(e.has(i.id)){this.updateVisibility(i.id,true);e.delete(i.id)}}}}add(t){this._entries.push(t);this.updateVisibility(t,false);this.sort();this.markFirstLastVisibleEntry()}remove(t){const e=this._entries.indexOf(t);if(e>=0){this._entries.splice(e,1);if(this._entries.some(i=>de(i.priority.primary)&&i.priority.primary.id===t.id)){this.sort()}this.markFirstLastVisibleEntry()}}isHidden(t){return this.hidden.has(t)}hide(t){if(!this.hidden.has(t)){this.hidden.add(t);this.updateVisibility(t,true);this.saveState()}}show(t){if(this.hidden.has(t)){this.hidden.delete(t);this.updateVisibility(t,true);this.saveState()}}findEntry(t){return this._entries.find(e=>e.container===t)}getEntries(t){return this._entries.filter(e=>e.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>yt(t.container))}focusEntry(t,e){const i=o=>{let r=o;let a=r>=0&&r<this._entries.length?this._entries[r]:void 0;while(a&&this.isHidden(a.id)){r+=t;a=r>=0&&r<this._entries.length?this._entries[r]:void 0}return a};const s=this.getFocusedEntry();if(s){const o=i(this._entries.indexOf(s)+t);if(o){this._lastFocusedEntry=o;o.labelContainer.focus();return}}const n=i(e);if(n){this._lastFocusedEntry=n;n.labelContainer.focus()}}updateVisibility(t,e){if(typeof t==="string"){const i=t;for(const s of this._entries){if(s.id===i){this.updateVisibility(s,e)}}}else{const i=t;const s=this.isHidden(i.id);if(s){Ds(i.container)}else{As(i.container)}if(e){this._onDidChangeEntryVisibility.fire({id:i.id,visible:!s})}this.markFirstLastVisibleEntry()}}saveState(){if(this.hidden.size>0){this.storageService.store(xt.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0)}else{this.storageService.remove(xt.HIDDEN_ENTRIES_KEY,0)}}sort(){const t=new Map;const e=new Map;for(let n=0;n<this._entries.length;n++){const o=this._entries[n];if(typeof o.priority.primary==="number"){t.set(o,n)}else{const r=o.priority.primary.id;let a=e.get(r);if(!a){for(const c of e.values()){if(c.has(r)){a=c;break}}if(!a){a=new Map;e.set(r,a)}}a.set(o.id,o)}}const i=Array.from(t.keys());i.sort((n,o)=>{if(n.alignment===o.alignment){if(n.priority.primary!==o.priority.primary){return Number(o.priority.primary)-Number(n.priority.primary)}if(n.priority.secondary!==o.priority.secondary){return o.priority.secondary-n.priority.secondary}return t.get(n)-t.get(o)}if(n.alignment===0){return-1}if(o.alignment===0){return 1}return 0});let s;if(e.size>0){s=[];for(const n of i){const o=e.get(n.id);const r=o?Array.from(o.values()):void 0;if(r){s.push(...r.filter(a=>de(a.priority.primary)&&a.priority.primary.alignment===0))}s.push(n);if(r){s.push(...r.filter(a=>de(a.priority.primary)&&a.priority.primary.alignment===1))}e.delete(n.id)}for(const[,n]of e){s.push(...n.values())}}else{s=i}this._entries=s}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0));this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(t){let e;let i;for(const s of t){s.container.classList.remove("first-visible-item","last-visible-item");const n=!this.isHidden(s.id);if(n){if(!e){e=s}i=s}}e?.container.classList.add("first-visible-item");i?.container.classList.add("last-visible-item")}}let bi=class Ea extends P{get name(){return Y(this.entry).name}get hasCommand(){return typeof this.entry?.command!=="undefined"}constructor(t,e,i,s,n,o,r,a){super();this.container=t;this.hoverDelegate=i;this.commandService=s;this.hoverService=n;this.notificationService=o;this.telemetryService=r;this.themeService=a;this.entry=void 0;this.foregroundListener=this._register(new Tt);this.backgroundListener=this._register(new Tt);this.commandMouseListener=this._register(new Tt);this.commandTouchListener=this._register(new Tt);this.commandKeyboardListener=this._register(new Tt);this.hover=void 0;this.labelContainer=document.createElement("a");this.labelContainer.tabIndex=-1;this.labelContainer.setAttribute("role","button");this.labelContainer.className="statusbar-item-label";this._register(Ti.addTarget(this.labelContainer));this.label=this._register(new jr(this.labelContainer));this.container.appendChild(this.labelContainer);this.beakContainer=document.createElement("div");this.beakContainer.className="status-bar-item-beak-container";this.container.appendChild(this.beakContainer);this.update(e)}update(t){this.label.showProgress=t.showProgress??false;if(!this.entry||t.text!==this.entry.text){this.label.text=t.text;if(t.text){As(this.labelContainer)}else{Ds(this.labelContainer)}}if(!this.entry||t.ariaLabel!==this.entry.ariaLabel){this.container.setAttribute("aria-label",t.ariaLabel);this.labelContainer.setAttribute("aria-label",t.ariaLabel)}if(!this.entry||t.role!==this.entry.role){this.labelContainer.setAttribute("role",t.role||"button")}if(!this.entry||!this.isEqualTooltip(this.entry,t)){const i=We(t.tooltip)?{markdown:t.tooltip,markdownNotSupportedFallback:void 0}:t.tooltip;if(this.hover){this.hover.update(i)}else{this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,i))}}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear();this.commandTouchListener.clear();this.commandKeyboardListener.clear();const i=t.command;if(i&&(i!==$i||this.hover)){this.commandMouseListener.value=M(this.labelContainer,z.CLICK,()=>this.executeCommand(i));this.commandTouchListener.value=M(this.labelContainer,ki.Tap,()=>this.executeCommand(i));this.commandKeyboardListener.value=M(this.labelContainer,z.KEY_DOWN,s=>{const n=new ls(s);if(n.equals(10)||n.equals(3)){nt.stop(s);this.executeCommand(i)}else if(n.equals(9)||n.equals(15)||n.equals(17)){nt.stop(s);this.hover?.hide()}});this.labelContainer.classList.remove("disabled")}else{this.labelContainer.classList.add("disabled")}}if(!this.entry||t.showBeak!==this.entry.showBeak){if(t.showBeak){this.container.classList.add("has-beak")}else{this.container.classList.remove("has-beak")}}const e=!!t.backgroundColor||t.kind&&t.kind!=="standard";if(!this.entry||t.kind!==this.entry.kind){for(const i of wo){this.container.classList.remove(`${i}-kind`)}if(t.kind&&t.kind!=="standard"){this.container.classList.add(`${t.kind}-kind`)}this.container.classList.toggle("has-background-color",e)}if(!this.entry||t.color!==this.entry.color){this.applyColor(this.labelContainer,t.color)}if(!this.entry||t.backgroundColor!==this.entry.backgroundColor){this.container.classList.toggle("has-background-color",e);this.applyColor(this.container,t.backgroundColor,true)}this.entry=t}isEqualTooltip({tooltip:t},{tooltip:e}){if(t===void 0){return e===void 0}if(We(t)){return We(e)&&vo(t,e)}return t===e}async executeCommand(t){if(t===$i){this.hover?.show(true)}else{const e=typeof t==="string"?t:t.id;const i=typeof t==="string"?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:e,from:"status bar"});try{await this.commandService.executeCommand(e,...i)}catch(s){this.notificationService.error(Jt(s))}}}applyColor(t,e,i){let s=void 0;if(i){this.backgroundListener.clear()}else{this.foregroundListener.clear()}if(e){if(Co(e)){s=this.themeService.getColorTheme().getColor(e.id)?.toString();const n=this.themeService.onDidColorThemeChange(o=>{const r=o.getColor(e.id)?.toString();if(i){t.style.backgroundColor=r??""}else{t.style.color=r??""}});if(i){this.backgroundListener.value=n}else{this.foregroundListener.value=n}}else{s=e}}if(i){t.style.backgroundColor=s??""}else{t.style.color=s??""}}};bi=v([l(3,rt),l(4,xi),l(5,tt),l(6,Mt),l(7,U)],bi);class jr extends yo{constructor(t){super(t);this.container=t;this.progressCodicon=Xe(Qi);this.currentText="";this.currentShowProgress=false}set showProgress(t){if(this.currentShowProgress!==t){this.currentShowProgress=t;this.progressCodicon=Xe(t==="syncing"?Qi:So);this.text=this.currentText}}set text(t){if(this.currentShowProgress){if(this.container.firstChild!==this.progressCodicon){this.container.appendChild(this.progressCodicon)}for(const i of Array.from(this.container.childNodes)){if(i!==this.progressCodicon){i.remove()}}let e=t??"";if(e){e=` ${e}`}F(this.container,...Io(e))}else{super.text=t}}}var me;var gi;let qt=class Da extends Re{static{me=this}static{this.HEIGHT=22}constructor(t,e,i,s,n,o,r,a){super(t,{hasTitle:false},i,n,o);this.instantiationService=e;this.contextService=s;this.storageService=n;this.contextMenuService=r;this.contextKeyService=a;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this.minimumHeight=me.HEIGHT;this.maximumHeight=me.HEIGHT;this.pendingEntries=[];this.viewModel=this._register(new xt(this.storageService));this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility;this._onWillDispose=this._register(new w);this.onWillDispose=this._onWillDispose.event;this.hoverDelegate=this._register(this.instantiationService.createInstance(Eo,"element",true,(c,u)=>({persistence:{hideOnKeyDown:true,sticky:u}})));this.compactEntriesDisposable=this._register(new Tt);this.styleOverrides=new Set;this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries()));this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}addEntry(t,e,i,s=0){let n;if(Do(s)){n=s}else{n={primary:s,secondary:Di(e)}}if(!this.element){return this.doAddPendingEntry(t,e,i,n)}return this.doAddEntry(t,e,i,n)}doAddPendingEntry(t,e,i,s){const n={entry:t,id:e,alignment:i,priority:s};this.pendingEntries.push(n);const o={update:r=>{if(n.accessor){n.accessor.update(r)}else{n.entry=r}},dispose:()=>{if(n.accessor){n.accessor.dispose()}else{this.pendingEntries=this.pendingEntries.filter(r=>r!==n)}}};return o}doAddEntry(t,e,i,s){const n=this.doCreateStatusItem(e,i);const o=this.instantiationService.createInstance(bi,n,t,this.hoverDelegate);const r=new class{constructor(){this.id=e;this.alignment=i;this.priority=s;this.container=n;this.labelContainer=o.labelContainer}get name(){return o.name}get hasCommand(){return o.hasCommand}};const{needsFullRefresh:a}=this.doAddOrRemoveModelEntry(r,true);if(a){this.appendStatusbarEntries()}else{this.appendStatusbarEntry(r)}return{update:c=>{o.update(c)},dispose:()=>{const{needsFullRefresh:c}=this.doAddOrRemoveModelEntry(r,false);if(c){this.appendStatusbarEntries()}else{n.remove()}Vt(o)}}}doCreateStatusItem(t,e,...i){const s=document.createElement("div");s.id=t;s.classList.add("statusbar-item");if(i){s.classList.add(...i)}if(e===1){s.classList.add("right")}else{s.classList.add("left")}return s}doAddOrRemoveModelEntry(t,e){const i=this.viewModel.entries;if(e){this.viewModel.add(t)}else{this.viewModel.remove(t)}const s=this.viewModel.entries;if(e){i.splice(s.indexOf(t),0,t)}else{i.splice(i.indexOf(t),1)}const n=!as(i,s);return{needsFullRefresh:n}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,e){if(e){this.viewModel.show(t)}else{this.viewModel.hide(t)}}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=true){this.getContainer()?.focus();const e=this.viewModel.lastFocusedEntry;if(t&&e){setTimeout(()=>e.labelContainer.focus(),0)}}createContentArea(t){this.element=t;const e=this._register(this.contextKeyService.createScoped(this.element));Rt.bindTo(e).set(true);this.leftItemsContainer=document.createElement("div");this.leftItemsContainer.classList.add("left-items","items-container");this.element.appendChild(this.leftItemsContainer);this.element.tabIndex=0;this.rightItemsContainer=document.createElement("div");this.rightItemsContainer.classList.add("right-items","items-container");this.element.appendChild(this.rightItemsContainer);this._register(M(t,z.CONTEXT_MENU,i=>this.showContextMenu(i)));this._register(Ti.addTarget(t));this._register(M(t,ki.Contextmenu,i=>this.showContextMenu(i)));this.createInitialStatusbarEntries();return this.element}createInitialStatusbarEntries(){this.appendStatusbarEntries();while(this.pendingEntries.length){const t=this.pendingEntries.shift();if(t){t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary)}}}appendStatusbarEntries(){const t=Y(this.leftItemsContainer);const e=Y(this.rightItemsContainer);vt(t);vt(e);for(const i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()]){const s=i.alignment===0?t:e;s.appendChild(i.container)}this.updateCompactEntries()}appendStatusbarEntry(t){const e=this.viewModel.getEntries(t.alignment);if(t.alignment===1){e.reverse()}const i=Y(t.alignment===0?this.leftItemsContainer:this.rightItemsContainer);const s=e.indexOf(t);if(s+1===e.length){i.appendChild(t.container)}else{i.insertBefore(t.container,e[s+1].container)}this.updateCompactEntries()}updateCompactEntries(){const t=this.viewModel.entries;const e=new Map;for(const o of t){if(!this.viewModel.isHidden(o.id)){e.set(o.id,o)}o.container.classList.remove("compact-left","compact-right")}const i=new Map;for(const o of e.values()){if(de(o.priority.primary)&&o.priority.primary.compact){const r=o.priority.primary.id;const a=e.get(r);if(!a){continue}let c=i.get(r);if(!c){for(const u of i.values()){if(u.has(r)){c=u;break}}if(!c){c=new Map;i.set(r,c)}}c.set(o.id,o);c.set(a.id,a);if(o.priority.primary.alignment===0){a.container.classList.add("compact-left");o.container.classList.add("compact-right")}else{a.container.classList.add("compact-right");o.container.classList.add("compact-left")}}}const s=this.getColor(Ao);const n=this.getColor(_o);this.compactEntriesDisposable.value=new I;if(s&&n&&!To(this.theme.type)){for(const[,o]of i){for(const r of o.values()){if(!r.hasCommand){continue}this.compactEntriesDisposable.value.add(M(r.labelContainer,z.MOUSE_OVER,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor=s);r.labelContainer.style.backgroundColor=n}));this.compactEntriesDisposable.value.add(M(r.labelContainer,z.MOUSE_OUT,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor="")}))}}}}showContextMenu(t){nt.stop(t,true);const e=new Is(O(this.element),t);let i=void 0;this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>{i=this.getContextMenuActions(e);return i},onHide:()=>{if(i){ko(i)}}})}getContextMenuActions(t){const e=[];e.push(we({id:qi.ID,label:f(3020,"Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(n=>new qi().run(n))}));e.push(new Yt);const i=new Set;for(const n of this.viewModel.entries){if(!i.has(n.id)){e.push(new Gr(n.id,n.name,this.viewModel));i.add(n.id)}}let s=void 0;for(let n=t.target;n;n=n.parentElement){const o=this.viewModel.findEntry(n);if(o){s=o;break}}if(s){e.push(new Yt);e.push(new Wr(s.id,s.name,this.viewModel))}return e}updateStyles(){super.updateStyles();const t=Y(this.getContainer());const e=[...this.styleOverrides].sort((a,c)=>a.priority-c.priority)[0];const i=this.getColor(e?.background??(this.contextService.getWorkbenchState()!==1?No:xo))||"";t.style.backgroundColor=i;const s=this.getColor(e?.foreground??(this.contextService.getWorkbenchState()!==1?Mo:Vo))||"";t.style.color=s;const n=this.getColor(Bo);const o=this.getColor(e?.border??(this.contextService.getWorkbenchState()!==1?Po:Lo))||this.getColor(Ro);if(o){t.classList.add("status-border-top");t.style.setProperty("--status-border-top-color",o)}else{t.classList.remove("status-border-top");t.style.removeProperty("--status-border-top-color")}const r=this.getColor(Oo);if(!this.styleElement){this.styleElement=zo(t)}this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${r};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(Ho)??n};
					outline-offset: ${o?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${i};
				}
			`}layout(t,e,i,s){super.layout(t,e,i,s);super.layoutContents(t,e)}overrideStyle(t){this.styleOverrides.add(t);this.updateStyles();return ot(()=>{this.styleOverrides.delete(t);this.updateStyles()})}toJSON(){return{type:"workbench.parts.statusbar"}}dispose(){this._onWillDispose.fire();super.dispose()}};qt=me=v([l(1,E),l(2,U),l(3,Le),l(4,$),l(5,W),l(6,et),l(7,at)],qt);let pi=class Aa extends qt{constructor(t,e,i,s,n,o,r){super("workbench.parts.statusbar",t,e,i,s,n,o,r)}};pi=v([l(0,E),l(1,U),l(2,Le),l(3,$),l(4,W),l(5,et),l(6,at)],pi);let wi=class _a extends qt{static{gi=this}static{this.COUNTER=1}constructor(t,e,i,s,n,o,r,a){const c=gi.COUNTER++;super(`workbench.parts.auxiliaryStatus.${c}`,e,i,s,n,o,r,a);this.container=t;this.height=qt.HEIGHT}};wi=gi=v([l(1,E),l(2,U),l(3,Le),l(4,$),l(5,W),l(6,et),l(7,at)],wi);let vi=class Ta extends ys{constructor(t,e,i){super("workbench.statusBarService",i,e);this.instantiationService=t;this.mainPart=this._register(this.instantiationService.createInstance(pi));this._onDidCreateAuxiliaryStatusbarPart=this._register(new w);this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event;this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility;this._register(this.registerPart(this.mainPart))}createAuxiliaryStatusbarPart(t){const e=document.createElement("footer");e.classList.add("part","statusbar");e.setAttribute("role","status");e.style.position="relative";e.setAttribute("aria-live","off");e.setAttribute("tabindex","0");t.appendChild(e);const i=this.instantiationService.createInstance(wi,e);const s=this.registerPart(i);i.create(e);X.once(i.onWillDispose)(()=>s.dispose());this._onDidCreateAuxiliaryStatusbarPart.fire(i);return i}createScoped(t,e){return e.add(this.instantiationService.createInstance(Ci,t))}addEntry(t,e,i,s=0){if(t.showInAllWindows){return this.doAddEntryToAllWindows(t,e,i,s)}return this.mainPart.addEntry(t,e,i,s)}doAddEntryToAllWindows(t,e,i,s=0){const n=new I;const o=new Set;function r(a){const c=new I;c.add(a.onWillDispose(()=>c.dispose()));const u=c.add(a.addEntry(t,e,i,s));o.add(u);c.add(ot(()=>o.delete(u)));n.add(c);c.add(ot(()=>n.delete(c)))}for(const a of this.parts){r(a)}n.add(this.onDidCreateAuxiliaryStatusbarPart(a=>r(a)));return{update:a=>{for(const c of o){c.update(a)}},dispose:()=>n.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,e){for(const i of this.parts){i.updateEntryVisibility(t,e)}}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){const e=new I;for(const i of this.parts){e.add(i.overrideStyle(t))}return e}};vi=v([l(0,E),l(1,$),l(2,U)],vi);let Ci=class ka extends P{constructor(t,e){super();this.statusbarEntryContainer=t;this.statusbarService=e;this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,e){return this.statusbarService.createScoped(t,e)}getPart(){return this.statusbarEntryContainer}addEntry(t,e,i,s=0){return this.statusbarEntryContainer.addEntry(t,e,i,s)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,e){this.statusbarEntryContainer.updateEntryVisibility(t,e)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};Ci=v([l(1,ct)],Ci);function Kr(d){const t=d;return typeof t.id==="string"&&t.id.length>0&&typeof t.name==="string"&&typeof t.text==="string"&&(t.alignment==="left"||t.alignment==="right")&&(t.command===void 0||typeof t.command==="string")&&(t.tooltip===void 0||typeof t.tooltip==="string")&&(t.priority===void 0||typeof t.priority==="number")&&(t.accessibilityInformation===void 0||Zo(t.accessibilityInformation))}const is={type:"object",required:["id","text","alignment","name"],properties:{id:{type:"string",markdownDescription:f(3021,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:"string",description:f(3022,"The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.")},text:{type:"string",description:f(3023,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:"string",description:f(3024,"The tooltip text for the entry.")},command:{type:"string",description:f(3025,"The command to execute when the status bar entry is clicked.")},alignment:{type:"string",enum:["left","right"],description:f(3026,"The alignment of the status bar entry.")},priority:{type:"number",description:f(3027,"The priority of the status bar entry. Higher value means the item should be shown more to the left.")},accessibilityInformation:{type:"object",description:f(3028,"Defines the role and aria label to be used when the status bar entry is focused."),properties:{role:{type:"string",description:f(3029,"The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles")},label:{type:"string",description:f(3030,"The aria label of the status bar entry. Defaults to the entry's text.")}}}}};const Zr={description:f(3031,"Contributes items to the status bar."),oneOf:[is,{type:"array",items:is}]};const ss=Fo.registerExtensionPoint({extensionPoint:"statusBarItems",jsonSchema:Zr});let yi=class Na{constructor(t){const e=new I;ss.setHandler(i=>{e.clear();for(const s of i){if(!Wo(s.description,"contribStatusBarItems")){s.collector.error(`The ${ss.name} is proposed API`);continue}const{value:n,collector:o}=s;for(const r of Uo.wrap(n)){if(!Kr(r)){o.error(f(3032,"Invalid status bar item contribution."));continue}const a=jo(s.description.identifier,r.id);const c=t.setOrUpdateEntry(a,a,Ko.toKey(s.description.identifier),r.name??s.description.displayName??s.description.name,r.text,r.tooltip,r.command?{id:r.command,title:r.name}:void 0,void 0,void 0,r.alignment==="left",r.priority,r.accessibilityInformation);if(c===0){e.add(ot(()=>t.unsetEntry(a)))}}}})}};yi=v([l(0,_s)],yi);let xe=class xa{static{this.ID="workbench.contrib.statusBarItemsExtensionPoint"}constructor(t){this.instantiationService=t;this.instantiationService.createInstance(yi)}};xe=v([l(0,E)],xe);Go(xe.ID,xe,1);function Yr(){return{[ct.toString()]:new wt(vi,[],false),[_s.toString()]:new wt(Yo,[],false)}}var Xr='.monaco-workbench .part.banner{background-color:var(--vscode-banner-background);box-sizing:border-box;color:var(--vscode-banner-foreground);cursor:default;display:flex;font-size:12px;height:100%;overflow:visible;width:100%}.monaco-workbench .part.banner .icon-container{align-items:center;display:flex;flex-shrink:0;padding:0 6px 0 10px}.monaco-workbench .part.banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-workbench .part.banner .icon-container.custom-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px;margin:0 6px 0 10px;padding:0;width:16px}.monaco-workbench .part.banner .message-container{line-height:26px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part.banner .message-container a{color:var(--vscode-banner-foreground)}.monaco-workbench .part.banner .message-container p{margin-block-end:0;margin-block-start:0}.monaco-workbench .part.banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px}.monaco-workbench .part.banner .message-actions-container a{color:var(--vscode-banner-foreground);cursor:pointer;margin-left:12px;padding:3px;text-decoration:underline}.monaco-workbench .part.banner .message-container a{cursor:pointer;text-decoration:underline}.monaco-workbench .part.banner .action-container{padding:0 10px 0 6px}.monaco-workbench .part.banner .action-container .codicon{color:var(--vscode-banner-foreground)}';St(Xr,{});let Si=class Ma extends Re{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(t,e,i,s,n){super("workbench.parts.banner",{hasTitle:false},t,i,e);this.contextKeyService=s;this.instantiationService=n;this.height=26;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this._onDidChangeSize=this._register(new w);this.visible=false;this.focusedActionIndex=-1;this.markdownRenderer=this.instantiationService.createInstance(Xo,{})}createContentArea(t){this.element=t;this.element.tabIndex=0;this._register(M(this.element,z.FOCUS,()=>{if(this.focusedActionIndex!==-1){this.focusActionLink()}}));const e=this._register(this.contextKeyService.createScoped(this.element));Oe.bindTo(e).set(true);return this.element}close(t){this.setVisibility(false);vt(this.element);if(typeof t.onClose==="function"){t.onClose()}this.item=void 0}focusActionLink(){const t=this.item?.actions?.length??0;if(this.focusedActionIndex<t){const e=this.messageActionsContainer?.children[this.focusedActionIndex];if(Ss(e)){this.actionBar?.setFocusable(false);e.focus()}}else{this.actionBar?.focus(0)}}getAriaLabel(t){if(t.ariaLabel){return t.ariaLabel}if(typeof t.message==="string"){return t.message}return void 0}getBannerMessage(t){if(typeof t==="string"){const e=_("span");e.innerText=t;return e}return this.markdownRenderer.render(t).element}setVisibility(t){if(t!==this.visible){this.visible=t;this.focusedActionIndex=-1;this.layoutService.setPartHidden(!t,"workbench.parts.banner");this._onDidChangeSize.fire(void 0)}}focus(){this.focusedActionIndex=-1;this.element.focus()}focusNextAction(){const t=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex<t?this.focusedActionIndex+1:0;this.focusActionLink()}focusPreviousAction(){const t=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:t;this.focusActionLink()}hide(t){if(this.item?.id!==t){return}this.setVisibility(false)}show(t){if(t.id===this.item?.id){this.setVisibility(true);return}vt(this.element);const e=this.getAriaLabel(t);if(e){this.element.setAttribute("aria-label",e)}const i=F(this.element,_("div.icon-container"));i.setAttribute("aria-hidden","true");if(T.isThemeIcon(t.icon)){i.appendChild(_(`div${T.asCSSSelector(t.icon)}`))}else{i.classList.add("custom-icon");if(Pe.isUri(t.icon)){i.style.backgroundImage=$o(t.icon)}}const s=F(this.element,_("div.message-container"));s.setAttribute("aria-hidden","true");s.appendChild(this.getBannerMessage(t.message));this.messageActionsContainer=F(this.element,_("div.message-actions-container"));if(t.actions){for(const a of t.actions){this._register(this.instantiationService.createInstance(Qo,this.messageActionsContainer,{...a,tabIndex:-1},{}))}}const n=F(this.element,_("div.action-container"));this.actionBar=this._register(new Ni(n));const o=t.closeLabel??"Close Banner";const r=this._register(new G("banner.close",o,T.asClassName(qo),true,()=>this.close(t)));this.actionBar.push(r,{icon:true,label:false});this.actionBar.setFocusable(false);this.setVisibility(true);this.item=t}toJSON(){return{type:"workbench.parts.banner"}}};Si=v([l(0,U),l(1,W),l(2,$),l(3,at),l(4,E)],Si);S.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:200,primary:9,when:Oe,handler:d=>{const t=d.get(Dt);t.focus()}});S.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:200,primary:17,secondary:[18],when:Oe,handler:d=>{const t=d.get(Dt);t.focusNextAction()}});S.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:200,primary:15,secondary:[16],when:Oe,handler:d=>{const t=d.get(Dt);t.focusPreviousAction()}});class Me extends Ri{static{this.ID="workbench.action.focusBanner"}static{this.LABEL=q(3019,"Focus Banner")}constructor(){super({id:Me.ID,title:Me.LABEL,category:Oi.View,f1:true})}async run(t){const e=t.get(W);e.focusPart("workbench.parts.banner")}}Li(Me);var be;let Ii=class Va{static{be=this}static{this.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed"}constructor(t,e,i){const s=i.options?.welcomeBanner;if(!s){return}if(e.getBoolean(be.WELCOME_BANNER_DISMISSED_KEY,0,false)){return}let n=void 0;if(typeof s.icon==="string"){n=T.fromId(s.icon)}else if(s.icon){n=Pe.revive(s.icon)}t.show({id:"welcome.banner",message:s.message,icon:n,actions:s.actions,onClose:()=>{e.store(be.WELCOME_BANNER_DISMISSED_KEY,true,0,1)}})}};Ii=be=v([l(0,Dt),l(1,$),l(2,te)],Ii);zi.as(Jo.Workbench).registerWorkbenchContribution(Ii,3);function $r(){return{[Dt.toString()]:new wt(Si,[],false)}}Es(async d=>{d.get(Dt)});zi.as(Ts.ViewContainersRegistry);zi.as(Ts.ViewsRegistry);let Ei=class Ba extends Or{constructor(t,e,i){super(hr(),t,new dr,e);this.instantiationService=i;this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(t){ws(e=>this.handleUnexpectedError(e,t))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(t){ce(t)}}};Ei=v([l(1,bs),l(2,E)],Ei);const ns=tr(p);er(ns!=null&&!ns.guess,p);ir(async d=>{d.get(W).startup()});sr(async d=>{d.get(E).createInstance(nr)});function Pa(d,t){return{...or(t),...rr({isKeybindingConfigurationVisible:()=>true,shouldUseGlobalPicker:()=>true}),...ar({shouldUseGlobalKeybindings:()=>true}),[W.toString()]:new wt(Ei,[d],false),[ut.toString()]:new wt(cr,[],false),[Lt.toString()]:new wt(lr,[void 0],false),...Hr(),...Yr(),...$r()}}export{Oa as AbstractResourceEditorInput,za as AbstractTextResourceEditorInput,Ha as ConfirmResult,Fa as DomScrollableElement,Ga as EditorInput,Wa as EditorInputCapabilities,Ua as Parts,ja as RegisteredEditorPriority,Ka as SplitView,Za as ViewContainerLocation,Ya as ViewPaneContainer,Pa as default};
