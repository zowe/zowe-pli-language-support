import{ac as D,ad as me,C as B,ae as Ye,af as Qe,ag as yo,ah as So,ai as Io,aj as bo,ak as Eo,al as ko,am as wo,an as _o,ao as Ro,ap as xo,aq as vo,ar as Do,as as Oo,R as q,at as Wt,au as Re,av as Ze,aw as b,ax as Mo,ay as rt,az as Lo,aA as at,l as r,aB as ct,aC as lt,aD as W,aE as Oe,aF as Ho,E as ht,aG as Ee,p as Ae,aH as dt,aI as Po,H as Vt,aJ as ut,D as Jt,aK as Fo,b as pe,aL as bt,aM as Ao,aN as ft,aO as Y,aP as Et,aQ as Xe,aR as No,aS as $o,_ as Ne,c as E,aT as Bo,aU as Yt,f as Qt,aV as Zt,aW as jo,e as Go,aX as mt,aY as Uo,aZ as Xt,a_ as Ko,a$ as zo,U as qo,b0 as Ke,b1 as kt,b2 as Me,b3 as eo,b4 as Wo,a as Vo,b5 as Jo,b6 as wt,b7 as Yo,b8 as _t,b9 as Qo,ba as et,bb as gt,bc as Zo,bd as to,be as Xo,bf as oo,bg as en,d as Se,bh as ie,bi as se,bj as re,bk as ae,bl as tn,bm as V,bn as no,bo as Rt,bp as xt,a6 as on,bq as nn,br as vt,K as sn,bs as io,bt as tt,bu as pt,bv as Ie,bw as rn,k as an,bx as cn,by as ln,bz as hn,bA as dn,bB as so,bC as un,bD as fn}from"./index-C4-JMhC-.js";import{T as Le,p as Dt,S as Ot,g as mn,t as ro}from"./tokenClassificationRegistry-3n3yapB-.js";const $e="vs";const He="vs-dark";const Be="hc-black";const je="hc-light";const gn="[";const pn="]";const ke="*";const Tn=/\[(.+?)\]/g;var y;(function(s){s["COLOR_THEME"]="workbench.colorTheme";s["FILE_ICON_THEME"]="workbench.iconTheme";s["PRODUCT_ICON_THEME"]="workbench.productIconTheme";s["COLOR_CUSTOMIZATIONS"]="workbench.colorCustomizations";s["TOKEN_COLOR_CUSTOMIZATIONS"]="editor.tokenColorCustomizations";s["SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS"]="editor.semanticTokenColorCustomizations";s["PREFERRED_DARK_THEME"]="workbench.preferredDarkColorTheme";s["PREFERRED_LIGHT_THEME"]="workbench.preferredLightColorTheme";s["PREFERRED_HC_DARK_THEME"]="workbench.preferredHighContrastColorTheme";s["PREFERRED_HC_LIGHT_THEME"]="workbench.preferredHighContrastLightColorTheme";s["DETECT_COLOR_SCHEME"]="window.autoDetectColorScheme";s["DETECT_HC"]="window.autoDetectHighContrast";s["SYSTEM_COLOR_THEME"]="window.systemColorTheme"})(y||(y={}));var w;(function(s){s["COLOR_THEME_DARK"]="Default Dark Modern";s["COLOR_THEME_LIGHT"]="Default Light Modern";s["COLOR_THEME_HC_DARK"]="Default High Contrast";s["COLOR_THEME_HC_LIGHT"]="Default High Contrast Light";s["COLOR_THEME_DARK_OLD"]="Default Dark+";s["COLOR_THEME_LIGHT_OLD"]="Default Light+";s["FILE_ICON_THEME"]="vs-seti";s["PRODUCT_ICON_THEME"]="Default"})(w||(w={}));const Cn={"activityBar.activeBorder":"#0078d4","activityBar.background":"#181818","activityBar.border":"#2b2b2b","activityBar.foreground":"#d7d7d7","activityBar.inactiveForeground":"#868686","editorGroup.border":"#ffffff17","editorGroupHeader.tabsBackground":"#181818","editorGroupHeader.tabsBorder":"#2b2b2b","statusBar.background":"#181818","statusBar.border":"#2b2b2b","statusBar.foreground":"#cccccc","statusBar.noFolderBackground":"#1f1f1f","tab.activeBackground":"#1f1f1f","tab.activeBorder":"#1f1f1f","tab.activeBorderTop":"#0078d4","tab.activeForeground":"#ffffff","tab.border":"#2b2b2b","textLink.foreground":"#4daafc","titleBar.activeBackground":"#181818","titleBar.activeForeground":"#cccccc","titleBar.border":"#2b2b2b","titleBar.inactiveBackground":"#1f1f1f","titleBar.inactiveForeground":"#9d9d9d","welcomePage.tileBackground":"#2b2b2b"};const yn={"activityBar.activeBorder":"#005FB8","activityBar.background":"#f8f8f8","activityBar.border":"#e5e5e5","activityBar.foreground":"#1f1f1f","activityBar.inactiveForeground":"#616161","editorGroup.border":"#e5e5e5","editorGroupHeader.tabsBackground":"#f8f8f8","editorGroupHeader.tabsBorder":"#e5e5e5","statusBar.background":"#f8f8f8","statusBar.border":"#e5e5e5","statusBar.foreground":"#3b3b3b","statusBar.noFolderBackground":"#f8f8f8","tab.activeBackground":"#ffffff","tab.activeBorder":"#f8f8f8","tab.activeBorderTop":"#005fb8","tab.activeForeground":"#3b3b3b","tab.border":"#e5e5e5","textLink.foreground":"#005fb8","titleBar.activeBackground":"#f8f8f8","titleBar.activeForeground":"#1e1e1e","titleBar.border":"#E5E5E5","titleBar.inactiveBackground":"#f8f8f8","titleBar.inactiveForeground":"#8b949e","welcomePage.tileBackground":"#f3f3f3"};var N;(function(s){function e(n){return n&&{_extensionId:n.extensionId,_extensionIsBuiltin:n.extensionIsBuiltin,_extensionName:n.extensionName,_extensionPublisher:n.extensionPublisher}}s.toJSONObject=e;function t(n){if(n&&D(n._extensionId)&&me(n._extensionIsBuiltin)&&D(n._extensionName)&&D(n._extensionPublisher)){return{extensionId:n._extensionId,extensionIsBuiltin:n._extensionIsBuiltin,extensionName:n._extensionName,extensionPublisher:n._extensionPublisher}}return void 0}s.fromJSONObject=t;function o(n,i,a=false){return{extensionPublisher:n,extensionId:`${n}.${i}`,extensionName:i,extensionIsBuiltin:a}}s.fromName=o})(N||(N={}));const ot={};function O(s,e){let t=ot[s];if(!t){ot[s]=t=[]}t.push(e)}function ao(s,e){for(const t of s){e.textMateRules.push(t);if(!t.scope){const o=t.settings;if(!o){t.settings={}}else{for(const n in o){const i=n;const a=ot[i];if(a){const l=o[i];if(typeof l==="string"){const c=B.fromHex(l);for(const h of a){e.colors[h]=c}}}if(i!=="foreground"&&i!=="background"&&i!=="fontStyle"){delete o[i]}}}}}}O("background",Ye);O("foreground",Qe);O("selection",yo);O("inactiveSelection",So);O("selectionHighlightColor",Io);O("findMatchHighlight",bo);O("currentFindMatchHighlight",Eo);O("hoverHighlight",ko);O("wordHighlight","editor.wordHighlightBackground");O("wordHighlightStrong","editor.wordHighlightStrongBackground");O("findRangeHighlight",wo);O("findMatchHighlight","peekViewResult.matchHighlightBackground");O("referenceHighlight","peekViewEditor.matchHighlightBackground");O("lineHighlight",_o);O("rangeHighlight",Ro);O("caret",xo);O("invisibles",vo);O("guide",Do);O("activeGuide",Oo);const Sn=["ansiBlack","ansiRed","ansiGreen","ansiYellow","ansiBlue","ansiMagenta","ansiCyan","ansiWhite","ansiBrightBlack","ansiBrightRed","ansiBrightGreen","ansiBrightYellow","ansiBrightBlue","ansiBrightMagenta","ansiBrightCyan","ansiBrightWhite"];for(const s of Sn){O(s,"terminal."+s)}function In(s){return bn(s)}function bn(s,e,t){const o=s.length;let n=0;if(o>0&&s.charCodeAt(0)===65279){n=1}function i(g){{n=n+g}}function a(g){{n=g}}function l(){while(n<o){const g=s.charCodeAt(n);if(g!==32&&g!==9&&g!==13&&g!==10){break}i(1)}}function c(g){if(s.substr(n,g.length)===g){i(g.length);return true}return false}function h(g){const x=s.indexOf(g,n);if(x!==-1){a(x+g.length)}else{a(o)}}function d(g){const x=s.indexOf(g,n);if(x!==-1){const v=s.substring(n,x);a(x+g.length);return v}else{const v=s.substr(n);a(o);return v}}let f=0;let u=null;const m=[];const S=[];let p=null;function T(g,x){m.push(f);S.push(u);f=g;u=x}function k(){if(m.length===0){return C("illegal state stack")}f=m.pop();u=S.pop()}function C(g){throw new Error("Near offset "+n+": "+g+" ~~~"+s.substr(n,50)+"~~~")}const I={enterDict:function(){if(p===null){return C("missing <key>")}const g={};u[p]=g;p=null;T(1,g)},enterArray:function(){if(p===null){return C("missing <key>")}const g=[];u[p]=g;p=null;T(2,g)}};const M={enterDict:function(){const g={};u.push(g);T(1,g)},enterArray:function(){const g=[];u.push(g);T(2,g)}};function $(){if(f===1){I.enterDict()}else if(f===2){M.enterDict()}else{u={};T(1,u)}}function A(){if(f===1){k()}else if(f===2){return C("unexpected </dict>")}else{return C("unexpected </dict>")}}function le(){if(f===1){I.enterArray()}else if(f===2){M.enterArray()}else{u=[];T(2,u)}}function te(){if(f===1){return C("unexpected </array>")}else if(f===2){k()}else{return C("unexpected </array>")}}function he(g){if(f===1){if(p!==null){return C("too many <key>")}p=g}else if(f===2){return C("unexpected <key>")}else{return C("unexpected <key>")}}function de(g){if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function K(g){if(isNaN(g)){return C("cannot parse float")}if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function ue(g){if(isNaN(g)){return C("cannot parse integer")}if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function fe(g){if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function R(g){if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function _(g){if(f===1){if(p===null){return C("missing <key>")}u[p]=g;p=null}else if(f===2){u.push(g)}else{u=g}}function j(g){return g.replace(/&#([0-9]+);/g,function(x,v){return String.fromCodePoint(parseInt(v,10))}).replace(/&#x([0-9a-f]+);/g,function(x,v){return String.fromCodePoint(parseInt(v,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(x){switch(x){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return x})}function z(){let g=d(">");let x=false;if(g.charCodeAt(g.length-1)===47){x=true;g=g.substring(0,g.length-1)}return{name:g.trim(),isClosed:x}}function L(g){if(g.isClosed){return""}const x=d("</");h(">");return j(x)}while(n<o){l();if(n>=o){break}const g=s.charCodeAt(n);i(1);if(g!==60){return C("expected <")}if(n>=o){return C("unexpected end of input")}const x=s.charCodeAt(n);if(x===63){i(1);h("?>");continue}if(x===33){i(1);if(c("--")){h("-->");continue}h(">");continue}if(x===47){i(1);l();if(c("plist")){h(">");continue}if(c("dict")){h(">");A();continue}if(c("array")){h(">");te();continue}return C("unexpected closed tag")}const v=z();switch(v.name){case"dict":$();if(v.isClosed){A()}continue;case"array":le();if(v.isClosed){te()}continue;case"key":he(L(v));continue;case"string":de(L(v));continue;case"real":K(parseFloat(L(v)));continue;case"integer":ue(parseInt(L(v),10));continue;case"date":fe(new Date(L(v)));continue;case"data":R(L(v));continue;case"true":L(v);_(true);continue;case"false":L(v);_(false);continue}if(/^plist/.test(v.name)){continue}return C("unexpected opened tag "+v.name)}return u}function Mt(s,e,t){const o=En(s);let n=o.next();while(n!==null){let c=0;if(n.length===2&&n.charAt(1)===":"){switch(n.charAt(0)){case"R":c=1;break;case"L":c=-1;break;default:console.log(`Unknown priority ${n} in scope selector`)}n=o.next()}const h=a();if(h){t.push({matcher:h,priority:c})}if(n!==","){break}n=o.next()}function i(){if(n==="-"){n=o.next();const c=i();if(!c){return null}return h=>{const d=c(h);return d<0?0:-1}}if(n==="("){n=o.next();const c=l();if(n===")"){n=o.next()}return c}if(Lt(n)){const c=[];do{c.push(n);n=o.next()}while(Lt(n));return h=>e(c,h)}return null}function a(){let c=i();if(!c){return null}const h=[];while(c){h.push(c);c=i()}return d=>{let f=h[0](d);for(let u=1;f>=0&&u<h.length;u++){f=Math.min(f,h[u](d))}return f}}function l(){let c=a();if(!c){return null}const h=[];while(c){h.push(c);if(n==="|"||n===","){do{n=o.next()}while(n==="|"||n===",")}else{break}c=a()}return d=>{let f=h[0](d);for(let u=1;u<h.length;u++){f=Math.max(f,h[u](d))}return f}}}function Lt(s){return!!s&&!!s.match(/[\w\.:]+/)}function En(s){const e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g;let t=e.exec(s);return{next:()=>{if(!t){return null}const o=t[0];t=e.exec(s);return o}}}const kn=q.as(Wt.ColorContribution);const xe=mn();const Ht={comments:["comment","punctuation.definition.comment"],strings:["string","meta.embedded.assembly"],keywords:["keyword - keyword.operator","keyword.control","storage","storage.type"],numbers:["constant.numeric"],types:["entity.name.type","entity.name.class","support.type","support.class"],functions:["entity.name.function","support.function"],variables:["variable","entity.name.variable"]};class F{static{this.STORAGE_KEY="colorThemeData"}constructor(e,t,o){this.themeTokenColors=[];this.customTokenColors=[];this.colorMap={};this.customColorMap={};this.semanticTokenRules=[];this.customSemanticTokenRules=[];this.textMateThemingRules=void 0;this.tokenColorIndex=void 0;this.id=e;this.label=t;this.settingsId=o;this.isLoaded=false}get semanticHighlighting(){if(this.customSemanticHighlighting!==void 0){return this.customSemanticHighlighting}if(this.customSemanticHighlightingDeprecated!==void 0){return this.customSemanticHighlightingDeprecated}return!!this.themeSemanticHighlighting}get tokenColors(){if(!this.textMateThemingRules){let i=function(a){if(a.scope&&a.settings){if(a.scope==="token.info-token"){n=true}e.push({scope:a.scope,settings:{foreground:oe(a.settings.foreground),background:oe(a.settings.background),fontStyle:a.settings.fontStyle}})}};const e=[];const t=this.getColor(Qe)||this.getDefault(Qe);const o=this.getColor(Ye)||this.getDefault(Ye);e.push({settings:{foreground:oe(t),background:oe(o)}});let n=false;this.themeTokenColors.forEach(i);this.customTokenColors.forEach(i);if(!n){_n[this.type].forEach(i)}this.textMateThemingRules=e}return this.textMateThemingRules}getColor(e,t){const o=this.customColorMap[e];if(o instanceof B){return o}if(o===void 0){const n=this.colorMap[e];if(n!==void 0){return n}}if(t!==false){return this.getDefault(e)}return void 0}getTokenStyle(e,t,o,n=true,i={}){const a={foreground:void 0,bold:void 0,underline:void 0,strikethrough:void 0,italic:void 0};const l={foreground:-1,bold:-1,underline:-1,strikethrough:-1,italic:-1};function c(f,u,m){if(u.foreground&&l.foreground<=f){l.foreground=f;a.foreground=u.foreground;i.foreground=m}for(const S of["bold","underline","strikethrough","italic"]){const p=S;const T=u[p];if(T!==void 0){if(l[p]<=f){l[p]=f;a[p]=T;i[p]=m}}}}function h(f){const u=f.selector.match(e,t,o);if(u>=0){c(u,f.style,f)}}this.semanticTokenRules.forEach(h);this.customSemanticTokenRules.forEach(h);let d=false;for(const f in l){const u=f;if(l[u]===-1){d=true}else{l[u]=Number.MAX_VALUE}}if(d){for(const f of xe.getTokenStylingDefaultRules()){const u=f.selector.match(e,t,o);if(u>=0){let m;if(f.defaults.scopesToProbe){m=this.resolveScopes(f.defaults.scopesToProbe);if(m){c(u,m,f.defaults.scopesToProbe)}}if(!m&&n!==false){const S=f.defaults[this.type];m=this.resolveTokenStyleValue(S);if(m){c(u,m,S)}}}}}return Le.fromData(a)}resolveTokenStyleValue(e){if(e===void 0){return void 0}else if(typeof e==="string"){const{type:t,modifiers:o,language:n}=Dt(e,"");return this.getTokenStyle(t,o,n)}else if(typeof e==="object"){return e}return void 0}getTokenColorIndex(){if(!this.tokenColorIndex){const e=new vn;this.tokenColors.forEach(t=>{e.add(t.settings.foreground);e.add(t.settings.background)});this.semanticTokenRules.forEach(t=>e.add(t.style.foreground));xe.getTokenStylingDefaultRules().forEach(t=>{const o=t.defaults[this.type];if(o&&typeof o==="object"){e.add(o.foreground)}});this.customSemanticTokenRules.forEach(t=>e.add(t.style.foreground));this.tokenColorIndex=e}return this.tokenColorIndex}get tokenColorMap(){return this.getTokenColorIndex().asArray()}getTokenStyleMetadata(e,t,o,n=true,i={}){const{type:a,language:l}=Dt(e,o);const c=this.getTokenStyle(a,t,l,n,i);if(!c){return void 0}return{foreground:this.getTokenColorIndex().get(c.foreground),bold:c.bold,underline:c.underline,strikethrough:c.strikethrough,italic:c.italic}}getTokenStylingRuleScope(e){if(this.customSemanticTokenRules.indexOf(e)!==-1){return"setting"}if(this.semanticTokenRules.indexOf(e)!==-1){return"theme"}return void 0}getDefault(e){return kn.resolveDefaultColor(e,this)}resolveScopes(e,t){if(!this.themeTokenScopeMatchers){this.themeTokenScopeMatchers=this.themeTokenColors.map(Nt)}if(!this.customTokenScopeMatchers){this.customTokenScopeMatchers=this.customTokenColors.map(Nt)}for(const o of e){let d=function(f,u){for(let m=0;m<f.length;m++){const S=f[m](o);if(S>=0){const p=u[m];const T=u[m].settings;if(S>=a&&T.foreground){n=T.foreground;a=S;h=p}if(S>=l&&D(T.fontStyle)){i=T.fontStyle;l=S;c=p}}}};let n=void 0;let i=void 0;let a=-1;let l=-1;let c=void 0;let h=void 0;d(this.themeTokenScopeMatchers,this.themeTokenColors);d(this.customTokenScopeMatchers,this.customTokenColors);if(n!==void 0||i!==void 0){if(t){t.foreground=h;t.bold=t.italic=t.underline=t.strikethrough=c;t.scope=o}return Le.fromSettings(n,i)}}return void 0}defines(e){const t=this.customColorMap[e];if(t instanceof B){return true}return t===void 0&&this.colorMap.hasOwnProperty(e)}setCustomizations(e){this.setCustomColors(e.colorCustomizations);this.setCustomTokenColors(e.tokenColorCustomizations);this.setCustomSemanticTokenColors(e.semanticTokenColorCustomizations)}setCustomColors(e){this.customColorMap={};this.overwriteCustomColors(e);const t=this.getThemeSpecificColors(e);if(Re(t)){this.overwriteCustomColors(t)}this.tokenColorIndex=void 0;this.textMateThemingRules=void 0;this.customTokenScopeMatchers=void 0}overwriteCustomColors(e){for(const t in e){const o=e[t];if(o===Ze){this.customColorMap[t]=Ze}else if(typeof o==="string"){this.customColorMap[t]=B.fromHex(o)}}}setCustomTokenColors(e){this.customTokenColors=[];this.customSemanticHighlightingDeprecated=void 0;this.addCustomTokenColors(e);const t=this.getThemeSpecificColors(e);if(Re(t)){this.addCustomTokenColors(t)}this.tokenColorIndex=void 0;this.textMateThemingRules=void 0;this.customTokenScopeMatchers=void 0}setCustomSemanticTokenColors(e){this.customSemanticTokenRules=[];this.customSemanticHighlighting=void 0;if(e){this.customSemanticHighlighting=e.enabled;if(e.rules){this.readSemanticTokenRules(e.rules)}const t=this.getThemeSpecificColors(e);if(Re(t)){if(t.enabled!==void 0){this.customSemanticHighlighting=t.enabled}if(t.rules){this.readSemanticTokenRules(t.rules)}}}this.tokenColorIndex=void 0;this.textMateThemingRules=void 0}isThemeScope(e){return e.charAt(0)===gn&&e.charAt(e.length-1)===pn}isThemeScopeMatch(e){const t=e.charAt(0);const o=e.charAt(e.length-1);const n=e.slice(0,-1);const i=e.slice(1,-1);const a=e.slice(1);return e===this.settingsId||this.settingsId.includes(i)&&t===ke&&o===ke||this.settingsId.startsWith(n)&&o===ke||this.settingsId.endsWith(a)&&t===ke}getThemeSpecificColors(e){let t;for(const o in e){const n=e[o];if(this.isThemeScope(o)&&n instanceof Object&&!Array.isArray(n)){const i=o.match(Tn)||[];for(const a of i){const l=a.substring(1,a.length-1);if(this.isThemeScopeMatch(l)){if(!t){t={}}const c=n;for(const h in c){const d=t[h];const f=c[h];if(Array.isArray(d)&&Array.isArray(f)){t[h]=d.concat(f)}else if(f){t[h]=f}}}}}}return t}readSemanticTokenRules(e){for(const t in e){if(!this.isThemeScope(t)){try{const o=lo(t,e[t]);if(o){this.customSemanticTokenRules.push(o)}}catch(o){}}}}addCustomTokenColors(e){for(const t in Ht){const o=t;const n=e[o];if(n){const i=typeof n==="string"?{foreground:n}:n;const a=Ht[o];for(const l of a){this.customTokenColors.push({scope:l,settings:i})}}}if(Array.isArray(e.textMateRules)){for(const t of e.textMateRules){if(t.scope&&t.settings){this.customTokenColors.push(t)}}}if(e.semanticHighlighting!==void 0){this.customSemanticHighlightingDeprecated=e.semanticHighlighting}}ensureLoaded(e){return!this.isLoaded?this.load(e):Promise.resolve(void 0)}reload(e){return this.load(e)}load(e){if(!this.location){return Promise.resolve(void 0)}this.themeTokenColors=[];this.clearCaches();const t={colors:{},textMateRules:[],semanticTokenRules:[],semanticHighlighting:false};return co(e,this.location,t).then(o=>{this.isLoaded=true;this.semanticTokenRules=t.semanticTokenRules;this.colorMap=t.colors;this.themeTokenColors=t.textMateRules;this.themeSemanticHighlighting=t.semanticHighlighting})}clearCaches(){this.tokenColorIndex=void 0;this.textMateThemingRules=void 0;this.themeTokenScopeMatchers=void 0;this.customTokenScopeMatchers=void 0}toStorage(e){const t={};for(const n in this.colorMap){t[n]=B.Format.CSS.formatHexA(this.colorMap[n],true)}const o=JSON.stringify({id:this.id,label:this.label,settingsId:this.settingsId,themeTokenColors:this.themeTokenColors.map(n=>({settings:n.settings,scope:n.scope})),semanticTokenRules:this.semanticTokenRules.map(Ot.toJSONObject),extensionData:N.toJSONObject(this.extensionData),themeSemanticHighlighting:this.themeSemanticHighlighting,colorMap:t,watch:this.watch});e.store(F.STORAGE_KEY,o,0,0)}get baseTheme(){return this.classNames[0]}get classNames(){return this.id.split(" ")}get type(){switch(this.baseTheme){case $e:return b.LIGHT;case Be:return b.HIGH_CONTRAST_DARK;case je:return b.HIGH_CONTRAST_LIGHT;default:return b.DARK}}static createUnloadedThemeForThemeType(e,t){return F.createUnloadedTheme(Mo(e),t)}static createUnloadedTheme(e,t){const o=new F(e,"","__"+e);o.isLoaded=false;o.themeTokenColors=[];o.watch=false;if(t){for(const n in t){o.colorMap[n]=B.fromHex(t[n])}}return o}static createLoadedEmptyTheme(e,t){const o=new F(e,"",t);o.isLoaded=true;o.themeTokenColors=[];o.watch=false;return o}static fromStorageData(e){const t=e.get(F.STORAGE_KEY,0);if(!t){return void 0}try{const o=JSON.parse(t);const n=new F("","","");for(const i in o){switch(i){case"colorMap":{const a=o[i];for(const l in a){n.colorMap[l]=B.fromHex(a[l])}break}case"themeTokenColors":case"id":case"label":case"settingsId":case"watch":case"themeSemanticHighlighting":n[i]=o[i];break;case"semanticTokenRules":{const a=o[i];if(Array.isArray(a)){for(const l of a){const c=Ot.fromJSONObject(xe,l);if(c){n.semanticTokenRules.push(c)}}}break}case"location":break;case"extensionData":n.extensionData=N.fromJSONObject(o.extensionData);break}}if(!n.id||!n.settingsId){return void 0}return n}catch(o){return void 0}}static fromExtensionTheme(e,t,o){const n=e["uiTheme"]||"vs-dark";const i=wn(o.extensionId,e.path);const a=`${n} ${i}`;const l=e.label||rt(e.path);const c=e.id||l;const h=new F(a,l,c);h.description=e.description;h.watch=e._watch===true;h.location=t;h.extensionData=o;h.isLoaded=false;return h}}function wn(s,e){if(e.startsWith("./")){e=e.substr(2)}let t=`${s}-${e}`;t=t.replace(/[^_a-zA-Z0-9-]/g,"-");if(t.charAt(0).match(/[0-9-]/)){t="_"+t}return t}async function co(s,e,t){if(Lo(e)===".json"){const o=await s.readExtensionResource(e);const n=[];const i=at(o,n);if(n.length>0){return Promise.reject(new Error(r(6890,"Problems parsing JSON theme file: {0}",n.map(h=>ct(h.error)).join(", "))))}else if(lt(i)!=="object"){return Promise.reject(new Error(r(6891,"Invalid format for JSON theme file: Object expected.")))}if(i.include){await co(s,W(Oe(e),i.include),t)}if(Array.isArray(i.settings)){ao(i.settings,t);return null}t.semanticHighlighting=t.semanticHighlighting||i.semanticHighlighting;const a=i.colors;if(a){if(typeof a!=="object"){return Promise.reject(new Error(r(6892,"Problem parsing color theme file: {0}. Property 'colors' is not of type 'object'.",e.toString())))}for(const h in a){const d=a[h];if(d===Ze){delete t.colors[h]}else if(typeof d==="string"){t.colors[h]=B.fromHex(a[h])}}}const l=i.tokenColors;if(l){if(Array.isArray(l)){t.textMateRules.push(...l)}else if(typeof l==="string"){await Pt(s,W(Oe(e),l),t)}else{return Promise.reject(new Error(r(6893,"Problem parsing color theme file: {0}. Property 'tokenColors' should be either an array specifying colors or a path to a TextMate theme file",e.toString())))}}const c=i.semanticTokenColors;if(c&&typeof c==="object"){for(const h in c){try{const d=lo(h,c[h]);if(d){t.semanticTokenRules.push(d)}}catch(d){return Promise.reject(new Error(r(6894,"Problem parsing color theme file: {0}. Property 'semanticTokenColors' contains a invalid selector",e.toString())))}}}}else{return Pt(s,e,t)}}function Pt(s,e,t){return s.readExtensionResource(e).then(o=>{try{const n=In(o);const i=n.settings;if(!Array.isArray(i)){return Promise.reject(new Error(r(6895,"Problem parsing tmTheme file: {0}. 'settings' is not array.")))}ao(i,t);return Promise.resolve(null)}catch(n){return Promise.reject(new Error(r(6896,"Problems parsing tmTheme file: {0}",n.message)))}},o=>{return Promise.reject(new Error(r(6897,"Problems loading tmTheme file {0}: {1}",e.toString(),o.message)))})}const _n={"light":[{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}}],"dark":[{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}}],"hcLight":[{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}}],"hcDark":[{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#008000"}},{scope:"token.error-token",settings:{foreground:"#FF0000"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}}]};const Ft=s=>-1;function At(s,e){if(e.length<s.length){return-1}let t=0;let o=void 0;const n=s.every((i,a)=>{for(let l=t;l<e.length;l++){if(Rn(e[l],i)){o=(a+1)*65536+i.length;t=l+1;return true}}return false});return n&&o!==void 0?o:-1}function Rn(s,e){if(!s){return false}if(s===e){return true}const t=e.length;return s.length>t&&s.substr(0,t)===e&&s[t]==="."}function Nt(s){const e=s.scope;if(!e||!s.settings){return Ft}const t=[];if(Array.isArray(e)){for(const o of e){Mt(o,At,t)}}else{Mt(e,At,t)}if(t.length===0){return Ft}return o=>{let n=t[0].matcher(o);for(let i=1;i<t.length;i++){n=Math.max(n,t[i].matcher(o))}return n}}function lo(s,e){const t=xe.parseTokenSelector(s);let o;if(typeof e==="string"){o=Le.fromSettings(e,void 0)}else if(xn(e)){o=Le.fromSettings(e.foreground,e.fontStyle,e.bold,e.underline,e.strikethrough,e.italic)}if(o){return{selector:t,style:o}}return void 0}function xn(s){return s&&(D(s.foreground)||D(s.fontStyle)||me(s.italic)||me(s.underline)||me(s.strikethrough)||me(s.bold))}class vn{constructor(){this._lastColorId=0;this._id2color=[];this._color2id=Object.create(null)}add(e){e=oe(e);if(e===void 0){return 0}let t=this._color2id[e];if(t){return t}t=++this._lastColorId;this._color2id[e]=t;this._id2color[t]=e;return t}get(e){e=oe(e);if(e===void 0){return 0}const t=this._color2id[e];if(t){return t}console.log(`Color ${e} not in index.`);return 0}asArray(){return this._id2color.slice(0)}}function oe(s){if(!s){return void 0}if(typeof s!=="string"){s=B.Format.CSS.formatHexA(s,true)}const e=s.length;if(s.charCodeAt(0)!==35||e!==4&&e!==5&&e!==7&&e!==9){return void 0}const t=[35];for(let o=1;o<e;o++){const n=Dn(s.charCodeAt(o));if(!n){return void 0}t.push(n);if(e===4||e===5){t.push(n)}}if(t.length===9&&t[7]===70&&t[8]===70){t.length=7}return String.fromCharCode(...t)}function Dn(s){if(s>=48&&s<=57||s>=65&&s<=70){return s}else if(s>=97&&s<=102){return s-97+65}return 0}const Tt="^([\\w_-]+)$";const Ct="^(normal|italic|(oblique[ \\w\\s-]+))$";const yt="^(normal|bold|lighter|bolder|(\\d{0-1000}))$";const $t="^([\\w .%_-]+)$";const On="^woff|woff2|truetype|opentype|embedded-opentype|svg$";const Mn="vscode://schemas/product-icon-theme";const Ln={type:"object",allowComments:true,allowTrailingCommas:true,properties:{fonts:{type:"array",items:{type:"object",properties:{id:{type:"string",description:r(7016,"The ID of the font."),pattern:Tt,patternErrorMessage:r(7017,"The ID must only contain letters, numbers, underscore and minus.")},src:{type:"array",description:r(7018,"The location of the font."),items:{type:"object",properties:{path:{type:"string",description:r(7019,"The font path, relative to the current product icon theme file.")},format:{type:"string",description:r(7020,"The format of the font."),enum:["woff","woff2","truetype","opentype","embedded-opentype","svg"]}},required:["path","format"]}},weight:{type:"string",description:r(7021,"The weight of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight for valid values."),anyOf:[{enum:["normal","bold","lighter","bolder"]},{type:"string",pattern:yt}]},style:{type:"string",description:r(7022,"The style of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-style for valid values."),anyOf:[{enum:["normal","italic","oblique"]},{type:"string",pattern:Ct}]}},required:["id","src"]}},iconDefinitions:{description:r(7023,"Association of icon name to a font character."),$ref:Ho}}};function Hn(){const s=q.as(ht.JSONContribution);s.registerSchema(Mn,Ln)}const Pn="vscode://schemas/icon-theme";const Fn={type:"object",allowComments:true,allowTrailingCommas:true,definitions:{folderExpanded:{type:"string",description:r(6898,"The folder icon for expanded folders. The expanded folder icon is optional. If not set, the icon defined for folder will be shown.")},folder:{type:"string",description:r(6899,"The folder icon for collapsed folders, and if folderExpanded is not set, also for expanded folders.")},file:{type:"string",description:r(6900,"The default file icon, shown for all files that don't match any extension, filename or language id.")},rootFolder:{type:"string",description:r(6901,"The folder icon for collapsed root folders, and if rootFolderExpanded is not set, also for expanded root folders.")},rootFolderExpanded:{type:"string",description:r(6902,"The folder icon for expanded root folders. The expanded root folder icon is optional. If not set, the icon defined for root folder will be shown.")},rootFolderNames:{type:"object",description:r(6903,"Associates root folder names to icons. The object key is the root folder name. No patterns or wildcards are allowed. Root folder name matching is case insensitive."),additionalProperties:{type:"string",description:r(6904,"The ID of the icon definition for the association.")}},rootFolderNamesExpanded:{type:"object",description:r(6905,"Associates root folder names to icons for expanded root folders. The object key is the root folder name. No patterns or wildcards are allowed. Root folder name matching is case insensitive."),additionalProperties:{type:"string",description:r(6906,"The ID of the icon definition for the association.")}},folderNames:{type:"object",description:r(6907,"Associates folder names to icons. The object key is the folder name, not including any path segments. No patterns or wildcards are allowed. Folder name matching is case insensitive."),additionalProperties:{type:"string",description:r(6904,"The ID of the icon definition for the association.")}},folderNamesExpanded:{type:"object",description:r(6908,"Associates folder names to icons for expanded folders. The object key is the folder name, not including any path segments. No patterns or wildcards are allowed. Folder name matching is case insensitive."),additionalProperties:{type:"string",description:r(6909,"The ID of the icon definition for the association.")}},fileExtensions:{type:"object",description:r(6910,"Associates file extensions to icons. The object key is the file extension name. The extension name is the last segment of a file name after the last dot (not including the dot). Extensions are compared case insensitive."),additionalProperties:{type:"string",description:r(6911,"The ID of the icon definition for the association.")}},fileNames:{type:"object",description:r(6912,"Associates file names to icons. The object key is the full file name, but not including any path segments. File name can include dots and a possible file extension. No patterns or wildcards are allowed. File name matching is case insensitive."),additionalProperties:{type:"string",description:r(6913,"The ID of the icon definition for the association.")}},languageIds:{type:"object",description:r(6914,"Associates languages to icons. The object key is the language id as defined in the language contribution point."),additionalProperties:{type:"string",description:r(6915,"The ID of the icon definition for the association.")}},associations:{type:"object",properties:{folderExpanded:{$ref:"#/definitions/folderExpanded"},folder:{$ref:"#/definitions/folder"},file:{$ref:"#/definitions/file"},folderNames:{$ref:"#/definitions/folderNames"},folderNamesExpanded:{$ref:"#/definitions/folderNamesExpanded"},rootFolder:{$ref:"#/definitions/rootFolder"},rootFolderExpanded:{$ref:"#/definitions/rootFolderExpanded"},rootFolderNames:{$ref:"#/definitions/rootFolderNames"},rootFolderNamesExpanded:{$ref:"#/definitions/rootFolderNamesExpanded"},fileExtensions:{$ref:"#/definitions/fileExtensions"},fileNames:{$ref:"#/definitions/fileNames"},languageIds:{$ref:"#/definitions/languageIds"}}}},properties:{fonts:{type:"array",description:r(6916,"Fonts that are used in the icon definitions."),items:{type:"object",properties:{id:{type:"string",description:r(6917,"The ID of the font."),pattern:Tt,patternErrorMessage:r(6918,"The ID must only contain letter, numbers, underscore and minus.")},src:{type:"array",description:r(6919,"The location of the font."),items:{type:"object",properties:{path:{type:"string",description:r(6920,"The font path, relative to the current file icon theme file.")},format:{type:"string",description:r(6921,"The format of the font."),enum:["woff","woff2","truetype","opentype","embedded-opentype","svg"]}},required:["path","format"]}},weight:{type:"string",description:r(6922,"The weight of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight for valid values."),pattern:yt},style:{type:"string",description:r(6923,"The style of the font. See https://developer.mozilla.org/en-US/docs/Web/CSS/font-style for valid values."),pattern:Ct},size:{type:"string",description:r(6924,"The default size of the font. We strongly recommend using a percentage value, for example: 125%."),pattern:$t}},required:["id","src"]}},iconDefinitions:{type:"object",description:r(6925,"Description of all icons that can be used when associating files to icons."),additionalProperties:{type:"object",description:r(6926,"An icon definition. The object key is the ID of the definition."),properties:{iconPath:{type:"string",description:r(6927,"When using a SVG or PNG: The path to the image. The path is relative to the icon set file.")},fontCharacter:{type:"string",description:r(6928,"When using a glyph font: The character in the font to use.")},fontColor:{type:"string",format:"color-hex",description:r(6929,"When using a glyph font: The color to use.")},fontSize:{type:"string",description:r(6930,"When using a font: The font size in percentage to the text font. If not set, defaults to the size in the font definition."),pattern:$t},fontId:{type:"string",description:r(6931,"When using a font: The id of the font. If not set, defaults to the first font definition.")}}}},folderExpanded:{$ref:"#/definitions/folderExpanded"},folder:{$ref:"#/definitions/folder"},file:{$ref:"#/definitions/file"},folderNames:{$ref:"#/definitions/folderNames"},folderNamesExpanded:{$ref:"#/definitions/folderNamesExpanded"},rootFolder:{$ref:"#/definitions/rootFolder"},rootFolderExpanded:{$ref:"#/definitions/rootFolderExpanded"},rootFolderNames:{$ref:"#/definitions/rootFolderNames"},rootFolderNamesExpanded:{$ref:"#/definitions/rootFolderNamesExpanded"},fileExtensions:{$ref:"#/definitions/fileExtensions"},fileNames:{$ref:"#/definitions/fileNames"},languageIds:{$ref:"#/definitions/languageIds"},light:{$ref:"#/definitions/associations",description:r(6932,"Optional associations for file icons in light color themes.")},highContrast:{$ref:"#/definitions/associations",description:r(6933,"Optional associations for file icons in high contrast color themes.")},hidesExplorerArrows:{type:"boolean",description:r(6934,"Configures whether the file explorer's arrows should be hidden when this theme is active.")},showLanguageModeIcons:{type:"boolean",description:r(6935,"Configures whether the default language icons should be used if the theme does not define an icon for a language.")}}};function An(){const s=q.as(ht.JSONContribution);s.registerSchema(Pn,Fn)}class H{static{this.STORAGE_KEY="iconThemeData"}constructor(e,t,o){this.id=e;this.label=t;this.settingsId=o;this.isLoaded=false;this.hasFileIcons=false;this.hasFolderIcons=false;this.hidesExplorerArrows=false}ensureLoaded(e){return!this.isLoaded?this.load(e):Promise.resolve(this.styleSheetContent)}reload(e){return this.load(e)}load(e){return e.load(this)}static fromExtensionTheme(e,t,o){const n=o.extensionId+"-"+e.id;const i=e.label||rt(e.path);const a=e.id;const l=new H(n,i,a);l.description=e.description;l.location=t;l.extensionData=o;l.watch=e._watch;l.isLoaded=false;return l}static{this._noIconTheme=null}static get noIconTheme(){let e=H._noIconTheme;if(!e){e=H._noIconTheme=new H("","",null);e.hasFileIcons=false;e.hasFolderIcons=false;e.hidesExplorerArrows=false;e.isLoaded=true;e.extensionData=void 0;e.watch=false}return e}static createUnloadedTheme(e){const t=new H(e,"","__"+e);t.isLoaded=false;t.hasFileIcons=false;t.hasFolderIcons=false;t.hidesExplorerArrows=false;t.extensionData=void 0;t.watch=false;return t}static fromStorageData(e){const t=e.get(H.STORAGE_KEY,0);if(!t){return void 0}try{const o=JSON.parse(t);const n=new H("","",null);for(const i in o){switch(i){case"id":case"label":case"description":case"settingsId":case"styleSheetContent":case"hasFileIcons":case"hidesExplorerArrows":case"hasFolderIcons":case"watch":n[i]=o[i];break;case"location":break;case"extensionData":n.extensionData=N.fromJSONObject(o.extensionData);break}}return n}catch(o){return void 0}}toStorage(e){const t=JSON.stringify({id:this.id,label:this.label,description:this.description,settingsId:this.settingsId,styleSheetContent:this.styleSheetContent,hasFileIcons:this.hasFileIcons,hasFolderIcons:this.hasFolderIcons,hidesExplorerArrows:this.hidesExplorerArrows,extensionData:N.toJSONObject(this.extensionData),watch:this.watch});e.store(H.STORAGE_KEY,t,0,1)}}class Nn{constructor(e,t){this.fileService=e;this.languageService=t}load(e){if(!e.location){return Promise.resolve(e.styleSheetContent)}return this.loadIconThemeDocument(e.location).then(t=>{const o=this.processIconThemeDocument(e.id,e.location,t);e.styleSheetContent=o.content;e.hasFileIcons=o.hasFileIcons;e.hasFolderIcons=o.hasFolderIcons;e.hidesExplorerArrows=o.hidesExplorerArrows;e.isLoaded=true;return e.styleSheetContent})}loadIconThemeDocument(e){return this.fileService.readExtensionResource(e).then(t=>{const o=[];const n=at(t,o);if(o.length>0){return Promise.reject(new Error(r(6936,"Problems parsing file icons file: {0}",o.map(i=>ct(i.error)).join(", "))))}else if(lt(n)!=="object"){return Promise.reject(new Error(r(6937,"Invalid format for file icons theme file: Object expected.")))}return Promise.resolve(n)})}processIconThemeDocument(e,t,o){const n={content:"",hasFileIcons:false,hasFolderIcons:false,hidesExplorerArrows:!!o.hidesExplorerArrows};let i=false;if(!o.iconDefinitions){return n}const a={};const l={};const c=Oe(t);function h(T){return W(c,T)}function d(T,k){function C(I,M){if(M){let $=a[M];if(!$){$=a[M]=[]}$.push(I)}}if(T){let I=".show-file-icons";if(k){I=k+" "+I}const M=".monaco-tl-twistie.collapsible:not(.collapsed) + .monaco-tl-contents";if(T.folder){C(`${I} .folder-icon::before`,T.folder);n.hasFolderIcons=true}if(T.folderExpanded){C(`${I} ${M} .folder-icon::before`,T.folderExpanded);n.hasFolderIcons=true}const $=T.rootFolder||T.folder;const A=T.rootFolderExpanded||T.folderExpanded;if($){C(`${I} .rootfolder-icon::before`,$);n.hasFolderIcons=true}if(A){C(`${I} ${M} .rootfolder-icon::before`,A);n.hasFolderIcons=true}if(T.file){C(`${I} .file-icon::before`,T.file);n.hasFileIcons=true}const le=T.folderNames;if(le){for(const R in le){const _=[];const j=we(R.toLowerCase(),_);_.push(`.${G(j)}-name-folder-icon`);C(`${I} ${_.join("")}.folder-icon::before`,le[R]);n.hasFolderIcons=true}}const te=T.folderNamesExpanded;if(te){for(const R in te){const _=[];const j=we(R.toLowerCase(),_);_.push(`.${G(j)}-name-folder-icon`);C(`${I} ${M} ${_.join("")}.folder-icon::before`,te[R]);n.hasFolderIcons=true}}const he=T.rootFolderNames;if(he){for(const R in he){const _=R.toLowerCase();C(`${I} .${G(_)}-root-name-folder-icon.rootfolder-icon::before`,he[R]);n.hasFolderIcons=true}}const de=T.rootFolderNamesExpanded;if(de){for(const R in de){const _=R.toLowerCase();C(`${I} ${M} .${G(_)}-root-name-folder-icon.rootfolder-icon::before`,de[R]);n.hasFolderIcons=true}}const K=T.languageIds;if(K){if(!K.jsonc&&K.json){K.jsonc=K.json}for(const R in K){C(`${I} .${G(R)}-lang-file-icon.file-icon::before`,K[R]);n.hasFileIcons=true;i=true;l[R]=true}}const ue=T.fileExtensions;if(ue){for(const R in ue){const _=[];const j=we(R.toLowerCase(),_);const z=j.split(".");if(z.length){for(let L=0;L<z.length;L++){_.push(`.${G(z.slice(L).join("."))}-ext-file-icon`)}_.push(".ext-file-icon")}C(`${I} ${_.join("")}.file-icon::before`,ue[R]);n.hasFileIcons=true;i=true}}const fe=T.fileNames;if(fe){for(const R in fe){const _=[];const j=we(R.toLowerCase(),_);_.push(`.${G(j)}-name-file-icon`);_.push(".name-file-icon");const z=j.split(".");if(z.length){for(let L=1;L<z.length;L++){_.push(`.${G(z.slice(L).join("."))}-ext-file-icon`)}_.push(".ext-file-icon")}C(`${I} ${_.join("")}.file-icon::before`,fe[R]);n.hasFileIcons=true;i=true}}}}d(o);d(o.light,".vs");d(o.highContrast,".hc-black");d(o.highContrast,".hc-light");if(!n.hasFileIcons&&!n.hasFolderIcons){return n}const f=o.showLanguageModeIcons===true||i&&o.showLanguageModeIcons!==false;const u=[];const m=o.fonts;const S=new Map;if(Array.isArray(m)){const T=this.tryNormalizeFontSize(m[0].size)||"150%";m.forEach(k=>{const C=k.src.map(M=>`${Ee(h(M.path))} format('${M.format}')`).join(", ");u.push(`@font-face { src: ${C}; font-family: '${k.id}'; font-weight: ${k.weight}; font-style: ${k.style}; font-display: block; }`);const I=this.tryNormalizeFontSize(k.size);if(I!==void 0&&I!==T){S.set(k.id,I)}});u.push(`.show-file-icons .file-icon::before, .show-file-icons .folder-icon::before, .show-file-icons .rootfolder-icon::before { font-family: '${m[0].id}'; font-size: ${T}; }`)}const p="\\2001";for(const T in a){const k=a[T];const C=o.iconDefinitions[T];if(C){if(C.iconPath){u.push(`${k.join(", ")} { content: '${p}'; background-image: ${Ee(h(C.iconPath))}; }`)}else if(C.fontCharacter||C.fontColor){const I=[];if(C.fontColor){I.push(`color: ${C.fontColor};`)}if(C.fontCharacter){I.push(`content: '${C.fontCharacter}';`)}const M=C.fontSize??(C.fontId?S.get(C.fontId):void 0);if(M){I.push(`font-size: ${M};`)}if(C.fontId){I.push(`font-family: ${C.fontId};`)}if(f){I.push(`background-image: unset;`)}u.push(`${k.join(", ")} { ${I.join(" ")} }`)}}}if(f){for(const T of this.languageService.getRegisteredLanguageIds()){if(!l[T]){const k=this.languageService.getIcon(T);if(k){const C=`.show-file-icons .${G(T)}-lang-file-icon.file-icon::before`;u.push(`${C} { content: '${p}'; background-image: ${Ee(k.dark)}; }`);u.push(`.vs ${C} { content: '${p}'; background-image: ${Ee(k.light)}; }`)}}}}n.content=u.join("\n");return n}tryNormalizeFontSize(e){if(!e){return void 0}const t=13;if(e.endsWith("px")){const o=parseInt(e,10);if(!isNaN(o)){return Math.round(o/t*100)+"%"}}return e}}function we(s,e){const t=s.lastIndexOf("/");if(t>=0){const o=s.substring(0,t);e.push(`.${G(o)}-name-dir-icon`);return s.substring(t+1)}return s}function G(s){s=s.replace(/[\s]/g,"/");return Ae.CSS.escape(s)}const Bt=["comment","comment.block","comment.block.documentation","comment.line","constant","constant.character","constant.character.escape","constant.numeric","constant.numeric.integer","constant.numeric.float","constant.numeric.hex","constant.numeric.octal","constant.other","constant.regexp","constant.rgb-value","emphasis","entity","entity.name","entity.name.class","entity.name.function","entity.name.method","entity.name.section","entity.name.selector","entity.name.tag","entity.name.type","entity.other","entity.other.attribute-name","entity.other.inherited-class","invalid","invalid.deprecated","invalid.illegal","keyword","keyword.control","keyword.operator","keyword.operator.new","keyword.operator.assignment","keyword.operator.arithmetic","keyword.operator.logical","keyword.other","markup","markup.bold","markup.changed","markup.deleted","markup.heading","markup.inline.raw","markup.inserted","markup.italic","markup.list","markup.list.numbered","markup.list.unnumbered","markup.other","markup.quote","markup.raw","markup.underline","markup.underline.link","meta","meta.block","meta.cast","meta.class","meta.function","meta.function-call","meta.preprocessor","meta.return-type","meta.selector","meta.tag","meta.type.annotation","meta.type","punctuation.definition.string.begin","punctuation.definition.string.end","punctuation.separator","punctuation.separator.continuation","punctuation.terminator","storage","storage.modifier","storage.type","string","string.interpolated","string.other","string.quoted","string.quoted.double","string.quoted.other","string.quoted.single","string.quoted.triple","string.regexp","string.unquoted","strong","support","support.class","support.constant","support.function","support.other","support.type","support.type.property-name","support.variable","variable","variable.language","variable.name","variable.other","variable.other.readwrite","variable.parameter"];const Ge="vscode://schemas/textmate-colors";const $n=`${Ge}#/definitions/colorGroup`;const Bn={type:"array",definitions:{colorGroup:{default:"#FF0000",anyOf:[{type:"string",format:"color-hex"},{$ref:"#/definitions/settings"}]},settings:{type:"object",description:r(6938,"Colors and styles for the token."),properties:{foreground:{type:"string",description:r(6939,"Foreground color for the token."),format:"color-hex",default:"#ff0000"},background:{type:"string",deprecationMessage:r(6940,"Token background colors are currently not supported.")},fontStyle:{type:"string",description:r(6941,"Font style of the rule: 'italic', 'bold', 'underline', 'strikethrough' or a combination. The empty string unsets inherited settings."),pattern:"^(\\s*\\b(italic|bold|underline|strikethrough))*\\s*$",patternErrorMessage:r(6942,"Font style must be 'italic', 'bold', 'underline', 'strikethrough' or a combination or the empty string."),defaultSnippets:[{label:r(6943,"None (clear inherited style)"),bodyText:'""'},{body:"italic"},{body:"bold"},{body:"underline"},{body:"strikethrough"},{body:"italic bold"},{body:"italic underline"},{body:"italic strikethrough"},{body:"bold underline"},{body:"bold strikethrough"},{body:"underline strikethrough"},{body:"italic bold underline"},{body:"italic bold strikethrough"},{body:"italic underline strikethrough"},{body:"bold underline strikethrough"},{body:"italic bold underline strikethrough"}]}},additionalProperties:false,defaultSnippets:[{body:{foreground:"${1:#FF0000}",fontStyle:"${2:bold}"}}]}},items:{type:"object",defaultSnippets:[{body:{scope:"${1:keyword.operator}",settings:{foreground:"${2:#FF0000}"}}}],properties:{name:{type:"string",description:r(6944,"Description of the rule.")},scope:{description:r(6945,"Scope selector against which this rule matches."),anyOf:[{enum:Bt},{type:"string"},{type:"array",items:{enum:Bt}},{type:"array",items:{type:"string"}}]},settings:{$ref:"#/definitions/settings"}},required:["settings"],additionalProperties:false}};const ho="vscode://schemas/color-theme";const jn={type:"object",allowComments:true,allowTrailingCommas:true,properties:{colors:{description:r(6946,"Colors in the workbench"),$ref:dt,additionalProperties:false},tokenColors:{anyOf:[{type:"string",description:r(6947,"Path to a tmTheme file (relative to the current file).")},{description:r(6948,"Colors for syntax highlighting"),$ref:Ge}]},semanticHighlighting:{type:"boolean",description:r(6949,"Whether semantic highlighting should be enabled for this theme.")},semanticTokenColors:{type:"object",description:r(6950,"Colors for semantic tokens"),$ref:ro}}};function Gn(){const s=q.as(ht.JSONContribution);s.registerSchema(ho,jn);s.registerSchema(Ge,Bn)}function Un(){return ut.registerExtensionPoint({extensionPoint:"themes",jsonSchema:{description:r(6951,"Contributes textmate color themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{label:"${1:label}",id:"${2:id}",uiTheme:He,path:"./themes/${3:id}.tmTheme."}}],properties:{id:{description:r(6952,"Id of the color theme as used in the user settings."),type:"string"},label:{description:r(6953,"Label of the color theme as shown in the UI."),type:"string"},uiTheme:{description:r(6954,"Base theme defining the colors around the editor: 'vs' is the light color theme, 'vs-dark' is the dark color theme. 'hc-black' is the dark high contrast theme, 'hc-light' is the light high contrast theme."),enum:[$e,He,Be,je]},path:{description:r(6955,"Path of the tmTheme file. The path is relative to the extension folder and is typically './colorthemes/awesome-color-theme.json'."),type:"string"}},required:["path","uiTheme"]}}})}function Kn(){return ut.registerExtensionPoint({extensionPoint:"iconThemes",jsonSchema:{description:r(6956,"Contributes file icon themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:id}",label:"${2:label}",path:"./fileicons/${3:id}-icon-theme.json"}}],properties:{id:{description:r(6957,"Id of the file icon theme as used in the user settings."),type:"string"},label:{description:r(6958,"Label of the file icon theme as shown in the UI."),type:"string"},path:{description:r(6959,"Path of the file icon theme definition file. The path is relative to the extension folder and is typically './fileicons/awesome-icon-theme.json'."),type:"string"}},required:["path","id"]}}})}function zn(){return ut.registerExtensionPoint({extensionPoint:"productIconThemes",jsonSchema:{description:r(6960,"Contributes product icon themes."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:id}",label:"${2:label}",path:"./producticons/${3:id}-product-icon-theme.json"}}],properties:{id:{description:r(6961,"Id of the product icon theme as used in the user settings."),type:"string"},label:{description:r(6962,"Label of the product icon theme as shown in the UI."),type:"string"},path:{description:r(6963,"Path of the product icon theme definition file. The path is relative to the extension folder and is typically './producticons/awesome-product-icon-theme.json'."),type:"string"}},required:["path","id"]}}})}class qn extends Jt{constructor(){super(...arguments);this.type="markdown"}shouldRender(e){return!!e.contributes?.themes||!!e.contributes?.iconThemes||!!e.contributes?.productIconThemes}render(e){const t=new Fo;if(e.contributes?.themes){t.appendMarkdown(`### ${r(6964,"Color Themes")}

`);for(const o of e.contributes.themes){t.appendMarkdown(`- ${o.label}
`)}}if(e.contributes?.iconThemes){t.appendMarkdown(`### ${r(6965,"File Icon Themes")}

`);for(const o of e.contributes.iconThemes){t.appendMarkdown(`- ${o.label}
`)}}if(e.contributes?.productIconThemes){t.appendMarkdown(`### ${r(6966,"Product Icon Themes")}

`);for(const o of e.contributes.productIconThemes){t.appendMarkdown(`- ${o.label}
`)}}return{data:t,dispose:()=>{}}}}q.as(Po.ExtensionFeaturesRegistry).registerExtensionFeature({id:"themes",label:r(6967,"Themes"),access:{canToggle:false},renderer:new Vt(qn)});class ze{constructor(e,t,o=false,n=void 0){this.themesExtPoint=e;this.create=t;this.idRequired=o;this.builtInTheme=n;this.onDidChangeEmitter=new pe;this.onDidChange=this.onDidChangeEmitter.event;this.extensionThemes=[];this.initialize()}dispose(){this.themesExtPoint.setHandler(()=>{})}initialize(){this.themesExtPoint.setHandler((e,t)=>{const o={};const n=[];for(const a of this.extensionThemes){o[a.id]=a}this.extensionThemes.length=0;for(const a of e){const l=N.fromName(a.description.publisher,a.description.name,a.description.isBuiltin);this.onThemes(l,a.description.extensionLocation,a.value,this.extensionThemes,a.collector)}for(const a of this.extensionThemes){if(!o[a.id]){n.push(a)}else{delete o[a.id]}}const i=Object.values(o);this.onDidChangeEmitter.fire({themes:this.extensionThemes,added:n,removed:i})})}onThemes(e,t,o,n=[],i){if(!Array.isArray(o)){i?.error(r(6968,"Extension point `{0}` must be an array.",this.themesExtPoint.name));return n}o.forEach(a=>{if(!a.path||!D(a.path)){i?.error(r(6969,"Expected string in `contributes.{0}.path`. Provided value: {1}",this.themesExtPoint.name,String(a.path)));return}if(this.idRequired&&(!a.id||!D(a.id))){i?.error(r(6970,"Expected string in `contributes.{0}.id`. Provided value: {1}",this.themesExtPoint.name,String(a.id)));return}const l=W(t,a.path);if(!bt(l,t)){i?.warn(r(6971,"Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",this.themesExtPoint.name,l.path,t.path))}const c=this.create(a,l,e);n.push(c)});return n}findThemeById(e){if(this.builtInTheme&&this.builtInTheme.id===e){return this.builtInTheme}const t=this.getThemes();for(const o of t){if(o.id===e){return o}}return void 0}findThemeBySettingsId(e,t){if(this.builtInTheme&&this.builtInTheme.settingsId===e){return this.builtInTheme}const o=this.getThemes();let n=void 0;for(const i of o){if(i.settingsId===e){return i}if(i.settingsId===t){n=i}}return n}findThemeByExtensionLocation(e){if(e){return this.getThemes().filter(t=>t.location&&bt(t.location,e))}return[]}getThemes(){return this.extensionThemes}getMarketplaceThemes(e,t,o){const n=e?.contributes?.[this.themesExtPoint.name];if(Array.isArray(n)){return this.onThemes(o,t,n)}return[]}}const ce=q.as(Ao.Configuration);const Q=[];const Z=[];const X=[];function U(s){return`\`#${s}#\``}const ee="colorThemeConfiguration";const Wn={type:"string",markdownDescription:r(6972,"Specifies the color theme used in the workbench when {0} is not enabled.",U(y.DETECT_COLOR_SCHEME)),default:ft?w.COLOR_THEME_LIGHT:w.COLOR_THEME_DARK,tags:[ee],enum:Q,enumDescriptions:X,enumItemLabels:Z,errorMessage:r(6973,"Theme is unknown or not installed.")};const Vn={type:"string",markdownDescription:r(6974,"Specifies the color theme when system color mode is dark and {0} is enabled.",U(y.DETECT_COLOR_SCHEME)),default:w.COLOR_THEME_DARK,tags:[ee],enum:Q,enumDescriptions:X,enumItemLabels:Z,errorMessage:r(6973,"Theme is unknown or not installed.")};const Jn={type:"string",markdownDescription:r(6975,"Specifies the color theme when system color mode is light and {0} is enabled.",U(y.DETECT_COLOR_SCHEME)),default:w.COLOR_THEME_LIGHT,tags:[ee],enum:Q,enumDescriptions:X,enumItemLabels:Z,errorMessage:r(6973,"Theme is unknown or not installed.")};const Yn={type:"string",markdownDescription:r(6976,"Specifies the color theme when in high contrast dark mode and {0} is enabled.",U(y.DETECT_HC)),default:w.COLOR_THEME_HC_DARK,tags:[ee],enum:Q,enumDescriptions:X,enumItemLabels:Z,errorMessage:r(6973,"Theme is unknown or not installed.")};const Qn={type:"string",markdownDescription:r(6977,"Specifies the color theme when in high contrast light mode and {0} is enabled.",U(y.DETECT_HC)),default:w.COLOR_THEME_HC_LIGHT,tags:[ee],enum:Q,enumDescriptions:X,enumItemLabels:Z,errorMessage:r(6973,"Theme is unknown or not installed.")};const Zn={type:"boolean",markdownDescription:r(6978,"If enabled, will automatically select a color theme based on the system color mode. If the system color mode is dark, {0} is used, else {1}.",U(y.PREFERRED_DARK_THEME),U(y.PREFERRED_LIGHT_THEME)),default:false,tags:[ee]};const uo={type:"object",description:r(6979,"Overrides colors from the currently selected color theme."),allOf:[{$ref:dt}],default:{},defaultSnippets:[{body:{}}]};const ve={type:["string","null"],default:w.FILE_ICON_THEME,description:r(6980,"Specifies the file icon theme used in the workbench or 'null' to not show any file icons."),enum:[null],enumItemLabels:[r(6981,"None")],enumDescriptions:[r(6982,"No file icons")],errorMessage:r(6983,"File icon theme is unknown or not installed.")};const De={type:["string","null"],default:w.PRODUCT_ICON_THEME,description:r(6984,"Specifies the product icon theme used."),enum:[w.PRODUCT_ICON_THEME],enumItemLabels:[r(6985,"Default")],enumDescriptions:[r(6986,"Default")],errorMessage:r(6987,"Product icon theme is unknown or not installed.")};const Xn={type:"boolean",default:true,markdownDescription:r(6988,"If enabled, will automatically change to high contrast theme if the OS is using a high contrast theme. The high contrast theme to use is specified by {0} and {1}.",U(y.PREFERRED_HC_DARK_THEME),U(y.PREFERRED_HC_LIGHT_THEME)),scope:1,tags:[ee]};const Ue={id:"workbench",order:7.1,type:"object",properties:{[y.COLOR_THEME]:Wn,[y.PREFERRED_DARK_THEME]:Vn,[y.PREFERRED_LIGHT_THEME]:Jn,[y.PREFERRED_HC_DARK_THEME]:Yn,[y.PREFERRED_HC_LIGHT_THEME]:Qn,[y.FILE_ICON_THEME]:ve,[y.COLOR_CUSTOMIZATIONS]:uo,[y.PRODUCT_ICON_THEME]:De}};ce.registerConfiguration(Ue);const ei={id:"window",order:8.1,type:"object",properties:{[y.DETECT_HC]:Xn,[y.DETECT_COLOR_SCHEME]:Zn}};ce.registerConfiguration(ei);function J(s){return{description:s,$ref:$n}}const qe="^\\[[^\\]]*(\\]\\s*\\[[^\\]]*)*\\]$";const fo={type:"object",properties:{comments:J(r(6989,"Sets the colors and styles for comments")),strings:J(r(6990,"Sets the colors and styles for strings literals.")),keywords:J(r(6991,"Sets the colors and styles for keywords.")),numbers:J(r(6992,"Sets the colors and styles for number literals.")),types:J(r(6993,"Sets the colors and styles for type declarations and references.")),functions:J(r(6994,"Sets the colors and styles for functions declarations and references.")),variables:J(r(6995,"Sets the colors and styles for variables declarations and references.")),textMateRules:{description:r(6996,"Sets colors and styles using textmate theming rules (advanced)."),$ref:Ge},semanticHighlighting:{description:r(6997,"Whether semantic highlighting should be enabled for this theme."),deprecationMessage:r(6998,"Use `enabled` in `editor.semanticTokenColorCustomizations` setting instead."),markdownDeprecationMessage:r(6999,"Use `enabled` in {0} setting instead.",U("editor.semanticTokenColorCustomizations")),type:"boolean"}},additionalProperties:false};const mo={description:r(7e3,"Overrides editor syntax colors and font style from the currently selected color theme."),default:{},allOf:[{...fo,patternProperties:{"^\\[":{}}}]};const nt={type:"object",properties:{enabled:{type:"boolean",description:r(7001,"Whether semantic highlighting is enabled or disabled for this theme"),suggestSortText:"0_enabled"},rules:{$ref:ro,description:r(7002,"Semantic token styling rules for this theme."),suggestSortText:"0_rules"}},additionalProperties:false};const go={description:r(7003,"Overrides editor semantic token color and styles from the currently selected color theme."),default:{},allOf:[{...nt,patternProperties:{"^\\[":{}}}]};const po={id:"editor",order:7.2,type:"object",properties:{[y.TOKEN_COLOR_CUSTOMIZATIONS]:mo,[y.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS]:go}};ce.registerConfiguration(po);function jt(s){s.sort((a,l)=>a.label.localeCompare(l.label));Q.splice(0,Q.length,...s.map(a=>a.settingsId));X.splice(0,X.length,...s.map(a=>a.description||""));Z.splice(0,Z.length,...s.map(a=>a.label||""));const e={properties:{}};const t={properties:{}};const o={properties:{}};const n={$ref:dt,additionalProperties:false};const i={properties:fo.properties,additionalProperties:false};for(const a of s){const l=`[${a.settingsId}]`;e.properties[l]=n;t.properties[l]=i;o.properties[l]=nt}e.patternProperties={[qe]:n};t.patternProperties={[qe]:i};o.patternProperties={[qe]:nt};uo.allOf[1]=e;mo.allOf[1]=t;go.allOf[1]=o;ce.notifyConfigurationSchemaUpdated(Ue,po)}function Gt(s){ve.enum.splice(1,Number.MAX_VALUE,...s.map(e=>e.settingsId));ve.enumItemLabels.splice(1,Number.MAX_VALUE,...s.map(e=>e.label));ve.enumDescriptions.splice(1,Number.MAX_VALUE,...s.map(e=>e.description||""));ce.notifyConfigurationSchemaUpdated(Ue)}function Ut(s){De.enum.splice(1,Number.MAX_VALUE,...s.map(e=>e.settingsId));De.enumItemLabels.splice(1,Number.MAX_VALUE,...s.map(e=>e.label));De.enumDescriptions.splice(1,Number.MAX_VALUE,...s.map(e=>e.description||""));ce.notifyConfigurationSchemaUpdated(Ue)}const ti={[b.DARK]:y.PREFERRED_DARK_THEME,[b.LIGHT]:y.PREFERRED_LIGHT_THEME,[b.HIGH_CONTRAST_DARK]:y.PREFERRED_HC_DARK_THEME,[b.HIGH_CONTRAST_LIGHT]:y.PREFERRED_HC_LIGHT_THEME};class oi{constructor(e,t){this.configurationService=e;this.hostColorService=t}get colorTheme(){return this.configurationService.getValue(this.getColorThemeSettingId())}get fileIconTheme(){return this.configurationService.getValue(y.FILE_ICON_THEME)}get productIconTheme(){return this.configurationService.getValue(y.PRODUCT_ICON_THEME)}get colorCustomizations(){return this.configurationService.getValue(y.COLOR_CUSTOMIZATIONS)||{}}get tokenColorCustomizations(){return this.configurationService.getValue(y.TOKEN_COLOR_CUSTOMIZATIONS)||{}}get semanticTokenColorCustomizations(){return this.configurationService.getValue(y.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)}getPreferredColorScheme(){if(this.configurationService.getValue(y.DETECT_HC)&&this.hostColorService.highContrast){return this.hostColorService.dark?b.HIGH_CONTRAST_DARK:b.HIGH_CONTRAST_LIGHT}if(this.configurationService.getValue(y.DETECT_COLOR_SCHEME)){return this.hostColorService.dark?b.DARK:b.LIGHT}return void 0}isDetectingColorScheme(){return this.configurationService.getValue(y.DETECT_COLOR_SCHEME)}getColorThemeSettingId(){const e=this.getPreferredColorScheme();return e?ti[e]:y.COLOR_THEME}async setColorTheme(e,t){await this.writeConfiguration(this.getColorThemeSettingId(),e.settingsId,t);return e}async setFileIconTheme(e,t){await this.writeConfiguration(y.FILE_ICON_THEME,e.settingsId,t);return e}async setProductIconTheme(e,t){await this.writeConfiguration(y.PRODUCT_ICON_THEME,e.settingsId,t);return e}isDefaultColorTheme(){const e=this.configurationService.inspect(this.getColorThemeSettingId());return e&&e.default?.value===e.value}findAutoConfigurationTarget(e){const t=this.configurationService.inspect(e);if(!Y(t.workspaceFolderValue)){return 6}else if(!Y(t.workspaceValue)){return 5}else if(!Y(t.userRemote)){return 4}return 2}async writeConfiguration(e,t,o){if(o===void 0||o==="preview"){return}const n=this.configurationService.inspect(e);if(o==="auto"){return this.configurationService.updateValue(e,t)}if(o===2){if(t===n.userValue){return Promise.resolve(void 0)}else if(t===n.defaultValue){if(Y(n.userValue)){return Promise.resolve(void 0)}t=void 0}}else if(o===5||o===6||o===4){if(t===n.value){return Promise.resolve(void 0)}}return this.configurationService.updateValue(e,t,o)}}const Te="";class P{static{this.STORAGE_KEY="productIconThemeData"}constructor(e,t,o){this.iconThemeDocument={iconDefinitions:new Map};this.id=e;this.label=t;this.settingsId=o;this.isLoaded=false}getIcon(e){return si(e,this.iconThemeDocument)}ensureLoaded(e,t){return!this.isLoaded?this.load(e,t):Promise.resolve(this.styleSheetContent)}reload(e,t){return this.load(e,t)}async load(e,t){const o=this.location;if(!o){return Promise.resolve(this.styleSheetContent)}const n=[];this.iconThemeDocument=await ni(e,o,n);this.isLoaded=true;if(n.length){t.error(r(7004,"Problems processing product icons definitions in {0}:\n{1}",o.toString(),n.join("\n")))}return this.styleSheetContent}static fromExtensionTheme(e,t,o){const n=o.extensionId+"-"+e.id;const i=e.label||rt(e.path);const a=e.id;const l=new P(n,i,a);l.description=e.description;l.location=t;l.extensionData=o;l.watch=e._watch;l.isLoaded=false;return l}static createUnloadedTheme(e){const t=new P(e,"","__"+e);t.isLoaded=false;t.extensionData=void 0;t.watch=false;return t}static{this._defaultProductIconTheme=null}static get defaultTheme(){let e=P._defaultProductIconTheme;if(!e){e=P._defaultProductIconTheme=new P(Te,r(7005,"Default"),w.PRODUCT_ICON_THEME);e.isLoaded=true;e.extensionData=void 0;e.watch=false}return e}static fromStorageData(e){const t=e.get(P.STORAGE_KEY,0);if(!t){return void 0}try{const o=JSON.parse(t);const n=new P("","","");for(const l in o){switch(l){case"id":case"label":case"description":case"settingsId":case"styleSheetContent":case"watch":n[l]=o[l];break;case"location":break;case"extensionData":n.extensionData=N.fromJSONObject(o.extensionData);break}}const{iconDefinitions:i,iconFontDefinitions:a}=o;if(Array.isArray(i)&&Re(a)){const l=new Map;for(const c of i){const{id:h,fontCharacter:d,fontId:f}=c;if(D(h)&&D(d)){if(D(f)){const u=Et.fromJSONObject(a[f]);if(u){l.set(h,{fontCharacter:d,font:{id:f,definition:u}})}}else{l.set(h,{fontCharacter:d})}}}n.iconThemeDocument={iconDefinitions:l}}return n}catch(o){return void 0}}toStorage(e){const t=[];const o={};for(const i of this.iconThemeDocument.iconDefinitions.entries()){const a=i[1].font;t.push({id:i[0],fontCharacter:i[1].fontCharacter,fontId:a?.id});if(a&&o[a.id]===void 0){o[a.id]=Et.toJSONObject(a.definition)}}const n=JSON.stringify({id:this.id,label:this.label,description:this.description,settingsId:this.settingsId,styleSheetContent:this.styleSheetContent,watch:this.watch,extensionData:N.toJSONObject(this.extensionData),iconDefinitions:t,iconFontDefinitions:o});e.store(P.STORAGE_KEY,n,0,1)}}function ni(s,e,t){return s.readExtensionResource(e).then(o=>{const n=[];const i=at(o,n);if(n.length>0){return Promise.reject(new Error(r(7006,"Problems parsing product icons file: {0}",n.map(d=>ct(d.error)).join(", "))))}else if(lt(i)!=="object"){return Promise.reject(new Error(r(7007,"Invalid format for product icons theme file: Object expected.")))}else if(!i.iconDefinitions||!Array.isArray(i.fonts)||!i.fonts.length){return Promise.reject(new Error(r(7008,"Invalid format for product icons theme file: Must contain iconDefinitions and fonts.")))}const a=Oe(e);const l=new Map;for(const d of i.fonts){if(D(d.id)&&d.id.match(Tt)){const f=d.id;let u=void 0;if(D(d.weight)&&d.weight.match(yt)){u=d.weight}else{t.push(r(7009,"Invalid font weight in font '{0}'. Ignoring setting.",d.id))}let m=void 0;if(D(d.style)&&d.style.match(Ct)){m=d.style}else{t.push(r(7010,"Invalid font style in font '{0}'. Ignoring setting.",d.id))}const S=[];if(Array.isArray(d.src)){for(const p of d.src){if(D(p.path)&&D(p.format)&&p.format.match(On)){const T=W(a,p.path);S.push({location:T,format:p.format})}else{t.push(r(7011,"Invalid font source in font '{0}'. Ignoring source.",d.id))}}}if(S.length){l.set(f,{weight:u,style:m,src:S})}else{t.push(r(7012,"No valid font source in font '{0}'. Ignoring font definition.",d.id))}}else{t.push(r(7013,"Missing or invalid font id '{0}'. Skipping font definition.",d.id))}}const c=new Map;const h=i.fonts[0].id;for(const d in i.iconDefinitions){const f=i.iconDefinitions[d];if(D(f.fontCharacter)){const u=f.fontId??h;const m=l.get(u);if(m){const S={id:`pi-${u}`,definition:m};c.set(d,{fontCharacter:f.fontCharacter,font:S})}else{t.push(r(7014,"Skipping icon definition '{0}'. Unknown font.",d))}}else{t.push(r(7015,"Skipping icon definition '{0}'. Unknown fontCharacter.",d))}}return{iconDefinitions:c}})}const ii=No();function si(s,e){const t=e.iconDefinitions;let o=t.get(s.id);let n=s.defaults;while(!o&&Xe.isThemeIcon(n)){const i=ii.getIcon(n.id);if(i){o=t.get(i.id);n=i.defaults}else{return void 0}}if(o){return o}if(!Xe.isThemeIcon(n)){return n}return void 0}const _e="vscode-theme-defaults";const We="vscode.vscode-theme-seti-vs-seti";const Kt="file-icons-enabled";const ri="contributedColorTheme";const ai="contributedFileIconTheme";const ci="contributedProductIconTheme";const zt=q.as($o.ThemingContribution);function li(s){switch(s){case $e:return`vs ${_e}-themes-light_vs-json`;case He:return`vs-dark ${_e}-themes-dark_vs-json`;case Be:return`hc-black ${_e}-themes-hc_black-json`;case je:return`hc-light ${_e}-themes-hc_light-json`}return s}const hi=Un();const di=Kn();const ui=zn();let it=class bi extends Jt{constructor(e,t,o,n,i,a,l,c,h,d,f,u){super();this.storageService=t;this.configurationService=o;this.telemetryService=n;this.environmentService=i;this.extensionResourceLoaderService=l;this.logService=h;this.hostColorService=d;this.userDataInitializationService=f;this.languageService=u;this.hasDefaultUpdated=false;this.themeExtensionsActivated=new Map;this.container=c.mainContainer;this.settings=new oi(o,d);this.colorThemeRegistry=this._register(new ze(hi,F.fromExtensionTheme));this.colorThemeWatcher=this._register(new Ve(a,i,this.reloadCurrentColorTheme.bind(this)));this.onColorThemeChange=new pe({leakWarningThreshold:400});this.currentColorTheme=F.createUnloadedTheme("");this.colorThemeSequencer=new Ke;this.fileIconThemeWatcher=this._register(new Ve(a,i,this.reloadCurrentFileIconTheme.bind(this)));this.fileIconThemeRegistry=this._register(new ze(di,H.fromExtensionTheme,true,H.noIconTheme));this.fileIconThemeLoader=new Nn(l,u);this.onFileIconThemeChange=new pe({leakWarningThreshold:400});this.currentFileIconTheme=H.createUnloadedTheme("");this.fileIconThemeSequencer=new Ke;this.productIconThemeWatcher=this._register(new Ve(a,i,this.reloadCurrentProductIconTheme.bind(this)));this.productIconThemeRegistry=this._register(new ze(ui,P.fromExtensionTheme,true,P.defaultTheme));this.onProductIconThemeChange=new pe;this.currentProductIconTheme=P.createUnloadedTheme("");this.productIconThemeSequencer=new Ke;this._register(this.onDidColorThemeChange(A=>kt().notifyThemeUpdate(A)));let m=F.fromStorageData(this.storageService);const S=this.settings.colorTheme;if(m&&S!==m.settingsId&&this.settings.isDefaultColorTheme()){this.hasDefaultUpdated=m.settingsId===w.COLOR_THEME_DARK_OLD||m.settingsId===w.COLOR_THEME_LIGHT_OLD;m=void 0}const p=S===w.COLOR_THEME_LIGHT?yn:S===w.COLOR_THEME_DARK?Cn:void 0;if(!m){const A=i.options?.initialColorTheme;if(A){m=F.createUnloadedThemeForThemeType(A.themeType,A.colors??p)}}if(!m){m=F.createUnloadedThemeForThemeType(ft?b.LIGHT:b.DARK,p)}m.setCustomizations(this.settings);this.applyTheme(m,void 0,true);const T=H.fromStorageData(this.storageService);if(T){this.applyAndSetFileIconTheme(T,true)}const k=P.fromStorageData(this.storageService);if(k){this.applyAndSetProductIconTheme(k,true)}e.whenInstalledExtensionsRegistered().then(A=>{this.installConfigurationListener();this.installPreferredSchemeListener();this.installRegistryListeners();this.initialize().catch(Me)});const C=eo();C.id="codiconStyles";const I=this._register(Wo(this));function M(){C.textContent=I.getCSS()}const $=this._register(new Vo(M,0));this._register(I.onDidChange(()=>$.schedule()));$.schedule()}initialize(){const e=this.environmentService.extensionDevelopmentLocationURI;const t=e&&e.length===1?e[0]:void 0;const o=async()=>{const a=this.colorThemeRegistry.findThemeByExtensionLocation(t);if(a.length){const c=a.find(h=>h.type===this.currentColorTheme.type);return this.setColorTheme(c?c.id:a[0].id,void 0)}let l=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,void 0);if(!l){await this.userDataInitializationService.whenInitializationFinished();const c=this.currentColorTheme.type===b.LIGHT?w.COLOR_THEME_LIGHT:w.COLOR_THEME_DARK;l=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,c)}return this.setColorTheme(l&&l.id,void 0)};const n=async()=>{const a=this.fileIconThemeRegistry.findThemeByExtensionLocation(t);if(a.length){return this.setFileIconTheme(a[0].id,8)}let l=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme);if(!l){await this.userDataInitializationService.whenInitializationFinished();l=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme)}return this.setFileIconTheme(l?l.id:We,void 0)};const i=async()=>{const a=this.productIconThemeRegistry.findThemeByExtensionLocation(t);if(a.length){return this.setProductIconTheme(a[0].id,8)}let l=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme);if(!l){await this.userDataInitializationService.whenInitializationFinished();l=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme)}return this.setProductIconTheme(l?l.id:Te,void 0)};return Promise.all([o(),n(),i()])}installConfigurationListener(){this._register(this.configurationService.onDidChangeConfiguration(e=>{if(e.affectsConfiguration(y.COLOR_THEME)||e.affectsConfiguration(y.PREFERRED_DARK_THEME)||e.affectsConfiguration(y.PREFERRED_LIGHT_THEME)||e.affectsConfiguration(y.PREFERRED_HC_DARK_THEME)||e.affectsConfiguration(y.PREFERRED_HC_LIGHT_THEME)||e.affectsConfiguration(y.DETECT_COLOR_SCHEME)||e.affectsConfiguration(y.DETECT_HC)||e.affectsConfiguration(y.SYSTEM_COLOR_THEME)){this.restoreColorTheme()}if(e.affectsConfiguration(y.FILE_ICON_THEME)){this.restoreFileIconTheme()}if(e.affectsConfiguration(y.PRODUCT_ICON_THEME)){this.restoreProductIconTheme()}if(this.currentColorTheme){let t=false;if(e.affectsConfiguration(y.COLOR_CUSTOMIZATIONS)){this.currentColorTheme.setCustomColors(this.settings.colorCustomizations);t=true}if(e.affectsConfiguration(y.TOKEN_COLOR_CUSTOMIZATIONS)){this.currentColorTheme.setCustomTokenColors(this.settings.tokenColorCustomizations);t=true}if(e.affectsConfiguration(y.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)){this.currentColorTheme.setCustomSemanticTokenColors(this.settings.semanticTokenColorCustomizations);t=true}if(t){this.updateDynamicCSSRules(this.currentColorTheme);this.onColorThemeChange.fire(this.currentColorTheme)}}}))}installRegistryListeners(){let e=void 0;this._register(this.colorThemeRegistry.onDidChange(async n=>{jt(n.themes);if(await this.restoreColorTheme()){if(this.currentColorTheme.settingsId===w.COLOR_THEME_DARK&&!Y(e)&&await this.colorThemeRegistry.findThemeById(e)){await this.setColorTheme(e,"auto");e=void 0}else if(n.added.some(i=>i.settingsId===this.currentColorTheme.settingsId)){await this.reloadCurrentColorTheme()}}else if(n.removed.some(i=>i.settingsId===this.currentColorTheme.settingsId)){e=this.currentColorTheme.id;const i=this.colorThemeRegistry.findThemeBySettingsId(w.COLOR_THEME_DARK);await this.setColorTheme(i,"auto")}}));let t=void 0;this._register(this._register(this.fileIconThemeRegistry.onDidChange(async n=>{Gt(n.themes);if(await this.restoreFileIconTheme()){if(this.currentFileIconTheme.id===We&&!Y(t)&&this.fileIconThemeRegistry.findThemeById(t)){await this.setFileIconTheme(t,"auto");t=void 0}else if(n.added.some(i=>i.settingsId===this.currentFileIconTheme.settingsId)){await this.reloadCurrentFileIconTheme()}}else if(n.removed.some(i=>i.settingsId===this.currentFileIconTheme.settingsId)){t=this.currentFileIconTheme.id;await this.setFileIconTheme(We,"auto")}})));let o=void 0;this._register(this.productIconThemeRegistry.onDidChange(async n=>{Ut(n.themes);if(await this.restoreProductIconTheme()){if(this.currentProductIconTheme.id===Te&&!Y(o)&&this.productIconThemeRegistry.findThemeById(o)){await this.setProductIconTheme(o,"auto");o=void 0}else if(n.added.some(i=>i.settingsId===this.currentProductIconTheme.settingsId)){await this.reloadCurrentProductIconTheme()}}else if(n.removed.some(i=>i.settingsId===this.currentProductIconTheme.settingsId)){o=this.currentProductIconTheme.id;await this.setProductIconTheme(Te,"auto")}}));this._register(this.languageService.onDidChange(()=>this.reloadCurrentFileIconTheme()));return Promise.all([this.getColorThemes(),this.getFileIconThemes(),this.getProductIconThemes()]).then(([n,i,a])=>{jt(n);Gt(i);Ut(a)})}installPreferredSchemeListener(){this._register(this.hostColorService.onDidChangeColorScheme(()=>{if(this.settings.isDetectingColorScheme()){this.restoreColorTheme()}}))}hasUpdatedDefaultThemes(){return this.hasDefaultUpdated}getColorTheme(){return this.currentColorTheme}async getColorThemes(){return this.colorThemeRegistry.getThemes()}getPreferredColorScheme(){return this.settings.getPreferredColorScheme()}async getMarketplaceColorThemes(e,t,o){const n=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:o},"extension");if(n){try{const i=await this.extensionResourceLoaderService.readExtensionResource(W(n,"package.json"));return this.colorThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,N.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}}return[]}get onDidColorThemeChange(){return this.onColorThemeChange.event}setColorTheme(e,t){return this.colorThemeSequencer.queue(async()=>{return this.internalSetColorTheme(e,t)})}async internalSetColorTheme(e,t){if(!e){return null}const o=D(e)?li(e):e.id;if(this.currentColorTheme.isLoaded&&o===this.currentColorTheme.id){if(t!=="preview"){this.currentColorTheme.toStorage(this.storageService)}return this.settings.setColorTheme(this.currentColorTheme,t)}let n=this.colorThemeRegistry.findThemeById(o);if(!n){if(e instanceof F){n=e}else{return null}}try{await n.ensureLoaded(this.extensionResourceLoaderService);n.setCustomizations(this.settings);return this.applyTheme(n,t)}catch(i){throw new Error(r(3033,"Unable to load {0}: {1}",n.location?.toString(),i.message))}}reloadCurrentColorTheme(){return this.colorThemeSequencer.queue(async()=>{try{const e=this.colorThemeRegistry.findThemeBySettingsId(this.currentColorTheme.settingsId)||this.currentColorTheme;await e.reload(this.extensionResourceLoaderService);e.setCustomizations(this.settings);await this.applyTheme(e,void 0,false)}catch(e){this.logService.info("Unable to reload {0}: {1}",this.currentColorTheme.location?.toString())}})}async restoreColorTheme(){return this.colorThemeSequencer.queue(async()=>{const e=this.settings.colorTheme;const t=this.colorThemeRegistry.findThemeBySettingsId(e);if(t){if(e!==this.currentColorTheme.settingsId){await this.internalSetColorTheme(t.id,void 0)}else if(t!==this.currentColorTheme){await t.ensureLoaded(this.extensionResourceLoaderService);t.setCustomizations(this.settings);await this.applyTheme(t,void 0,true)}return true}return false})}updateDynamicCSSRules(e){const t=new Set;const o={addRule:i=>{if(!t.has(i)){t.add(i)}}};o.addRule(`.monaco-workbench { forced-color-adjust: none; }`);zt.getThemingParticipants().forEach(i=>i(e,o,this.environmentService));const n=[];for(const i of kt().getColors()){const a=e.getColor(i.id,true);if(a){n.push(`${Jo(i.id)}: ${a.toString()};`)}}o.addRule(`.monaco-workbench { ${n.join("\n")} }`);Je([...t].join("\n"),ri)}applyTheme(e,t,o=false){this.updateDynamicCSSRules(e);if(this.currentColorTheme.id){this.container.classList.remove(...this.currentColorTheme.classNames)}else{this.container.classList.remove(He,$e,Be,je)}this.container.classList.add(...e.classNames);this.currentColorTheme.clearCaches();this.currentColorTheme=e;if(!this.colorThemingParticipantChangeListener){this.colorThemingParticipantChangeListener=zt.onThemingParticipantAdded(n=>this.updateDynamicCSSRules(this.currentColorTheme))}this.colorThemeWatcher.update(e);this.sendTelemetry(e.id,e.extensionData,"color");if(o){return Promise.resolve(null)}this.onColorThemeChange.fire(this.currentColorTheme);if(e.isLoaded&&t!=="preview"){e.toStorage(this.storageService)}return this.settings.setColorTheme(this.currentColorTheme,t)}sendTelemetry(e,t,o){if(t){const n=o+t.extensionId;if(!this.themeExtensionsActivated.get(n)){this.telemetryService.publicLog2("activatePlugin",{id:t.extensionId,name:t.extensionName,isBuiltin:t.extensionIsBuiltin,publisherDisplayName:t.extensionPublisher,themeId:e});this.themeExtensionsActivated.set(n,true)}}}async getFileIconThemes(){return this.fileIconThemeRegistry.getThemes()}getFileIconTheme(){return this.currentFileIconTheme}get onDidFileIconThemeChange(){return this.onFileIconThemeChange.event}async setFileIconTheme(e,t){return this.fileIconThemeSequencer.queue(async()=>{return this.internalSetFileIconTheme(e,t)})}async internalSetFileIconTheme(e,t){if(e===void 0){e=""}const o=D(e)?e:e.id;if(o!==this.currentFileIconTheme.id||!this.currentFileIconTheme.isLoaded){let i=this.fileIconThemeRegistry.findThemeById(o);if(!i&&e instanceof H){i=e}if(!i){i=H.noIconTheme}await i.ensureLoaded(this.fileIconThemeLoader);this.applyAndSetFileIconTheme(i)}const n=this.currentFileIconTheme;if(n.isLoaded&&t!=="preview"&&(!n.location||!wt(n.location))){n.toStorage(this.storageService)}await this.settings.setFileIconTheme(this.currentFileIconTheme,t);return n}async getMarketplaceFileIconThemes(e,t,o){const n=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:o},"extension");if(n){try{const i=await this.extensionResourceLoaderService.readExtensionResource(W(n,"package.json"));return this.fileIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,N.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}}return[]}async reloadCurrentFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{await this.currentFileIconTheme.reload(this.fileIconThemeLoader);this.applyAndSetFileIconTheme(this.currentFileIconTheme)})}async restoreFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{const e=this.settings.fileIconTheme;const t=this.fileIconThemeRegistry.findThemeBySettingsId(e);if(t){if(e!==this.currentFileIconTheme.settingsId){await this.internalSetFileIconTheme(t.id,void 0)}else if(t!==this.currentFileIconTheme){await t.ensureLoaded(this.fileIconThemeLoader);this.applyAndSetFileIconTheme(t,true)}return true}return false})}applyAndSetFileIconTheme(e,t=false){this.currentFileIconTheme=e;Je(e.styleSheetContent,ai);if(e.id){this.container.classList.add(Kt)}else{this.container.classList.remove(Kt)}this.fileIconThemeWatcher.update(e);if(e.id){this.sendTelemetry(e.id,e.extensionData,"fileIcon")}if(!t){this.onFileIconThemeChange.fire(this.currentFileIconTheme)}}async getProductIconThemes(){return this.productIconThemeRegistry.getThemes()}getProductIconTheme(){return this.currentProductIconTheme}get onDidProductIconThemeChange(){return this.onProductIconThemeChange.event}async setProductIconTheme(e,t){return this.productIconThemeSequencer.queue(async()=>{return this.internalSetProductIconTheme(e,t)})}async internalSetProductIconTheme(e,t){if(e===void 0){e=""}const o=D(e)?e:e.id;if(o!==this.currentProductIconTheme.id||!this.currentProductIconTheme.isLoaded){let i=this.productIconThemeRegistry.findThemeById(o);if(!i&&e instanceof P){i=e}if(!i){i=P.defaultTheme}await i.ensureLoaded(this.extensionResourceLoaderService,this.logService);this.applyAndSetProductIconTheme(i)}const n=this.currentProductIconTheme;if(n.isLoaded&&t!=="preview"&&(!n.location||!wt(n.location))){n.toStorage(this.storageService)}await this.settings.setProductIconTheme(this.currentProductIconTheme,t);return n}async getMarketplaceProductIconThemes(e,t,o){const n=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:o},"extension");if(n){try{const i=await this.extensionResourceLoaderService.readExtensionResource(W(n,"package.json"));return this.productIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),n,N.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}}return[]}async reloadCurrentProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{await this.currentProductIconTheme.reload(this.extensionResourceLoaderService,this.logService);this.applyAndSetProductIconTheme(this.currentProductIconTheme)})}async restoreProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{const e=this.settings.productIconTheme;const t=this.productIconThemeRegistry.findThemeBySettingsId(e);if(t){if(e!==this.currentProductIconTheme.settingsId){await this.internalSetProductIconTheme(t.id,void 0)}else if(t!==this.currentProductIconTheme){await t.ensureLoaded(this.extensionResourceLoaderService,this.logService);this.applyAndSetProductIconTheme(t,true)}return true}return false})}applyAndSetProductIconTheme(e,t=false){this.currentProductIconTheme=e;Je(e.styleSheetContent,ci);this.productIconThemeWatcher.update(e);if(e.id){this.sendTelemetry(e.id,e.extensionData,"productIcon")}if(!t){this.onProductIconThemeChange.fire(this.currentProductIconTheme)}}};it=Ne([E(0,Bo),E(1,Yt),E(2,Qt),E(3,Zt),E(4,jo),E(5,Go),E(6,mt),E(7,Uo),E(8,Xt),E(9,Ko),E(10,zo),E(11,qo)],it);class Ve{constructor(e,t,o){this.fileService=e;this.environmentService=t;this.onUpdate=o}update(e){if(!Yo(e.location,this.watchedLocation)){this.dispose();if(e.location&&(e.watch||this.environmentService.isExtensionDevelopment)){this.watchedLocation=e.location;this.watcherDisposable=this.fileService.watch(e.location);this.fileService.onDidFilesChange(t=>{if(this.watchedLocation&&t.contains(this.watchedLocation,0)){this.onUpdate()}})}}}dispose(){this.watcherDisposable=_t(this.watcherDisposable);this.fileChangeListener=_t(this.fileChangeListener);this.watchedLocation=void 0}}function Je(s,e){const t=Ae.document.head.getElementsByClassName(e);if(t.length===0){const o=eo();o.className=e;o.textContent=s}else{t[0].textContent=s}}Gn();An();Hn();var ge;const fi=Qo("theme-selection-manage-extension",et.gear,r(3034,"Icon for the 'Manage' action in the theme selection quick pick."));var ne;(function(s){s["BROWSE_GALLERY"]="marketplace";s["EXTENSIONS_VIEW"]="extensions";s["CUSTOM_TOP_ENTRY"]="customTopEntry"})(ne||(ne={}));let Pe=class Ei{constructor(e,t,o,n,i,a,l,c,h){this.getMarketplaceColorThemes=e;this.marketplaceQuery=t;this.extensionGalleryService=o;this.extensionManagementService=n;this.quickInputService=i;this.logService=a;this.progressService=l;this.extensionsWorkbenchService=c;this.dialogService=h;this._marketplaceExtensions=new Set;this._marketplaceThemes=[];this._searchOngoing=false;this._searchError=void 0;this._onDidChange=new pe;this._queryDelayer=new ln(200);this._installedExtensions=n.getInstalled().then(d=>{const f=new Set;for(const u of d){f.add(u.identifier.id)}return f})}get themes(){return this._marketplaceThemes}get onDidChange(){return this._onDidChange.event}trigger(e){if(this._tokenSource){this._tokenSource.cancel();this._tokenSource=void 0}this._queryDelayer.trigger(()=>{this._tokenSource=new hn;return this.doSearch(e,this._tokenSource.token)})}async doSearch(e,t){this._searchOngoing=true;this._onDidChange.fire();try{const o=await this._installedExtensions;const n={text:`${this.marketplaceQuery} ${e}`,pageSize:20};const i=await this.extensionGalleryService.query(n,t);for(let a=0;a<i.total&&a<1;a++){if(t.isCancellationRequested){break}const l=this._marketplaceThemes.length;const c=a===0?i.firstPage:await i.getPage(a,t);const h=[];const d=[];for(let u=0;u<c.length;u++){if(t.isCancellationRequested){break}const m=c[u];if(!o.has(m.identifier.id)&&!this._marketplaceExtensions.has(m.identifier.id)){this._marketplaceExtensions.add(m.identifier.id);h.push(this.getMarketplaceColorThemes(m.publisher,m.name,m.version));d.push(m)}}const f=await Promise.all(h);for(let u=0;u<f.length;u++){const m=d[u];for(const S of f[u]){this._marketplaceThemes.push({id:S.id,theme:S,label:S.label,description:`${m.displayName} · ${m.publisherDisplayName}`,galleryExtension:m,buttons:[It]})}}if(l!==this._marketplaceThemes.length){this._marketplaceThemes.sort((u,m)=>u.label.localeCompare(m.label));this._onDidChange.fire()}}}catch(o){if(!dn(o)){this.logService.error(`Error while searching for themes:`,o);this._searchError="message"in o?o.message:String(o)}}finally{this._searchOngoing=false;this._onDidChange.fire()}}openQuickPick(e,t,o){let n=void 0;const i=new so;return new Promise((a,l)=>{const c=i.add(this.quickInputService.createQuickPick());c.items=[];c.sortByLabel=false;c.matchOnDescription=true;c.buttons=[this.quickInputService.backButton];c.title="Marketplace Themes";c.placeholder=r(3035,"Type to Search More. Select to Install. Up/Down Keys to Preview");c.canSelectMany=false;i.add(c.onDidChangeValue(()=>this.trigger(c.value)));i.add(c.onDidAccept(async h=>{const d=c.selectedItems[0];if(d?.galleryExtension){n="selected";c.hide();const f=await this.installExtension(d.galleryExtension);if(f){o(d.theme,true)}else{o(t,true)}}}));i.add(c.onDidTriggerItemButton(h=>{if(Fe(h.item)){const d=h.item.theme?.extensionData?.extensionId;if(d){this.extensionsWorkbenchService.openSearch(`@id:${d}`)}else{this.extensionsWorkbenchService.openSearch(`${this.marketplaceQuery} ${c.value}`)}}}));i.add(c.onDidChangeActive(h=>{if(n===void 0){o(h[0]?.theme,false)}}));i.add(c.onDidHide(()=>{if(n===void 0){o(t,true);n="cancelled"}a(n)}));i.add(c.onDidTriggerButton(h=>{if(h===this.quickInputService.backButton){n="back";c.hide()}}));i.add(this.onDidChange(()=>{let h=this.themes;if(this._searchOngoing){h=h.concat({label:"$(loading~spin) Searching for themes...",id:void 0,alwaysShow:true})}else if(h.length===0&&this._searchError){h=[{label:`$(error) ${r(3036,"Error while searching for themes: {0}",this._searchError)}`,id:void 0,alwaysShow:true}]}const d=c.activeItems[0]?.id;const f=d?h.find(u=>Fe(u)&&u.id===d):void 0;c.items=h;if(f){c.activeItems=[f]}}));this.trigger(e);c.show()}).finally(()=>{i.dispose()})}async installExtension(e){this.extensionsWorkbenchService.openSearch(`@id:${e.identifier.id}`);const t=await this.dialogService.confirm({message:r(3037,"This will install extension '{0}' published by '{1}'. Do you want to continue?",e.displayName,e.publisherDisplayName),primaryButton:r(3038,"OK")});if(!t.confirmed){return false}try{await this.progressService.withProgress({location:15,title:r(3039,"Installing Extension {0}...",e.displayName)},async()=>{await this.extensionManagementService.installFromGallery(e,{isMachineScoped:false})});return true}catch(o){this.logService.error(`Problem installing extension ${e.identifier.id}`,o);return false}}dispose(){if(this._tokenSource){this._tokenSource.cancel();this._tokenSource=void 0}this._queryDelayer.dispose();this._marketplaceExtensions.clear();this._marketplaceThemes.length=0}};Pe=Ne([E(2,gt),E(3,Zo),E(4,to),E(5,Xt),E(6,Xo),E(7,oo),E(8,en)],Pe);let ye=class ki{constructor(e,t,o,n,i,a,l,c){this.options=e;this.setTheme=t;this.getMarketplaceColorThemes=o;this.quickInputService=n;this.extensionGalleryService=i;this.extensionsWorkbenchService=a;this.extensionResourceLoaderService=l;this.instantiationService=c}async openQuickPick(e,t){let o;if(this.extensionGalleryService.isEnabled()){if(this.extensionResourceLoaderService.supportsExtensionGalleryResources&&this.options.browseMessage){o=this.instantiationService.createInstance(Pe,this.getMarketplaceColorThemes.bind(this),this.options.marketplaceTag);e=[qt(this.options.browseMessage,ne.BROWSE_GALLERY),...e]}else{e=[...e,{type:"separator"},qt(this.options.installMessage,ne.EXTENSIONS_VIEW)]}}let n;const i=(l,c)=>{if(n){clearTimeout(n)}n=Ae.setTimeout(()=>{n=void 0;const h=l??t;this.setTheme(h,c?"auto":"preview").then(void 0,d=>{Me(d);this.setTheme(t,void 0)})},c?0:200)};const a=l=>{const c=new so;return new Promise((h,d)=>{let f=false;const u=e.findIndex(S=>Fe(S)&&S.id===l);const m=c.add(this.quickInputService.createQuickPick({useSeparators:true}));m.items=e;m.title=this.options.title;m.description=this.options.description;m.placeholder=this.options.placeholderMessage;m.activeItems=[e[u]];m.canSelectMany=false;m.toggles=this.options.toggles;m.toggles?.forEach(S=>{c.add(S.onChange(()=>this.options.onToggle?.(S,m)))});m.matchOnDescription=true;c.add(m.onDidAccept(async S=>{f=true;const p=m.selectedItems[0];if(!p||p.configureItem){if(!p||p.configureItem===ne.EXTENSIONS_VIEW){this.extensionsWorkbenchService.openSearch(`${this.options.marketplaceTag} ${m.value}`)}else if(p.configureItem===ne.BROWSE_GALLERY){if(o){const T=await o.openQuickPick(m.value,t,i);if(T==="back"){await a(void 0)}}}}else{i(p.theme,true)}m.hide();h()}));c.add(m.onDidChangeActive(S=>i(S[0]?.theme,false)));c.add(m.onDidHide(()=>{if(!f){i(t,true);h()}m.dispose()}));c.add(m.onDidTriggerItemButton(S=>{if(Fe(S.item)){const p=S.item.theme?.extensionData?.extensionId;if(p){this.extensionsWorkbenchService.openSearch(`@id:${p}`)}else{this.extensionsWorkbenchService.openSearch(`${this.options.marketplaceTag} ${m.value}`)}}}));m.show()}).finally(()=>{c.dispose()})};await a(t.id);o?.dispose()}};ye=Ne([E(3,to),E(4,gt),E(5,oo),E(6,mt),E(7,Se)],ye);const St="workbench.action.selectTheme";ie(class extends se{constructor(){super({id:St,title:re(3040,"Color Theme"),category:ae.Preferences,f1:true,keybinding:{weight:200,primary:tn(2048|41,2048|50)}})}getTitle(s){switch(s){case b.DARK:return r(3041,"Select Color Theme for System Dark Mode");case b.LIGHT:return r(3042,"Select Color Theme for System Light Mode");case b.HIGH_CONTRAST_DARK:return r(3043,"Select Color Theme for High Contrast Dark Mode");case b.HIGH_CONTRAST_LIGHT:return r(3044,"Select Color Theme for High Contrast Light Mode");default:return r(3045,"Select Color Theme (detect system color mode disabled)")}}async run(s){const e=s.get(V);const t=s.get(no);const o=e.getPreferredColorScheme();let n;if(o){n=new Rt({title:r(3046,"Detect system color mode enabled. Click to configure."),icon:et.colorMode,isChecked:false,...xt})}else{n=new Rt({title:r(3047,"Detect system color mode disabled. Click to configure."),icon:et.colorMode,isChecked:false,...xt})}const i={installMessage:r(3048,"Install Additional Color Themes..."),browseMessage:"$(plus) "+r(3049,"Browse Additional Color Themes..."),placeholderMessage:this.getTitle(o),marketplaceTag:"category:themes",toggles:[n],onToggle:async(T,k)=>{k.hide();await t.openSettings({query:y.DETECT_COLOR_SCHEME})}};const a=(T,k)=>e.setColorTheme(T,k);const l=(T,k,C)=>e.getMarketplaceColorThemes(T,k,C);const c=s.get(Se);const h=c.createInstance(ye,i,a,l);const d=await e.getColorThemes();const f=e.getColorTheme();const u=Ce(d.filter(T=>T.type===b.LIGHT),r(3050,"light themes"));const m=Ce(d.filter(T=>T.type===b.DARK),r(3051,"dark themes"));const S=Ce(d.filter(T=>on(T.type)),r(3052,"high contrast themes"));let p;switch(o){case b.DARK:p=[...m,...u,...S];break;case b.HIGH_CONTRAST_DARK:case b.HIGH_CONTRAST_LIGHT:p=[...S,...u,...m];break;case b.LIGHT:default:p=[...u,...m,...S];break}await h.openQuickPick(p,f)}});const To="workbench.action.selectIconTheme";ie(class extends se{constructor(){super({id:To,title:re(3053,"File Icon Theme"),category:ae.Preferences,f1:true})}async run(s){const e=s.get(V);const t={installMessage:r(3054,"Install Additional File Icon Themes..."),placeholderMessage:r(3055,"Select File Icon Theme (Up/Down Keys to Preview)"),marketplaceTag:"tag:icon-theme"};const o=(c,h)=>e.setFileIconTheme(c,h);const n=(c,h,d)=>e.getMarketplaceFileIconThemes(c,h,d);const i=s.get(Se);const a=i.createInstance(ye,t,o,n);const l=[{type:"separator",label:r(3056,"file icon themes")},{id:"",theme:H.noIconTheme,label:r(3057,"None"),description:r(3058,"Disable File Icons")},...Ce(await e.getFileIconThemes())];await a.openQuickPick(l,e.getFileIconTheme())}});const Co="workbench.action.selectProductIconTheme";ie(class extends se{constructor(){super({id:Co,title:re(3059,"Product Icon Theme"),category:ae.Preferences,f1:true})}async run(s){const e=s.get(V);const t={installMessage:r(3060,"Install Additional Product Icon Themes..."),browseMessage:"$(plus) "+r(3061,"Browse Additional Product Icon Themes..."),placeholderMessage:r(3062,"Select Product Icon Theme (Up/Down Keys to Preview)"),marketplaceTag:"tag:product-icon-theme"};const o=(c,h)=>e.setProductIconTheme(c,h);const n=(c,h,d)=>e.getMarketplaceProductIconThemes(c,h,d);const i=s.get(Se);const a=i.createInstance(ye,t,o,n);const l=[{type:"separator",label:r(3063,"product icon themes")},{id:Te,theme:P.defaultTheme,label:r(3064,"Default")},...Ce(await e.getProductIconThemes())];await a.openQuickPick(l,e.getProductIconTheme())}});nn.registerCommand("workbench.action.previewColorTheme",async function(s,e,t){const o=s.get(V);let n=mi(await o.getColorThemes(),e);if(n.length===0){n=await o.getMarketplaceColorThemes(e.publisher,e.name,e.version)}for(const i of n){if(!t||i.settingsId===t){await o.setColorTheme(i,"preview");return i.settingsId}}return void 0});function mi(s,e){return s.filter(({extensionData:t})=>t&&t.extensionIsBuiltin&&vt(t.extensionPublisher,e.publisher)&&vt(t.extensionName,e.name))}function qt(s,e){return{id:void 0,label:s,alwaysShow:true,buttons:[It],configureItem:e}}function Fe(s){return s["type"]!=="separator"}function gi(s){const e=s.settingsId??void 0;const t={id:s.id,theme:s,label:s.label,description:s.description||(s.label===e?void 0:e)};if(s.extensionData){t.buttons=[It]}return t}function Ce(s,e){const t=(n,i)=>n.label.localeCompare(i.label);const o=s.map(gi).sort(t);if(o.length>0&&e){o.unshift({type:"separator",label:e})}return o}const It={iconClass:Xe.asClassName(fi),tooltip:r(3065,"Manage Extension")};ie(class extends se{constructor(){super({id:"workbench.action.generateColorTheme",title:re(3066,"Generate Color Theme From Current Settings"),category:ae.Developer,f1:true})}run(s){const e=s.get(V);const t=e.getColorTheme();const o=q.as(Wt.ColorContribution).getColors();const n=o.map(d=>d.id).sort();const i={};const a=[];for(const d of n){const f=t.getColor(d,false);if(f){i[d]=B.Format.CSS.formatHexA(f,true)}else{a.push(d)}}const l=[];for(const d of a){const f=t.getColor(d);if(f){i["__"+d]=B.Format.CSS.formatHexA(f,true)}else{l.push(d)}}for(const d of l){i["__"+d]=null}let c=JSON.stringify({"$schema":ho,type:t.type,colors:i,tokenColors:t.tokenColors.filter(d=>!!d.scope)},null,"	");c=c.replace(/\"__/g,'//"');const h=s.get(sn);return h.openEditor({resource:void 0,contents:c,languageId:"jsonc",options:{pinned:true}})}});const pi="workbench.action.toggleLightDarkThemes";ie(class extends se{constructor(){super({id:pi,title:re(3067,"Toggle between Light/Dark Themes"),category:ae.Preferences,f1:true})}async run(s){const e=s.get(V);const t=s.get(Qt);const o=s.get(io);const n=s.get(no);if(t.getValue(y.DETECT_COLOR_SCHEME)){const c=r(3068,"Cannot toggle between light and dark themes when `{0}` is enabled in settings.",y.DETECT_COLOR_SCHEME);o.prompt(tt.Info,c,[{label:r(3069,"Open Settings"),run:()=>{return n.openUserSettings({query:y.DETECT_COLOR_SCHEME})}}]);return}const i=e.getColorTheme();let a=y.PREFERRED_DARK_THEME;switch(i.type){case b.LIGHT:a=y.PREFERRED_DARK_THEME;break;case b.DARK:a=y.PREFERRED_LIGHT_THEME;break;case b.HIGH_CONTRAST_LIGHT:a=y.PREFERRED_HC_DARK_THEME;break;case b.HIGH_CONTRAST_DARK:a=y.PREFERRED_HC_LIGHT_THEME;break}const l=t.getValue(a);if(l&&typeof l==="string"){const c=(await e.getColorThemes()).find(h=>h.settingsId===l);if(c){e.setColorTheme(c.id,"auto")}}}});const Ti="workbench.action.browseColorThemesInMarketplace";ie(class extends se{constructor(){super({id:Ti,title:re(3070,"Browse Color Themes in Marketplace"),category:ae.Preferences,f1:true})}async run(s){const e="category:themes";const t=s.get(V);const o=s.get(gt);const n=s.get(mt);const i=s.get(Se);if(!o.isEnabled()||!n.supportsExtensionGalleryResources){return}const a=t.getColorTheme();const l=(f,u,m)=>t.getMarketplaceColorThemes(f,u,m);let c;const h=(f,u)=>{if(c){clearTimeout(c)}c=Ae.setTimeout(()=>{c=void 0;const m=f??a;t.setColorTheme(m,u?"auto":"preview").then(void 0,S=>{Me(S);t.setColorTheme(a,void 0)})},u?0:200)};const d=i.createInstance(Pe,l,e);await d.openQuickPick("",t.getColorTheme(),h).then(void 0,Me)}});const be=new pt("ThemesSubMenu");Ie.appendMenuItem(pt.GlobalActivity,{title:r(3071,"Themes"),submenu:be,group:"2_configuration",order:7});Ie.appendMenuItem(pt.MenubarPreferencesMenu,{title:r(3072,"&&Theme"),submenu:be,group:"2_configuration",order:7});Ie.appendMenuItem(be,{command:{id:St,title:r(3040,"Color Theme")},order:1});Ie.appendMenuItem(be,{command:{id:To,title:r(3073,"File Icon Theme")},order:2});Ie.appendMenuItem(be,{command:{id:Co,title:r(3074,"Product Icon Theme")},order:3});let st=class wi{static{ge=this}static{this.STORAGE_KEY="themeUpdatedNotificationShown"}constructor(e,t,o,n,i,a){this._notificationService=e;this._workbenchThemeService=t;this._storageService=o;this._commandService=n;this._telemetryService=i;this._hostService=a;if(o.getBoolean(ge.STORAGE_KEY,-1)){return}setTimeout(async()=>{if(o.getBoolean(ge.STORAGE_KEY,-1)){return}if(await this._hostService.hadLastFocus()){this._storageService.store(ge.STORAGE_KEY,true,-1,0);if(this._workbenchThemeService.hasUpdatedDefaultThemes()){this._showYouGotMigratedNotification()}else{const l=this._workbenchThemeService.getColorTheme().settingsId;if(l===w.COLOR_THEME_LIGHT_OLD||l===w.COLOR_THEME_DARK_OLD){this._tryNewThemeNotification()}}}},3e3)}async _showYouGotMigratedNotification(){const e=this._workbenchThemeService.getColorTheme().type===b.LIGHT;const t=e?w.COLOR_THEME_LIGHT:w.COLOR_THEME_DARK;const o=(await this._workbenchThemeService.getColorThemes()).find(n=>n.settingsId===t);if(o){const n=[{label:r(3075,"Keep New Theme"),run:()=>{this._writeTelemetry("keepNew")}},{label:r(3076,"Browse Themes"),run:()=>{this._writeTelemetry("browse");this._commandService.executeCommand(St)}},{label:r(3077,"Revert"),run:async()=>{this._writeTelemetry("keepOld");const i=e?w.COLOR_THEME_LIGHT_OLD:w.COLOR_THEME_DARK_OLD;const a=(await this._workbenchThemeService.getColorThemes()).find(l=>l.settingsId===i);if(a){this._workbenchThemeService.setColorTheme(a,"auto")}}}];await this._notificationService.prompt(tt.Info,r(3078,"Visual Studio Code now ships with a new default theme '{0}'. If you prefer, you can switch back to the old theme or try one of the many other color themes available.",o.label),n,{onCancel:()=>this._writeTelemetry("cancel")})}}async _tryNewThemeNotification(){const e=this._workbenchThemeService.getColorTheme().type===b.LIGHT?w.COLOR_THEME_LIGHT:w.COLOR_THEME_DARK;const t=(await this._workbenchThemeService.getColorThemes()).find(o=>o.settingsId===e);if(t){const o=[{label:r(3079,"Try New Theme"),run:()=>{this._writeTelemetry("tryNew");this._workbenchThemeService.setColorTheme(t,"auto")}},{label:r(3080,"Cancel"),run:()=>{this._writeTelemetry("cancel")}}];await this._notificationService.prompt(tt.Info,r(3081,"Visual Studio Code now ships with a new default theme '{0}'. Do you want to give it a try?",t.label),o,{onCancel:()=>this._writeTelemetry("cancel")})}}_writeTelemetry(e){this._telemetryService.publicLog2("themeUpdatedNotication",{web:ft,reaction:e})}};st=ge=Ne([E(0,io),E(1,V),E(2,Yt),E(3,rn),E(4,Zt),E(5,an)],st);const Ci=q.as(cn.Workbench);Ci.registerWorkbenchContribution(st,4);class yi extends it{registerEditorContainer(){return{dispose(){}}}setTheme(e){void this.getColorThemes().then(t=>{setTimeout(()=>{void this.setColorTheme(t.find(o=>o.settingsId===e)??e,8)})})}}function _i(){return{...un(),[fn.toString()]:new Vt(yi,[],false)}}export{_i as default};
