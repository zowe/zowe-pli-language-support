import{S as C,lC as N,sD as L,X as F,Y as E,cV as n,iM as _,sE as V,B as H,sF as S,hD as B,nd as z,ly as K,sB as i,c7 as k,dG as P,r4 as A,r3 as W,ne as I,hL as M,iP as U,_ as w,e as h,d as Y,f as x,s as q,q as J,p as X,i_ as $,j6 as j,sG as Q,dR as Z,nM as ee,kQ as te}from"./index-B5XFE6sL.js";import{E as ie}from"./editor.contribution._autosave-DK1jh7f9.js";var y;class oe{constructor(){this.selectedEditors=[];this.isSelected=()=>false;this.setSelection=i;this.isTransient=()=>false;this.windowId=k.vscodeWindowId;this.createEditorActions=i;this.onDidFocus=n.None;this.onDidOpenEditorFail=n.None;this.whenRestored=Promise.resolve();this.disposed=false;this.setActive=i;this.notifyIndexChanged=i;this.relayout=i;this.dispose=i;this.toJSON=i;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this.minimumHeight=0;this.maximumHeight=Number.POSITIVE_INFINITY;this.onDidChange=n.None;this.layout=i;this.onDidModelChange=n.None;this.onWillDispose=n.None;this.onDidActiveEditorChange=n.None;this.onWillCloseEditor=n.None;this.onDidCloseEditor=n.None;this.onWillMoveEditor=n.None;this.onWillOpenEditor=n.None;this.id=0;this.index=0;this.label="main";this.ariaLabel="main";this.activeEditorPane=void 0;this.activeEditor=null;this.previewEditor=null;this.count=0;this.isEmpty=false;this.isLocked=false;this.stickyCount=0;this.editors=[];this.getEditors=()=>[];this.findEditors=()=>[];this.getEditorByIndex=()=>void 0;this.getIndexOfEditor=i;this.openEditor=i;this.openEditors=i;this.isPinned=()=>false;this.isSticky=()=>false;this.isActive=()=>false;this.contains=()=>false;this.moveEditor=i;this.moveEditors=i;this.copyEditor=i;this.copyEditors=i;this.closeEditor=i;this.closeEditors=i;this.closeAllEditors=i;this.replaceEditors=i;this.pinEditor=()=>{};this.stickEditor=()=>{};this.unstickEditor=()=>{};this.lock=()=>{};this.isFirst=i;this.isLast=i}get groupsView(){return i()}notifyLabelChanged(){}get titleHeight(){return i()}get element(){return i()}get scopedContextKeyService(){return C.get(P)}focus(){}}const se=new oe;class ne{constructor(o){this.editor=o;this.onDidChangeControl=n.None;this.onDidChangeSizeConstraints=n.None;this.onDidFocus=n.None;this.onDidBlur=n.None;this.input=void 0;this.options=void 0;this.group=se;this.scopedContextKeyService=void 0;this.getViewState=i;this.isVisible=i;this.hasFocus=i;this.getId=i;this.getTitle=i;this.focus=i}get minimumWidth(){return A.width}get maximumWidth(){return W.width}get minimumHeight(){return A.height}get maximumHeight(){return W.height}getControl(){return this.editor}}function re(g,o,a){async function u(t,d,c){const e=_(t)?d:t.options;if(V(d)){c=d}const s=H(t)||_(t)?t.resource:void 0;if(s==null||!g.canHandleResource(s)){return await o(t,d,c)}let r;const f=C.get(N).listCodeEditors();r=f.find(l=>l instanceof S&&l.getModel()!=null&&l.getModel().uri.toString()===s.toString());if(r==null){const l=await o(t,d,c);if(l!=null){return l}const p=await g.createModelReference(s);r=await a?.(p,e,c===B);if(r==null){p.dispose();return void 0}}if(e!=null){z(e,r,K.Immediate)}if(!(e?.preserveFocus??false)){r.focus();r.getContainerDomNode().scrollIntoView()}return new ne(r)}return u}let O=class he extends ie{constructor(o,a,u,t,d,c,e,s,r,f,l,p,v){super(void 0,u,t,d,c,e,s,r,f,l,p);this._isEditorPartVisible=a;this.openEditor=re(v,this.openEditor.bind(this),o)}get activeTextEditorControl(){const o=C.get(N).getFocusedCodeEditor();if(o!=null&&o instanceof L){return o}return super.activeTextEditorControl}async openEditor(o,a,u){if(!this._isEditorPartVisible()){return void 0}return await super.openEditor(o,a,u)}};O=w([h(2,Y),h(3,x),h(4,q),h(5,J),h(6,X),h(7,$),h(8,j),h(9,Q),h(10,Z),h(11,ee),h(12,te)],O);class T{constructor(o,a,u){this.editor=o;this.input=a;this.group=u;this.onDidChangeControl=n.None;this.options=void 0;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this.minimumHeight=0;this.maximumHeight=Number.POSITIVE_INFINITY;this.onDidChangeSizeConstraints=n.None;this.scopedContextKeyService=void 0;this.onDidFocus=this.editor.onDidFocusEditorWidget;this.onDidBlur=this.editor.onDidBlurEditorWidget}getControl(){return this.editor}getViewState(){return void 0}isVisible(){return true}hasFocus(){return this.editor.hasWidgetFocus()}getId(){return this.editor.getId()}getTitle(){return void 0}focus(){this.editor.focus()}}let G=y=class ue extends F{constructor(o,a,u){super();this.editor=o;this.scopedContextKeyService=u;this.active=false;this.selectedEditors=[];this.isSelected=()=>false;this.setSelection=i;this.isTransient=()=>false;this.windowId=k.vscodeWindowId;this.onDidFocus=this.editor.onDidFocusEditorWidget;this.onDidOpenEditorFail=n.None;this.whenRestored=Promise.resolve();this.disposed=false;this.notifyIndexChanged=i;this.relayout=i;this.toJSON=i;this.minimumWidth=0;this.maximumWidth=Number.POSITIVE_INFINITY;this.minimumHeight=0;this.maximumHeight=Number.POSITIVE_INFINITY;this.onDidChange=this.editor.onDidLayoutChange;this.layout=()=>this.editor.layout();this._onDidModelChange=new E;this.onDidModelChange=this._onDidModelChange.event;this.onWillDispose=this.editor.onDidDispose;this._onDidActiveEditorChange=new E;this.onDidActiveEditorChange=this._onDidActiveEditorChange.event;this.onWillCloseEditor=n.None;this._onDidCloseEditor=new E;this.onDidCloseEditor=this._onDidCloseEditor.event;this.onWillMoveEditor=n.None;this._onWillOpenEditor=new E;this.onWillOpenEditor=this._onWillOpenEditor.event;this.id=--y.idCounter;this.index=-1;this.label=`standalone editor ${-this.id}`;this.ariaLabel=`standalone editor ${-this.id}`;this.previewEditor=null;this.isLocked=true;this.stickyCount=0;this.getEditors=()=>this.editors;this.findEditors=e=>this.pane!=null&&e.toString()===this.pane.input.resource.toString()?[this.pane.input]:[];this.getEditorByIndex=e=>this.pane!=null&&e===0?this.pane.input:void 0;this.getIndexOfEditor=e=>this.pane!=null&&this.pane.input===e?0:-1;this.openEditor=async e=>{if(e.isDisposed()){return void 0}if(e instanceof I&&e.resource.toString()===this.pane?.input.resource.toString()){this.focus();return this.pane}return void 0};this.openEditors=async e=>{if(e.length===1){return await this.openEditor(e[0].editor)}return void 0};this.isPinned=()=>false;this.isSticky=()=>false;this.isActive=()=>this.editor.hasWidgetFocus();this.contains=e=>{return this.pane!=null&&this.pane.input===e};this.moveEditor=i;this.moveEditors=i;this.copyEditor=i;this.copyEditors=i;this.closeEditor=i;this.closeEditors=i;this.closeAllEditors=i;this.replaceEditors=i;this.pinEditor=()=>{};this.stickEditor=()=>{};this.unstickEditor=()=>{};this.lock=()=>{};this.isFirst=i;this.isLast=i;const t=e=>{const s=a.createInstance(I,e,void 0,void 0,void 0,void 0);this._onWillOpenEditor.fire({editor:s,groupId:this.id});this.pane=new T(o,s,this);this._onDidModelChange.fire({kind:M.EDITOR_OPEN,editor:s,editorIndex:0});this._onDidActiveEditorChange.fire({editor:s})};const d=e=>{if(this.pane!=null&&this.pane.input.resource.toString()===e.toString()){const s=this.pane;this.pane=void 0;this._onDidModelChange.fire({kind:M.EDITOR_CLOSE,editorIndex:0});this._onDidActiveEditorChange.fire({editor:void 0});this._onDidCloseEditor.fire({context:U.UNKNOWN,editor:s.input,groupId:this.id,index:0,sticky:false})}};o.onDidChangeModel(e=>{if(e.oldModelUrl!=null){d(e.oldModelUrl)}if(e.newModelUrl!=null){t(e.newModelUrl)}});this._register({dispose:()=>{const e=o.getModel();if(e!=null){d(e.uri)}}});const c=o.getModel();if(c!=null){const e=a.createInstance(I,c.uri,void 0,void 0,void 0,void 0);this.pane=new T(o,e,this)}}get groupsView(){return i()}notifyLabelChanged(){}createEditorActions(){return{actions:{primary:[],secondary:[]},onDidChange:n.None}}get titleHeight(){return i()}setActive(o){this.active=o}get element(){return this.editor.getContainerDomNode()}get activeEditorPane(){return this.pane}get activeEditor(){return this.pane?.input??null}get count(){return this.pane!=null?1:0}get isEmpty(){return this.pane==null}get editors(){return this.pane!=null?[this.pane.input]:[]}focus(){this.editor.focus();this.editor.getContainerDomNode().scrollIntoView()}};G.idCounter=0;G=y=w([h(1,x),h(2,P)],G);let R=class le extends F{constructor(o,a,u){super();this.delegate=o;this.instantiationService=u;this._serviceBrand=void 0;this.additionalGroups=[];this.activeGroupOverride=void 0;this.onDidCreateAuxiliaryEditorPart=this.delegate.onDidCreateAuxiliaryEditorPart;this.onDidChangeGroupMaximized=this.delegate.onDidChangeGroupMaximized;this._onDidChangeActiveGroup=new E;this.onDidChangeActiveGroup=n.any(this._onDidChangeActiveGroup.event,this.delegate.onDidChangeActiveGroup);this._onDidAddGroup=new E;this.onDidAddGroup=n.any(this._onDidAddGroup.event,this.delegate.onDidAddGroup);this._onDidRemoveGroup=new E;this.onDidRemoveGroup=n.any(this._onDidRemoveGroup.event,this.delegate.onDidRemoveGroup);this.onDidMoveGroup=this.delegate.onDidMoveGroup;this.onDidActivateGroup=this.delegate.onDidActivateGroup;this.onDidChangeGroupIndex=this.delegate.onDidChangeGroupIndex;this.onDidChangeGroupLocked=this.delegate.onDidChangeGroupLocked;this.getLayout=()=>{return this.delegate.getLayout()};this.getGroups=t=>{return[...this.delegate.getGroups(t),...this.additionalGroups]};this.getGroup=t=>{return this.delegate.getGroup(t)??this.additionalGroups.find(d=>d.id===t)};this.activateGroup=(...t)=>{return this.delegate.activateGroup(...t)};this.getSize=(...t)=>{return this.delegate.getSize(...t)};this.setSize=(...t)=>{return this.delegate.setSize(...t)};this.arrangeGroups=(...t)=>{return this.delegate.arrangeGroups(...t)};this.applyLayout=(...t)=>{return this.delegate.applyLayout(...t)};this.setGroupOrientation=(...t)=>{return this.delegate.setGroupOrientation(...t)};this.findGroup=(...t)=>{return this.delegate.findGroup(...t)};this.addGroup=(...t)=>{return this.delegate.addGroup(...t)};this.removeGroup=(...t)=>{return this.delegate.removeGroup(...t)};this.moveGroup=(...t)=>{return this.delegate.moveGroup(...t)};this.mergeGroup=(...t)=>{return this.delegate.mergeGroup(...t)};this.mergeAllGroups=(...t)=>{return this.delegate.mergeAllGroups(...t)};this.copyGroup=(...t)=>{return this.delegate.copyGroup(...t)};this.onDidChangeEditorPartOptions=this.delegate.onDidChangeEditorPartOptions;setTimeout(()=>{const t=C.get(N);const d=e=>{if(e instanceof S){let s;const r=m=>{const D=m!=null?this.additionalGroups.find(b=>b.editor===m):void 0;if(this.activeGroupOverride!==D){this.activeGroupOverride=D;this._onDidChangeActiveGroup.fire(this.activeGroup)}};const f=m=>{if(!a&&this.activeGroupOverride===this.additionalGroups.find(D=>D.editor===m)){r(void 0)}};const l=()=>{if(s!=null)window.clearTimeout(s);r(e)};const p=()=>{if(s!=null)window.clearTimeout(s);s=window.setTimeout(()=>{s=void 0;f(e)},100)};e.onDidDispose(()=>{f(e)});e.onDidFocusEditorText(l);e.onDidFocusEditorWidget(l);e.onDidBlurEditorText(p);e.onDidBlurEditorWidget(p);if(e.hasWidgetFocus()){l()}const v=u.createInstance(G,e);this.additionalGroups.push(v);this._onDidAddGroup.fire(v)}};const c=e=>{if(e instanceof S){const s=this.additionalGroups.find(r=>r.editor===e);if(s!=null){s.dispose();if(this.activeGroupOverride===s){this.activeGroupOverride=void 0;this._onDidChangeActiveGroup.fire(this.activeGroup)}this.additionalGroups=this.additionalGroups.filter(r=>r!==s);this._onDidRemoveGroup.fire(s)}}};this._register(t.onCodeEditorAdd(d));this._register(t.onCodeEditorRemove(c));t.listCodeEditors().forEach(d)})}getScopedInstantiationService(){return this.instantiationService}registerContextKeyProvider(o){return this.delegate.registerContextKeyProvider(o)}saveWorkingSet(o){return this.delegate.saveWorkingSet(o)}getWorkingSets(){return this.delegate.getWorkingSets()}applyWorkingSet(o){return this.delegate.applyWorkingSet(o)}deleteWorkingSet(o){return this.delegate.deleteWorkingSet(o)}get isReady(){return this.delegate.isReady}get whenReady(){return this.delegate.whenReady}get whenRestored(){return this.delegate.whenRestored}get hasRestorableState(){return this.delegate.hasRestorableState}get parts(){return this.delegate.parts}createAuxiliaryEditorPart(o){return this.delegate.createAuxiliaryEditorPart(o)}get mainPart(){return this.delegate.mainPart}getPart(o){return this.delegate.getPart(o)}toggleMaximizeGroup(o){return this.delegate.toggleMaximizeGroup(o)}toggleExpandGroup(o){return this.delegate.toggleExpandGroup(o)}createEditorDropTarget(o,a){return this.delegate.createEditorDropTarget(o,a)}get groups(){return[...this.additionalGroups,...this.delegate.groups]}get activeGroup(){return this.activeGroupOverride??this.delegate.activeGroup}get sideGroup(){return this.delegate.sideGroup}get count(){return this.delegate.count+this.additionalGroups.length}get orientation(){return this.delegate.orientation}get partOptions(){return this.delegate.partOptions}};R=w([h(2,x)],R);export{O as M,R as a,se as f};
